<!-- pages/orderTrack/orderTrack.wxml -->
<view class="container">
  <!-- 订单信息区域 -->
  <view class="order-info" wx:if="{{order}}">
    <text class="section-title">订单信息</text>
    <text class="label">订单号:</text>
    <text class="value">{{order.order_number}}</text>

    <text class="label">重量:</text>
    <text class="value">{{order.weight}} kg</text>

    <text class="label">体积:</text>
    <text class="value">{{order.volume}} m³</text>

    <text class="label">起点:</text>
    <text class="value">{{order.origin}}</text>

    <text class="label">终点:</text>
    <text class="value">{{order.destination_first}}</text>
    <text class="value">{{order.destination_second}}</text>

    <text class="label">客户:</text>
    <text class="value">{{order.customer_name}}</text>

    <text class="label">电话:</text>
    <text class="value">{{order.customer_phone}}</text>

    <text class="label">备注:</text>
    <text class="value">{{order.remark || '无'}}</text>
  </view>

  <!-- 已分配信息区域 -->
  <view class="assigned-section" wx:if="{{selectionMade && assignedTo}}">
    <text class="section-title">已分配给租户</text>
    <view class="assigned-info">
      <text class="info-label">租户名称:</text>
      <text class="info-value">{{assignedTo.tenant_name}}</text>

      <text class="info-label">联系电话:</text>
      <text class="info-value">{{assignedTo.contact_phone}}</text>

      <text class="info-label">车牌号:</text>
      <text class="info-value">{{assignedTo.license_plate}}</text>

      <text class="info-label">车辆类型:</text>
      <text class="info-value">{{assignedTo.vehicle_type}}</text>
    </view>
  </view>

  <!-- 响应列表区域 -->
  <view class="responses-section" wx:if="{{!selectionMade}}">
    <text class="section-title">租户响应列表</text>
    <view class="response-list">
      <block wx:if="{{responses.length > 0}}">
        <view class="response-item" wx:for="{{responses}}" wx:key="tenant_id">
          <text class="response-tenant-name">{{item.tenant_name}}</text>
          <text class="response-contact">电话: {{item.contact_phone}}</text>
          <text class="response-contact">车牌: {{item.license_plate}}</text>
          <text class="response-contact">类型: {{item.vehicle_type}}</text>
          <button class="select-btn" bindtap="selectTenant" data-id="{{item.tenant_id}}" data-name="{{item.tenant_name}}">选择</button>
        </view>
      </block>
      <block wx:else>
        <view class="no-responses">暂无租户响应</view>
      </block>
    </view>
  </view>

  <!-- 选择提示 -->
  <view class="selection-notice" wx:if="{{selectionMade}}">
    订单已成功分配给租户，请等待联系。
  </view>

  <!-- 刷新按钮 -->
  <button class="refresh-btn" bindtap="onRefresh" loading="{{loading}}">刷新</button>
</view>