<!-- pages/order/order.wxml -->
<view class="container">
  <view class="header">
    <text class="title">创建订单</text>
  </view>

  <view class="content">
    <!-- 货物信息 -->
    <view class="section">
      <text class="section-title">货物信息</text>
      <view class="form-item">
        <text class="label">货物类型</text>
        <view class="picker-container">
          <picker bindchange="onCargoTypeChange" value="{{ cargoTypeIndex }}" range="{{ cargoTypes }}">
            <view class="picker-view">
              <text>{{ cargoTypes[cargoTypeIndex] || '请选择' }}</text>
              <text class="picker-arrow">></text>
            </view>
          </picker>
          <input type="text" placeholder="货物备注" value="{{ cargoRemark }}" bindinput="onCargoRemarkInput" style="width: 100%; padding: 8rpx; border: 1rpx solid #ddd; border-radius: 4rpx; font-size: 24rpx;" />
        </view>
       </view>
      <view class="form-item">
        <text class="label">货物重量 (kg)</text>
        <input type="number" placeholder="请输入货物重量" bindinput="onGoodsWeightInput" />
      </view>
      <!-- 横向排列的长宽高 -->
      <view class="form-item dimensions-row">
        <view class="dimension-item">
          <text class="label">长 (m)</text>
          <input type="number" placeholder="请输入长度" bindinput="onLengthInput" />
        </view>
        <view class="dimension-item">
          <text class="label">宽 (m)</text>
          <input type="number" placeholder="请输入宽度" bindinput="onWidthInput" />
        </view>
        <view class="dimension-item">
          <text class="label">高 (m)</text>
          <input type="number" placeholder="请输入高度" bindinput="onHeightInput" />
        </view>
      </view>
      <!-- 显示计算出的体积 -->
      <view class="form-item">
        <text class="label">货物体积 (m³)</text>
        <input type="number" disabled value="{{ volume }}" style="background-color: #f5f5f5; color: #666;" />
      </view>
    </view>

    <!-- 发货信息 -->
    <view class="section">
      <text class="section-title">发货信息</text>
      <view class="form-item">
        <text class="label">发货地址</text>
        <view class="address-input-container">
          <input type="text" placeholder="点击选择或输入地址" bindinput="onDepartureAddressInput" value="{{ departureAddress }}" />
          <button class="map-btn" bindtap="selectDepartureLocation">地图选点</button>
        </view>
      </view>
      <view class="form-item">
        <text class="label">发货人</text>
        <input type="text" placeholder="请输入发货人姓名" bindinput="onDepartureNameInput" />
      </view>
      <view class="form-item">
        <text class="label">联系方式</text>
        <input type="number" placeholder="请输入发货人手机号" bindinput="onDeparturePhoneInput" />
      </view>
    </view>

    <!-- 收货信息 -->
    <view class="section">
      <text class="section-title">收货信息</text>
      <view class="form-item">
        <text class="label">收货地址</text>
        <view class="address-input-container">
          <input type="text" placeholder="点击选择或输入地址" bindinput="onDestinationAddressInput" value="{{ destinationAddress }}" />
          <button class="map-btn" bindtap="selectDestinationLocation">地图选点</button>
        </view>
      </view>
      <view class="form-item">
        <text class="label">收货人</text>
        <input type="text" placeholder="请输入收货人姓名" bindinput="onDestinationNameInput" />
      </view>
      <view class="form-item">
        <text class="label">联系方式</text>
        <input type="number" placeholder="请输入收货人手机号" bindinput="onDestinationPhoneInput" />
      </view>
    </view>

    <!-- 用车需求 -->
    <view class="section">
      <text class="section-title">用车需求</text>
      <view class="form-item">
        <text class="label">车型</text>
        <picker bindchange="onVehicleTypeChange" value="{{ vehicleTypeIndex }}" range="{{ vehicleTypes }}">
          <view class="picker-view">
            <text>{{ vehicleTypes[vehicleTypeIndex] || '请选择' }}</text>
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>
      <view class="form-item">
        <text class="label">取货时间</text>
        <picker mode="time" bindchange="onPickupTimeChange" value="{{ pickupTime }}">
          <view class="picker-view">
            <text>{{ pickupTime || '请选择时间' }}</text>
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 预估价格 (缺省) -->
    <view class="section estimate-section">
      <text class="section-title">预估价格</text>
      <view class="estimate-price">
        <text class="price-text">--</text>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-container">
      <button class="action-btn primary" bindtap="submitOrder">
        <text class="btn-text">创建订单</text>
      </button>
    </view>
  </view>
</view>