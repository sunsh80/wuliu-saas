<!-- pages/my/my.wxml -->
<view class="container">
  <view class="user-section">
    <block wx:if="{{userLoggedIn}}">
      <view class="user-info">
        <!-- 尝试从 userInfo 中获取更具体的名字或邮箱 -->
        <text class="name">你好, {{userInfo.name || userInfo.email || '用户'}}</text>
        <!-- 如果 userInfo 中包含 contact_phone，也可以显示 -->
        <!-- <text class="phone">{{userInfo.contact_phone || userInfo.phone || '未绑定手机'}}</text> -->
        <!-- 或者根据租户信息显示 -->
        <text class="tenant-name">租户: {{userInfo.name || '未知租户'}}</text>
      </view>
      <button class="logout-btn" bindtap="handleLogout">退出登录</button>
    </block>
    <block wx:else>
      <!-- 修改按钮文本和行为 -->
      <button class="login-btn" bindtap="handleLogin">登录/注册</button>
    </block>
  </view>

  <view class="features-section">
    <view class="feature-item" bindtap="navigateToSettings">
      <text>设置</text>
    </view>
    <view class="feature-item" bindtap="navigateToRecharge">
      <text>充值</text>
    </view>
    <view class="feature-item" bindtap="navigateToPoints">
      <text>积分管理</text>
    </view>
  </view>
</view>