# æ•°å­ªæ™ºè¿æ— äººç‰©æµ SaaS å¹³å° - 1.0.1 ç‰ˆæœ¬åŠŸèƒ½æ‰©å±•è®¡åˆ’

**ç”Ÿæˆæ—¶é—´**: 2026-02-21  
**é¡¹ç›®ç‰ˆæœ¬**: 1.0.1  
**æ–‡æ¡£ç±»å‹**: åŠŸèƒ½æ‰©å±•å¼€å‘è®¡åˆ’ï¼ˆåŸºäºç°æœ‰åŠŸèƒ½æ·±åŒ–ï¼‰

---

## ğŸ“‹ ç‰ˆæœ¬æ¦‚è¿°

1.0.1 ç‰ˆæœ¬åœ¨ 1.0.x ç°æœ‰åŠŸèƒ½åŸºç¡€ä¸Šï¼Œå‚è€ƒ**ç½‘çº¦è½¦**ï¼ˆæ»´æ»´/Uberï¼‰å’Œ**æ— äººç‰©æµå¹³å°**è¡Œä¸šå®è·µï¼Œå¯¹å·²æœ‰æ¨¡å—è¿›è¡Œæ·±åŒ–æ‰©å±•ã€‚

### ç‰ˆæœ¬å®šä½

| ç‰ˆæœ¬ | å®šä½ | å†…å®¹ |
|------|------|------|
| **1.0.x** | åŸºç¡€åŠŸèƒ½ | è®¢å•ã€ç§Ÿæˆ·ã€è½¦è¾†ã€åœ°å›¾ã€é’±åŒ…ã€ç»“ç®— |
| **1.0.1** | åŠŸèƒ½æ·±åŒ– | ä¸€å•å¤šç‚¹ã€æ··åˆæ”¯ä»˜ã€ä¼˜æƒ åˆ¸ã€å®¢æœã€è¯„ä»·ä¿¡ç”¨ã€æ•°æ®ç»Ÿè®¡ |
| **1.1.0** | æ–°å¢æ¨¡å— | æ™ºèƒ½è°ƒåº¦ã€å®‰å…¨é£æ§ã€å……ç”µæ¡©ã€ç”µå­å›´æ ã€ç»´ä¿ç®¡ç†ã€ç§¯åˆ†å•†åŸ |

---

## ğŸ¯ 1.0.1 åŠŸèƒ½æ‰©å±•è¯¦ç»†è§„åˆ’

### ä¸€ã€è®¢å•æ¨¡å—æ‰©å±•ï¼ˆåŸºäºç°æœ‰ orders è¡¨ï¼‰

#### 1.1 ä¸€å•å¤šç‚¹å¸è´§ ğŸ”¥

**æ‰©å±•ç°æœ‰**: `orders` è¡¨ã€`/api/av-route/multi-point`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | å¤šç‚¹ä¸‹å• | åˆ›å»ºè®¢å•æ—¶æ·»åŠ å¤šä¸ªå¸è´§ç‚¹ | P0 |
| ğŸ“± å°ç¨‹åº | å¸è´§ç‚¹ç®¡ç† | ç¼–è¾‘ã€åˆ é™¤ã€è°ƒæ•´å¸è´§ç‚¹é¡ºåº | P0 |
| ğŸ“± å°ç¨‹åº | å¤šç‚¹è®¢å•è¯¦æƒ… | å±•ç¤ºæ‰€æœ‰å¸è´§ç‚¹åŠçŠ¶æ€ | P0 |
| ğŸ“± å°ç¨‹åº | å¤šç‚¹è½¨è¿¹è¿½è¸ª | å®æ—¶æ˜¾ç¤ºå·²å®Œæˆ/å¾…å®Œæˆå¸è´§ç‚¹ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | å¤šç‚¹è®¢å•ç›‘æ§ | ç›‘æ§æ‰€æœ‰å¤šç‚¹è®¢å•çŠ¶æ€ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è·¯å¾„ä¼˜åŒ–å¹²é¢„ | äººå·¥é‡æ–°è§„åˆ’å¸è´§é¡ºåº | P1 |
| ğŸ–¥ï¸ PC å¹³å° | å¤šç‚¹å®šä»·é…ç½® | é…ç½®å¤šç‚¹è®¢å•è®¡ä»·è§„åˆ™ | P0 |
| ğŸšš PC æ‰¿è¿å•† | å¤šç‚¹æ¥å• | æŠ¢å•/æ¥å•ï¼ˆå¤šç‚¹è®¢å•ï¼‰ | P0 |
| ğŸšš PC æ‰¿è¿å•† | é€ç‚¹å¯¼èˆª | æŒ‰é¡ºåºå¯¼èˆªè‡³å„å¸è´§ç‚¹ | P0 |
| ğŸšš PC æ‰¿è¿å•† | é€ç‚¹ç­¾æ”¶ | æ¯ä¸ªå¸è´§ç‚¹æ‹ç…§/ç­¾æ”¶ç¡®è®¤ | P0 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- å¤šç‚¹è®¢å•æ‰©å±•è¡¨
CREATE TABLE multipoint_orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER UNIQUE,          -- å…³è” orders.id
    total_distance REAL,
    total_duration REAL,
    total_amount REAL,
    segment_amounts TEXT,             -- JSON æ•°ç»„ï¼Œæ¯æ®µè´¹ç”¨
    current_point_index INTEGER DEFAULT 0,
    status TEXT DEFAULT 'in_progress',
    created_at DATETIME,
    completed_at DATETIME
);

-- å¸è´§ç‚¹è¡¨
CREATE TABLE delivery_points (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    point_index INTEGER,              -- å¸è´§ç‚¹é¡ºåº
    address TEXT,
    latitude REAL,
    longitude REAL,
    contact_name TEXT,
    contact_phone TEXT,
    goods_description TEXT,
    goods_weight REAL,
    status TEXT DEFAULT 'pending',    -- pending/completed/failed
    signed_by TEXT,
    signed_at DATETIME,
    signature_image TEXT,
    created_at DATETIME
);
```

**æ–°å¢ API**:
```
POST   /api/customer/order/create-multipoint    # åˆ›å»ºå¤šç‚¹è®¢å•
GET    /api/customer/order/multipoint/:id       # å¤šç‚¹è®¢å•è¯¦æƒ…
PUT    /api/customer/order/multipoint/:id       # æ›´æ–°å¤šç‚¹è®¢å•
POST   /api/customer/order/delivery-point       # æ·»åŠ å¸è´§ç‚¹
DELETE /api/customer/order/delivery-point/:id   # åˆ é™¤å¸è´§ç‚¹
PUT    /api/customer/order/reorder-points       # è°ƒæ•´é¡ºåº

GET    /api/admin/order/multipoint-list         # å¤šç‚¹è®¢å•åˆ—è¡¨
POST   /api/admin/order/optimize-route          # è·¯å¾„ä¼˜åŒ–

POST   /api/carrier/order/claim-multipoint      # æŠ¢å¤šç‚¹è®¢å•
POST   /api/carrier/order/checkin-point         # å¸è´§ç‚¹ç­¾æ”¶
POST   /api/carrier/order/point-exception       # ä¸ŠæŠ¥å¼‚å¸¸
```

---

#### 1.2 è®¢å•å…¨ç”Ÿå‘½å‘¨æœŸè¿½è¸ª

**æ‰©å±•ç°æœ‰**: `orders.status`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | è®¢å•çŠ¶æ€è¿½è¸ª | å®æ—¶æŸ¥çœ‹è®¢å•å½“å‰çŠ¶æ€ | P0 |
| ğŸ“± å°ç¨‹åº | çŠ¶æ€å˜æ›´é€šçŸ¥ | è®¢å•çŠ¶æ€å˜æ›´æ¨é€æé†’ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | è®¢å•çŠ¶æ€ç›‘æ§ | æŸ¥çœ‹æ‰€æœ‰è®¢å•çŠ¶æ€åˆ†å¸ƒ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | å¼‚å¸¸è®¢å•é¢„è­¦ | è¶…æ—¶æœªæ¥å•ã€é•¿æ—¶é—´æœªé…é€é¢„è­¦ | P0 |
| ğŸšš PC æ‰¿è¿å•† | çŠ¶æ€ä¸ŠæŠ¥ | æ›´æ–°è®¢å•æ‰§è¡ŒçŠ¶æ€ | P0 |

**è®¢å•çŠ¶æ€æ‰©å±•**:
```
pending â†’ å¾…æ¥å•
assigned â†’ å·²åˆ†é…/å·²æ¥å•
pickup_done â†’ å·²å–è´§
in_delivery â†’ é…é€ä¸­
at_delivery_point â†’ åˆ°è¾¾å¸è´§ç‚¹
delivered â†’ å·²é€è¾¾
completed â†’ å·²å®Œæˆ
cancelled â†’ å·²å–æ¶ˆ
refunded â†’ å·²é€€æ¬¾
```

---

#### 1.3 æ™ºèƒ½åŒ¹é…/æ´¾å•

**æ‰©å±•ç°æœ‰**: `matching` æ ‡ç­¾ã€`/api/carrier/order/claim`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ–¥ï¸ PC å¹³å° | æ´¾å•æ¨¡å¼é…ç½® | æŠ¢å•/æ´¾å•/æ··åˆæ¨¡å¼åˆ‡æ¢ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | åŒ¹é…è§„åˆ™é…ç½® | é…ç½®åŒ¹é…æƒé‡ï¼ˆè·ç¦»ã€è¯„åˆ†ã€æœåŠ¡åŒºåŸŸï¼‰ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æ´¾å•è®°å½•æŸ¥è¯¢ | æŸ¥çœ‹æ´¾å•å†å²ã€æˆåŠŸç‡ | P1 |
| ğŸšš PC æ‰¿è¿å•† | è‡ªåŠ¨æ¥å•è®¾ç½® | è®¾ç½®è‡ªåŠ¨æ¥å•æ¡ä»¶ï¼ˆåŒºåŸŸã€è´§ç‰©ç±»å‹ï¼‰ | P1 |
| ğŸšš PC æ‰¿è¿å•† | æ´¾å•åå¥½ | è®¾ç½®åå¥½è®¢å•ç±»å‹ã€åŒºåŸŸ | P1 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- æ´¾å•è®°å½•è¡¨
CREATE TABLE dispatch_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    carrier_id INTEGER,
    match_score REAL,               -- åŒ¹é…åˆ†æ•°
    dispatch_mode TEXT,             -- auto/manual/grab
    status TEXT,                    -- pending/accepted/rejected/timeout
    created_at DATETIME
);

-- æ‰¿è¿å•†åå¥½è¡¨
CREATE TABLE carrier_preferences (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    carrier_id INTEGER UNIQUE,
    preferred_areas TEXT,           -- JSON åå¥½åŒºåŸŸ
    preferred_cargo_types TEXT,     -- JSON åå¥½è´§ç‰©ç±»å‹
    auto_accept_enabled INTEGER DEFAULT 0,
    auto_accept_radius_km REAL DEFAULT 10,
    min_order_amount REAL
);
```

---

#### 1.4 åŠ¨æ€å®šä»·

**æ‰©å±•ç°æœ‰**: `pricing_rules` è¡¨

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | å®æ—¶ä»·æ ¼å±•ç¤º | ä¸‹å•å‰æ˜¾ç¤ºé¢„ä¼°ä»·æ ¼ | P0 |
| ğŸ“± å°ç¨‹åº | ä»·æ ¼è¯´æ˜ | æ˜¾ç¤ºä»·æ ¼æ„æˆæ˜ç»† | P0 |
| ğŸ“± å°ç¨‹åº | é«˜å³°æœŸæç¤º | é«˜å³°æœŸæº¢ä»·æç¤º | P1 |
| ğŸ–¥ï¸ PC å¹³å° | å®šä»·è§„åˆ™ç®¡ç† | åŸºç¡€å®šä»·é…ç½®ï¼ˆèµ·æ­¥ä»·ã€é‡Œç¨‹ä»·ã€æ—¶é•¿ä»·ï¼‰ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | åŠ¨æ€å› å­é…ç½® | å¤©æ°”ã€æ—¶æ®µã€ä¾›éœ€æ¯”è°ƒä»·å› å­ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | åŒºåŸŸå®šä»· | æ ¸å¿ƒåŒºã€åè¿œåŒºå·®å¼‚åŒ–å®šä»· | P0 |
| ğŸ–¥ï¸ PC å¹³å° | ä»·æ ¼ç›‘æ§ | å®æ—¶ç›‘æ§ä»·æ ¼æ°´å¹³ã€å¼‚å¸¸ä»·æ ¼é¢„è­¦ | P1 |
| ğŸšš PC æ‰¿è¿å•† | ä»·æ ¼å€ç‡æŸ¥çœ‹ | æŸ¥çœ‹å½“å‰ä»·æ ¼å€ç‡ã€é«˜å³°å¥–åŠ± | P1 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- åŠ¨æ€è°ƒä»·å› å­è¡¨
CREATE TABLE pricing_factors (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    factor_type TEXT,               -- weather/holiday/rush_hour/supply_demand
    factor_name TEXT,
    factor_value REAL,              -- è°ƒä»·å€ç‡ 1.2x
    condition TEXT,                 -- JSON è§¦å‘æ¡ä»¶
    start_time DATETIME,
    end_time DATETIME,
    is_active INTEGER DEFAULT 1
);

-- ä»·æ ¼å¿«ç…§è¡¨ï¼ˆç”¨äºè¿½æº¯ï¼‰
CREATE TABLE price_snapshots (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    base_price REAL,
    factor_adjustments TEXT,        -- JSON å„å› å­è°ƒæ•´
    final_price REAL,
    snapshot_at DATETIME
);
```

---

### äºŒã€æ”¯ä»˜æ¨¡å—æ‰©å±•ï¼ˆåŸºäºç°æœ‰ wallet æ¨¡å—ï¼‰

#### 2.1 æ··åˆæ”¯ä»˜ ğŸ”¥

**æ‰©å±•ç°æœ‰**: `wallet` è¡¨ã€`/api/wallet/recharge`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | æ”¯ä»˜æ–¹å¼é€‰æ‹© | ç°é‡‘ã€ä¼˜æƒ åˆ¸ã€æ··åˆæ”¯ä»˜é€‰æ‹© | P0 |
| ğŸ“± å°ç¨‹åº | æ··åˆæ”¯ä»˜é…ç½® | è®¾ç½®ç°é‡‘æ”¯ä»˜æ¯”ä¾‹ã€ç”¨åˆ¸å¼ æ•° | P0 |
| ğŸ“± å°ç¨‹åº | æ”¯ä»˜ç¡®è®¤é¡µ | æ˜¾ç¤ºå„æ”¯ä»˜æ–¹å¼é‡‘é¢æ˜ç»† | P0 |
| ğŸ“± å°ç¨‹åº | é€€æ¬¾ç”³è¯· | ç”³è¯·é€€æ¬¾ã€é€‰æ‹©é€€æ¬¾æ–¹å¼ | P0 |
| ğŸ“± å°ç¨‹åº | é€€æ¬¾è¿›åº¦ | æŸ¥çœ‹é€€æ¬¾è¿›åº¦ã€å†å²è®°å½• | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æ”¯ä»˜é…ç½® | æ··åˆæ”¯ä»˜è§„åˆ™ã€ç°é‡‘æ¯”ä¾‹é™åˆ¶ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | é€€æ¬¾å®¡æ ¸ | é€€æ¬¾ç”³è¯·å®¡æ ¸ã€é©³å› | P0 |
| ğŸ–¥ï¸ PC å¹³å° | é€€æ¬¾å¤„ç† | æ‰§è¡Œé€€æ¬¾ã€åŸè·¯è¿”å›é…ç½® | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æ”¯ä»˜å¯¹è´¦ | æ—¥/å‘¨/æœˆå¯¹è´¦æŠ¥è¡¨ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | èµ„é‡‘æµæ°´ | å®Œæ•´èµ„é‡‘æµæ°´è®°å½• | P0 |
| ğŸšš PC æ‰¿è¿å•† | æ”¶æ¬¾ç®¡ç† | æ‰¿è¿å•†æ”¶æ¬¾è®°å½•æŸ¥è¯¢ | P0 |
| ğŸšš PC æ‰¿è¿å•† | ç»“ç®—å¯¹è´¦ | ä¸å¹³å°ç»“ç®—å¯¹è´¦ | P0 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- æ”¯ä»˜é…ç½®è¡¨
CREATE TABLE payment_configs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key TEXT UNIQUE,
    config_value TEXT,              -- JSON
    description TEXT,
    updated_at DATETIME
);

-- æ”¯ä»˜è®°å½•è¡¨
CREATE TABLE payment_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    user_id INTEGER,
    total_amount REAL,
    cash_amount REAL,               -- ç°é‡‘æ”¯ä»˜é‡‘é¢
    coupon_amount REAL,             -- ä¼˜æƒ åˆ¸æŠµæ‰£é‡‘é¢
    balance_amount REAL,            -- ä½™é¢æ”¯ä»˜é‡‘é¢
    payment_method TEXT,            -- mixed/cash/coupon/balance
    payment_status TEXT DEFAULT 'pending',
    used_coupons TEXT,              -- JSON æ•°ç»„ [{coupon_id, amount}]
    payment_order TEXT,             -- æ”¯ä»˜é¡ºåº coupon_first/cash_first
    paid_at DATETIME,
    created_at DATETIME
);

-- é€€æ¬¾è®°å½•è¡¨
CREATE TABLE refund_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    payment_id INTEGER,
    user_id INTEGER,
    refund_amount REAL,
    refund_cash_amount REAL,        -- é€€è¿˜ç°é‡‘
    refund_coupon_amount REAL,      -- é€€è¿˜ä¼˜æƒ åˆ¸
    refund_reason TEXT,
    refund_type TEXT,               -- full/partial
    status TEXT DEFAULT 'pending',  -- pending/auditing/approved/rejected/processed
    audit_by INTEGER,
    audit_at DATETIME,
    processed_at DATETIME,
    refund_method TEXT,             -- original_path/balance
    created_at DATETIME
);
```

**æ–°å¢ API**:
```
POST   /api/customer/payment/mixed-pay          # å‘èµ·æ··åˆæ”¯ä»˜
GET    /api/customer/payment/calculate          # è®¡ç®—æ”¯ä»˜æ˜ç»†
POST   /api/customer/payment/refund             # ç”³è¯·é€€æ¬¾
GET    /api/customer/payment/refund-status      # é€€æ¬¾è¿›åº¦

GET    /api/admin/payment/config                # æ”¯ä»˜é…ç½®
PUT    /api/admin/payment/config                # æ›´æ–°æ”¯ä»˜é…ç½®
GET    /api/admin/payment/refunds               # é€€æ¬¾ç”³è¯·åˆ—è¡¨
POST   /api/admin/payment/refund-approve        # å®¡æ ¸é€šè¿‡é€€æ¬¾
POST   /api/admin/payment/refund-reject         # é©³å›é€€æ¬¾
POST   /api/admin/payment/process-refund        # æ‰§è¡Œé€€æ¬¾
GET    /api/admin/payment/reconciliation        # å¯¹è´¦æŠ¥è¡¨
GET    /api/admin/payment/transactions          # èµ„é‡‘æµæ°´
```

---

### ä¸‰ã€è¥é”€æ¨¡å—æ‰©å±•ï¼ˆæ–°å¢ï¼‰

#### 3.1 ä¼˜æƒ åˆ¸ç³»ç»Ÿ ğŸ”¥

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | ä¼˜æƒ åˆ¸ä¸­å¿ƒ | é¢†å–ä¼˜æƒ åˆ¸ã€æŸ¥çœ‹å¯ç”¨åˆ¸ | P0 |
| ğŸ“± å°ç¨‹åº | æˆ‘çš„ä¼˜æƒ åˆ¸ | å·²é¢†å–ä¼˜æƒ åˆ¸ï¼ˆæœªä½¿ç”¨/å·²ä½¿ç”¨/è¿‡æœŸï¼‰ | P0 |
| ğŸ“± å°ç¨‹åº | å……å€¼æ´»åŠ¨ | å……å€¼èµ åˆ¸æ´»åŠ¨å±•ç¤º | P0 |
| ğŸ“± å°ç¨‹åº | é‚€è¯·æœ‰ç¤¼ | é‚€è¯·å¥½å‹å¾—ä¼˜æƒ åˆ¸ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | ä¼˜æƒ åˆ¸ç®¡ç† | åˆ›å»º/ç¼–è¾‘/ä¸‹æ¶ä¼˜æƒ åˆ¸ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | åˆ¸æ¨¡æ¿ç®¡ç† | ä¼˜æƒ åˆ¸æ¨¡æ¿é…ç½®ï¼ˆæ»¡å‡ã€æŠ˜æ‰£ã€æ— é—¨æ§›ï¼‰ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æ´»åŠ¨ç®¡ç† | è¥é”€æ´»åŠ¨åˆ›å»ºã€æ’æœŸ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | å……å€¼é…ç½® | å……å€¼èµ åˆ¸è§„åˆ™é…ç½® | P0 |
| ğŸ–¥ï¸ PC å¹³å° | å‘æ”¾è®°å½• | ä¼˜æƒ åˆ¸å‘æ”¾è®°å½•ã€æ ¸é”€ç»Ÿè®¡ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | æ•ˆæœåˆ†æ | æ´»åŠ¨ ROIã€è½¬åŒ–ç‡åˆ†æ | P1 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- ä¼˜æƒ åˆ¸æ¨¡æ¿è¡¨
CREATE TABLE coupon_templates (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    type TEXT,                        -- discount/cash/no_threshold
    value REAL,                       -- ä¼˜æƒ é‡‘é¢/æŠ˜æ‰£ç‡
    min_order_amount REAL,            -- æœ€ä½è®¢å•é‡‘é¢
    max_discount REAL,                -- æœ€å¤§ä¼˜æƒ ï¼ˆæŠ˜æ‰£å‹ï¼‰
    valid_type TEXT,                  -- fixed/days
    valid_start DATETIME,
    valid_end DATETIME,
    valid_days INTEGER,               -- é¢†å–åæœ‰æ•ˆå¤©æ•°
    total_quantity INTEGER,
    issued_quantity INTEGER DEFAULT 0,
    per_user_limit INTEGER DEFAULT 1,
    applicable_scope TEXT,            -- all/specific_carriers/specific_areas
    status TEXT DEFAULT 'active',
    created_at DATETIME
);

-- ç”¨æˆ·ä¼˜æƒ åˆ¸è¡¨
CREATE TABLE user_coupons (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    template_id INTEGER,
    coupon_code TEXT UNIQUE,
    status TEXT DEFAULT 'unused',     -- unused/used/expired/locked
    obtained_at DATETIME,
    used_at DATETIME,
    expired_at DATETIME,
    order_id INTEGER
);

-- å……å€¼æ´»åŠ¨é…ç½®è¡¨
CREATE TABLE recharge_promotions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    recharge_amount REAL,             -- å……å€¼é‡‘é¢
    bonus_amount REAL,                -- èµ é€é‡‘é¢
    bonus_coupon_template_id INTEGER, -- èµ é€ä¼˜æƒ åˆ¸æ¨¡æ¿ ID
    start_time DATETIME,
    end_time DATETIME,
    is_enabled INTEGER DEFAULT 1
);

-- é‚€è¯·å…³ç³»è¡¨
CREATE TABLE invite_relations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    inviter_id INTEGER,
    invitee_id INTEGER,
    invite_code TEXT,
    reward_status TEXT DEFAULT 'pending',
    reward_amount REAL,
    created_at DATETIME
);
```

---

### å››ã€å®¢æœæ¨¡å—æ‰©å±•ï¼ˆæ–°å¢ï¼‰

#### 4.1 åœ¨çº¿å®¢æœä¸å·¥å•ç³»ç»Ÿ ğŸ”¥

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | åœ¨çº¿å®¢æœ | å³æ—¶èŠå¤©ç•Œé¢ï¼Œæ”¯æŒæ–‡å­—ã€å›¾ç‰‡ | P0 |
| ğŸ“± å°ç¨‹åº | å®¢æœåˆ—è¡¨ | æ˜¾ç¤ºå¯ç”¨å®¢æœã€å·¥ä½œæ—¶é—´ | P0 |
| ğŸ“± å°ç¨‹åº | æŠ•è¯‰å»ºè®® | æäº¤æŠ•è¯‰è¡¨å•ï¼Œä¸Šä¼ å‡­è¯ | P0 |
| ğŸ“± å°ç¨‹åº | å·¥å•æŸ¥è¯¢ | æŸ¥çœ‹å·¥å•çŠ¶æ€ã€å†å²è®°å½• | P0 |
| ğŸ“± å°ç¨‹åº | å¸¸è§é—®é¢˜ | FAQ çŸ¥è¯†åº“ï¼Œæ”¯æŒæœç´¢ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | å®¢æœå·¥ä½œå° | æ¥å¾…å®¢æˆ·ã€åˆ†é…ä¼šè¯ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | ä¼šè¯ç®¡ç† | ä¼šè¯åˆ—è¡¨ã€è½¬æ¥ã€ç»“æŸ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | å·¥å•ç®¡ç† | å·¥å•å¤„ç†ã€æµè½¬ã€å›å¤ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æœåŠ¡è´¨é‡ | æ»¡æ„åº¦ç»Ÿè®¡ã€å“åº”æ—¶é•¿ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | çŸ¥è¯†åº“ç®¡ç† | FAQ ç»´æŠ¤ã€åˆ†ç±»ç®¡ç† | P1 |
| ğŸ–¥ï¸ PC å¹³å° | æŠ•è¯‰å¤„ç† | æŠ•è¯‰å¤„ç†æµç¨‹ã€å‡çº§æœºåˆ¶ | P0 |
| ğŸšš PC æ‰¿è¿å•† | å®¢æœæ¥å…¥ | æ‰¿è¿å•†å®¢æœæ¥å…¥å®¢æˆ· | P1 |
| ğŸšš PC æ‰¿è¿å•† | å¼‚å¸¸ä¸ŠæŠ¥ | é…é€å¼‚å¸¸ä¸ŠæŠ¥ç»™å¹³å° | P0 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- å®¢æœä¼šè¯è¡¨
CREATE TABLE customer_service_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_no TEXT UNIQUE,
    customer_id INTEGER,
    agent_id INTEGER,
    status TEXT DEFAULT 'pending',    -- pending/active/closed/transferred
    source TEXT,                      -- chat/phone/complaint
    created_at DATETIME,
    closed_at DATETIME,
    rating INTEGER,                   -- æ»¡æ„åº¦è¯„åˆ† 1-5
    rating_comment TEXT
);

-- èŠå¤©æ¶ˆæ¯è¡¨
CREATE TABLE service_messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id INTEGER,
    sender_id INTEGER,
    sender_type TEXT,                 -- customer/agent/system
    message_type TEXT,                -- text/image/file
    content TEXT,
    is_read INTEGER DEFAULT 0,
    created_at DATETIME
);

-- å·¥å•è¡¨
CREATE TABLE service_tickets (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    ticket_no TEXT UNIQUE,
    customer_id INTEGER,
    type TEXT,                        -- complaint/suggestion/consult
    title TEXT,
    content TEXT,
    images TEXT,                      -- JSON æ•°ç»„
    status TEXT DEFAULT 'open',       -- open/processing/resolved/closed
    priority TEXT DEFAULT 'normal',   -- low/normal/high/urgent
    assigned_to INTEGER,
    created_at DATETIME,
    resolved_at DATETIME
);

-- FAQ çŸ¥è¯†åº“è¡¨
CREATE TABLE service_knowledge_base (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_id INTEGER,
    question TEXT,
    answer TEXT,
    keywords TEXT,                    -- JSON æ•°ç»„
    view_count INTEGER DEFAULT 0,
    is_enabled INTEGER DEFAULT 1,
    created_at DATETIME,
    updated_at DATETIME
);
```

---

### äº”ã€è¯„ä»·ä¿¡ç”¨æ‰©å±•ï¼ˆåŸºäºç°æœ‰è¿è§„ç®¡ç†ï¼‰

#### 5.1 åŒå‘è¯„ä»·ä¸ä¿¡ç”¨åˆ† ğŸ”¥

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | è®¢å•è¯„ä»· | å®Œæˆè®¢å•åè¯„ä»·æ‰¿è¿å•† | P0 |
| ğŸ“± å°ç¨‹åº | æœåŠ¡æ ‡ç­¾ | é€‰æ‹©æœåŠ¡æ ‡ç­¾ï¼ˆå‡†æ—¶ã€æ€åº¦å¥½ç­‰ï¼‰ | P0 |
| ğŸ“± å°ç¨‹åº | ä¿¡ç”¨åˆ†æŸ¥çœ‹ | æŸ¥çœ‹ä¸ªäººä¿¡ç”¨åˆ† | P1 |
| ğŸ–¥ï¸ PC å¹³å° | è¯„ä»·ç®¡ç† | æŸ¥çœ‹æ‰€æœ‰è¯„ä»·ã€å¤„ç†å·®è¯„ç”³è¯‰ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | ä¿¡ç”¨åˆ†è®¡ç®— | è‡ªåŠ¨è®¡ç®—ç”¨æˆ·/æ‰¿è¿å•†ä¿¡ç”¨åˆ† | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è¯„åˆ†ç»Ÿè®¡ | æ‰¿è¿å•†è¯„åˆ†æ’åã€ç»Ÿè®¡ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | ä¿¡ç”¨è§„åˆ™é…ç½® | é…ç½®ä¿¡ç”¨åˆ†è®¡ç®—è§„åˆ™ | P0 |
| ğŸšš PC æ‰¿è¿å•† | æœåŠ¡åˆ†æŸ¥çœ‹ | æŸ¥çœ‹æœåŠ¡åˆ†ã€ä¹˜å®¢è¯„ä»· | P0 |
| ğŸšš PC æ‰¿è¿å•† | ä¿¡ç”¨æå‡ | æŸ¥çœ‹ä¿¡ç”¨æå‡ä»»åŠ¡ | P1 |
| ğŸšš PC æ‰¿è¿å•† | ç”³è¯‰å¤„ç† | å·®è¯„ç”³è¯‰ | P1 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- è®¢å•è¯„ä»·è¡¨
CREATE TABLE order_reviews (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    reviewer_id INTEGER,
    reviewee_id INTEGER,
    reviewer_type TEXT,             -- customer/carrier
    rating INTEGER,                 -- 1-5 æ˜Ÿ
    tags TEXT,                      -- JSON æ ‡ç­¾
    comment TEXT,
    is_anonymous INTEGER DEFAULT 0,
    reply TEXT,                     -- å›å¤
    created_at DATETIME
);

-- ç”¨æˆ·ä¿¡ç”¨åˆ†è¡¨
CREATE TABLE user_credit_scores (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    user_type TEXT,                 -- customer/carrier
    credit_score INTEGER DEFAULT 100,
    completion_rate REAL,           -- å±¥çº¦ç‡
    avg_rating REAL,                -- å¹³å‡è¯„åˆ†
    violation_count INTEGER,        -- è¿è§„æ¬¡æ•°
    last_updated DATETIME
);
```

---

### å…­ã€æ•°æ®ç»Ÿè®¡æ‰©å±•ï¼ˆåŸºäºç°æœ‰ reportsï¼‰

#### 6.1 è¿è¥æ•°æ®ä¸è´¢åŠ¡æŠ¥è¡¨ ğŸ”¥

**æ‰©å±•ç°æœ‰**: `/api/admin/reports/overview-stats`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | ä¸ªäººè®¢å•ç»Ÿè®¡ | æŸ¥çœ‹ä¸ªäººè®¢å•æ•°é‡ã€æ¶ˆè´¹åˆ†æ | P1 |
| ğŸ“± å°ç¨‹åº | æœˆåº¦è´¦å• | æœˆåº¦æ¶ˆè´¹æ±‡æ€» | P1 |
| ğŸ–¥ï¸ PC å¹³å° | è¿è¥æ•°æ®å¤§å± | å®æ—¶è®¢å•ã€æ”¶å…¥ã€è¿åŠ›å±•ç¤º | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è®¢å•åˆ†æ | è®¢å•è¶‹åŠ¿ã€å®Œæˆç‡ã€å–æ¶ˆç‡ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | æ”¶å…¥åˆ†æ | æ”¶å…¥è¶‹åŠ¿ã€å®¢å•ä»·ã€ARPU | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è¿åŠ›åˆ†æ | æ´»è·ƒè½¦è¾†ã€åœ¨çº¿æ—¶é•¿ã€æ¥å•ç‡ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | ç”¨æˆ·åˆ†æ | æ–°å¢ç”¨æˆ·ã€ç•™å­˜ç‡ã€æ´»è·ƒç”¨æˆ· | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è½¬åŒ–æ¼æ–— | ä¸‹å•è½¬åŒ–ç‡ã€æ”¯ä»˜è½¬åŒ–ç‡ | P1 |
| ğŸ–¥ï¸ PC å¹³å° | è´¢åŠ¡æŠ¥è¡¨ | å¯¹è´¦æŠ¥è¡¨ã€æµæ°´å¯¼å‡º | P0 |
| ğŸšš PC æ‰¿è¿å•† | æ”¶å…¥ç»Ÿè®¡ | æ”¶å…¥è¶‹åŠ¿ã€è®¢å•æ”¶å…¥æ˜ç»† | P0 |
| ğŸšš PC æ‰¿è¿å•† | æœåŠ¡åˆ†è¶‹åŠ¿ | æœåŠ¡åˆ†å˜åŒ–è¶‹åŠ¿ | P1 |
| ğŸšš PC æ‰¿è¿å•† | åœ¨çº¿æ—¶é•¿ | åœ¨çº¿æ—¶é•¿ç»Ÿè®¡ | P1 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- è¿è¥ç»Ÿè®¡è¡¨ï¼ˆæŒ‰æ—¥èšåˆï¼‰
CREATE TABLE daily_statistics (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    stat_date DATE,
    total_orders INTEGER,
    completed_orders INTEGER,
    cancelled_orders INTEGER,
    total_revenue REAL,
    active_users INTEGER,
    active_vehicles INTEGER,
    avg_delivery_time REAL,
    created_at DATETIME
);

-- ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡è¡¨
CREATE TABLE user_behavior_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    stat_date DATE,
    order_count INTEGER,
    total_amount REAL,
    cancel_count INTEGER,
    created_at DATETIME
);
```

---

### ä¸ƒã€è½¦è¾†/è¿åŠ›æ‰©å±•ï¼ˆåŸºäºç°æœ‰ vehicle æ¨¡å—ï¼‰

#### 7.1 è½¦è¾†çŠ¶æ€ä¸å®æ—¶è¿½è¸ª

**æ‰©å±•ç°æœ‰**: `vehicle_tracking` è¡¨ã€`/api/vehicle-tracking/*`

| ç«¯å£ | åŠŸèƒ½ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸ“± å°ç¨‹åº | å®æ—¶è½¦è¾†ä½ç½® | åœ°å›¾ä¸Šæ˜¾ç¤ºé™„è¿‘è½¦è¾† | P0 |
| ğŸ“± å°ç¨‹åº | é…é€è½¨è¿¹å›æ”¾ | æŸ¥çœ‹å†å²é…é€è½¨è¿¹ | P1 |
| ğŸ“± å°ç¨‹åº | é¢„è®¡åˆ°è¾¾æ—¶é—´ | ETA è®¡ç®—ä¸å±•ç¤º | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è½¦è¾†å®æ—¶ç›‘æ§ | åœ°å›¾ä¸Šæ˜¾ç¤ºæ‰€æœ‰è½¦è¾†ä½ç½® | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è½¨è¿¹å›æ”¾ | æŸ¥è¯¢è½¦è¾†å†å²è½¨è¿¹ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è½¦è¾†çŠ¶æ€ç®¡ç† | ç©ºé—²/æœåŠ¡ä¸­/å……ç”µä¸­/ç»´ä¿®ä¸­ | P0 |
| ğŸ–¥ï¸ PC å¹³å° | è¿åŠ›çƒ­åŠ›å›¾ | ä¾›éœ€çƒ­åŠ›å›¾å¯è§†åŒ– | P1 |
| ğŸšš PC æ‰¿è¿å•† | ä½ç½®ä¸ŠæŠ¥ | å®šæ—¶ä¸ŠæŠ¥è½¦è¾†ä½ç½® | P0 |
| ğŸšš PC æ‰¿è¿å•† | çŠ¶æ€ä¸ŠæŠ¥ | æ›´æ–°è½¦è¾†çŠ¶æ€ | P0 |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- è½¦è¾†çŠ¶æ€è¡¨
CREATE TABLE vehicle_status (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    vehicle_id INTEGER UNIQUE,
    status TEXT,                    -- idle/serving/charging/maintenance/offline
    battery_level REAL,             -- ç”µé‡ç™¾åˆ†æ¯”
    current_lat REAL,
    current_lng REAL,
    last_update DATETIME
);

-- è½¦è¾†ä½ç½®å†å²è¡¨ï¼ˆåˆ†è¡¨å­˜å‚¨ï¼‰
CREATE TABLE vehicle_positions_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    vehicle_id INTEGER,
    latitude REAL,
    longitude REAL,
    speed REAL,
    direction REAL,
    accuracy REAL,
    timestamp DATETIME
);
```

---

## ğŸ“Š å¼€å‘ä¼˜å…ˆçº§ä¸æ’æœŸ

### ç¬¬ä¸€é˜¶æ®µï¼ˆ2 å‘¨ï¼‰- æ ¸å¿ƒä¸šåŠ¡æ‰©å±•

| æ¨¡å— | åŠŸèƒ½ | å·¥ä½œé‡ (äººå¤©) |
|------|------|---------------|
| è®¢å•æ‰©å±• | ä¸€å•å¤šç‚¹å¸è´§ | 5 |
| æ”¯ä»˜æ‰©å±• | æ··åˆæ”¯ä»˜ã€é€€æ¬¾æµç¨‹ | 4 |
| è½¦è¾†æ‰©å±• | è½¦è¾†çŠ¶æ€ã€å®æ—¶è¿½è¸ª | 3 |
| **å°è®¡** | | **12 äººå¤©** |

### ç¬¬äºŒé˜¶æ®µï¼ˆ2 å‘¨ï¼‰- è¥é”€ä¸å®¢æœ

| æ¨¡å— | åŠŸèƒ½ | å·¥ä½œé‡ (äººå¤©) |
|------|------|---------------|
| è¥é”€æ¨¡å— | ä¼˜æƒ åˆ¸ç³»ç»Ÿã€å……å€¼æ´»åŠ¨ | 5 |
| å®¢æœæ¨¡å— | åœ¨çº¿å®¢æœã€å·¥å•ç³»ç»Ÿ | 4 |
| è¯„ä»·ä¿¡ç”¨ | åŒå‘è¯„ä»·ã€ä¿¡ç”¨åˆ† | 3 |
| **å°è®¡** | | **12 äººå¤©** |

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ2 å‘¨ï¼‰- è¿è¥ä¸ä¼˜åŒ–

| æ¨¡å— | åŠŸèƒ½ | å·¥ä½œé‡ (äººå¤©) |
|------|------|---------------|
| æ•°æ®ç»Ÿè®¡ | è¿è¥å¤§å±ã€è´¢åŠ¡æŠ¥è¡¨ | 4 |
| è®¢å•æ‰©å±• | æ™ºèƒ½åŒ¹é…ã€åŠ¨æ€å®šä»· | 4 |
| ä¼˜åŒ–è¿­ä»£ | æ€§èƒ½ä¼˜åŒ–ã€Bug ä¿®å¤ | 2 |
| **å°è®¡** | | **10 äººå¤©** |

### æ€»è®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»å‘¨æœŸ | 6 å‘¨ |
| æ€»å·¥ä½œé‡ | 34 äººå¤© |
| æ–°å¢æ•°æ®åº“è¡¨ | ~18 å¼  |
| æ–°å¢ API æ¥å£ | ~50 ä¸ª |
| æ–°å¢å‰ç«¯é¡µé¢ | ~40 ä¸ª |

---

## ğŸ—„ï¸ æ•°æ®åº“è¡¨æ±‡æ€»ï¼ˆ1.0.1 æ–°å¢ï¼‰

| æ¨¡å— | æ–°å¢è¡¨ |
|------|--------|
| è®¢å•æ‰©å±• | `multipoint_orders`ã€`delivery_points` |
| æ”¯ä»˜æ‰©å±• | `payment_configs`ã€`payment_records`ã€`refund_records` |
| è¥é”€æ¨¡å— | `coupon_templates`ã€`user_coupons`ã€`recharge_promotions`ã€`invite_relations` |
| å®¢æœæ¨¡å— | `customer_service_sessions`ã€`service_messages`ã€`service_tickets`ã€`service_knowledge_base` |
| è¯„ä»·ä¿¡ç”¨ | `order_reviews`ã€`user_credit_scores` |
| æ•°æ®ç»Ÿè®¡ | `daily_statistics`ã€`user_behavior_stats` |
| è½¦è¾†æ‰©å±• | `vehicle_status`ã€`vehicle_positions_history` |
| æ™ºèƒ½åŒ¹é… | `dispatch_records`ã€`carrier_preferences` |
| åŠ¨æ€å®šä»· | `pricing_factors`ã€`price_snapshots` |

---

## ğŸ“¦ åç«¯ API æ–‡ä»¶ç»“æ„

```
backend/api/handlers/
â”‚
â”œâ”€â”€ ğŸ“‚ customer/order/
â”‚   â”œâ”€â”€ createMultipointOrder.js      # åˆ›å»ºå¤šç‚¹è®¢å•
â”‚   â”œâ”€â”€ getMultipointOrder.js         # å¤šç‚¹è®¢å•è¯¦æƒ…
â”‚   â”œâ”€â”€ updateMultipointOrder.js      # æ›´æ–°å¤šç‚¹è®¢å•
â”‚   â”œâ”€â”€ addDeliveryPoint.js           # æ·»åŠ å¸è´§ç‚¹
â”‚   â”œâ”€â”€ deleteDeliveryPoint.js        # åˆ é™¤å¸è´§ç‚¹
â”‚   â””â”€â”€ reorderPoints.js              # è°ƒæ•´å¸è´§ç‚¹é¡ºåº
â”‚
â”œâ”€â”€ ğŸ“‚ customer/payment/
â”‚   â”œâ”€â”€ mixedPay.js                   # æ··åˆæ”¯ä»˜
â”‚   â”œâ”€â”€ calculatePayment.js           # è®¡ç®—æ”¯ä»˜æ˜ç»†
â”‚   â”œâ”€â”€ applyRefund.js                # ç”³è¯·é€€æ¬¾
â”‚   â””â”€â”€ getRefundStatus.js            # é€€æ¬¾è¿›åº¦
â”‚
â”œâ”€â”€ ğŸ“‚ customer/marketing/
â”‚   â”œâ”€â”€ getAvailableCoupons.js        # å¯ç”¨ä¼˜æƒ åˆ¸
â”‚   â”œâ”€â”€ getMyCoupons.js               # æˆ‘çš„ä¼˜æƒ åˆ¸
â”‚   â”œâ”€â”€ receiveCoupon.js              # é¢†å–ä¼˜æƒ åˆ¸
â”‚   â””â”€â”€ getInviteCode.js              # è·å–é‚€è¯·ç 
â”‚
â”œâ”€â”€ ğŸ“‚ customer/service/
â”‚   â”œâ”€â”€ startChat.js                  # å‘èµ·èŠå¤©
â”‚   â”œâ”€â”€ sendMessage.js                # å‘é€æ¶ˆæ¯
â”‚   â”œâ”€â”€ getChatHistory.js             # èŠå¤©è®°å½•
â”‚   â”œâ”€â”€ createTicket.js               # åˆ›å»ºå·¥å•
â”‚   â””â”€â”€ getTicketList.js              # å·¥å•åˆ—è¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ admin/order/
â”‚   â”œâ”€â”€ listMultipointOrders.js       # å¤šç‚¹è®¢å•åˆ—è¡¨
â”‚   â”œâ”€â”€ optimizeRoute.js              # è·¯å¾„ä¼˜åŒ–
â”‚   â””â”€â”€ handleException.js            # å¤„ç†å¼‚å¸¸
â”‚
â”œâ”€â”€ ğŸ“‚ admin/payment/
â”‚   â”œâ”€â”€ getConfig.js                  # æ”¯ä»˜é…ç½®
â”‚   â”œâ”€â”€ updateConfig.js               # æ›´æ–°æ”¯ä»˜é…ç½®
â”‚   â”œâ”€â”€ getRefundList.js              # é€€æ¬¾ç”³è¯·åˆ—è¡¨
â”‚   â”œâ”€â”€ approveRefund.js              # å®¡æ ¸é€€æ¬¾
â”‚   â”œâ”€â”€ processRefund.js              # æ‰§è¡Œé€€æ¬¾
â”‚   â””â”€â”€ getReconciliation.js          # å¯¹è´¦æŠ¥è¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ admin/marketing/
â”‚   â”œâ”€â”€ listCoupons.js                # ä¼˜æƒ åˆ¸åˆ—è¡¨
â”‚   â”œâ”€â”€ createCoupon.js               # åˆ›å»ºä¼˜æƒ åˆ¸
â”‚   â”œâ”€â”€ listTemplates.js              # åˆ¸æ¨¡æ¿åˆ—è¡¨
â”‚   â”œâ”€â”€ createTemplate.js             # åˆ›å»ºåˆ¸æ¨¡æ¿
â”‚   â””â”€â”€ getRechargeConfig.js          # å……å€¼é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ admin/service/
â”‚   â”œâ”€â”€ getSessionList.js             # ä¼šè¯åˆ—è¡¨
â”‚   â”œâ”€â”€ assignSession.js              # åˆ†é…ä¼šè¯
â”‚   â”œâ”€â”€ getTicketList.js              # å·¥å•åˆ—è¡¨
â”‚   â”œâ”€â”€ replyTicket.js                # å·¥å•å›å¤
â”‚   â””â”€â”€ getQualityStats.js            # æœåŠ¡è´¨é‡ç»Ÿè®¡
â”‚
â”œâ”€â”€ ğŸ“‚ admin/reports/
â”‚   â”œâ”€â”€ getDashboard.js               # è¿è¥å¤§å±
â”‚   â”œâ”€â”€ getOrderAnalysis.js           # è®¢å•åˆ†æ
â”‚   â”œâ”€â”€ getRevenueAnalysis.js         # æ”¶å…¥åˆ†æ
â”‚   â””â”€â”€ getFinancialReport.js         # è´¢åŠ¡æŠ¥è¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ carrier/order/
â”‚   â”œâ”€â”€ claimMultipointOrder.js       # æŠ¢å¤šç‚¹è®¢å•
â”‚   â”œâ”€â”€ checkinPoint.js               # å¸è´§ç‚¹ç­¾æ”¶
â”‚   â””â”€â”€ reportPointException.js       # ä¸ŠæŠ¥å¼‚å¸¸
â”‚
â””â”€â”€ ğŸ“‚ carrier/payment/
    â”œâ”€â”€ getReceiveRecords.js          # æ”¶æ¬¾è®°å½•
    â””â”€â”€ getSettlement.js              # ç»“ç®—å¯¹è´¦
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] ä¸€å•å¤šç‚¹æ”¯æŒè‡³å°‘ 5 ä¸ªå¸è´§ç‚¹ï¼Œè·¯å¾„è‡ªåŠ¨ä¼˜åŒ–
- [ ] æ··åˆæ”¯ä»˜æ”¯æŒç°é‡‘ + ä¼˜æƒ åˆ¸ç»„åˆï¼Œæ”¯ä»˜æ¯”ä¾‹å¯é…ç½®
- [ ] é€€æ¬¾æµç¨‹æ”¯æŒåŸè·¯è¿”å›ï¼Œä¼˜æƒ åˆ¸å¯é€€å›
- [ ] ä¼˜æƒ åˆ¸ç³»ç»Ÿæ”¯æŒåˆ›å»ºã€å‘æ”¾ã€æ ¸é”€å…¨æµç¨‹
- [ ] åœ¨çº¿å®¢æœæ”¯æŒå®æ—¶èŠå¤©ã€å·¥å•æµè½¬
- [ ] åŒå‘è¯„ä»·æ”¯æŒå®¢æˆ·è¯„æ‰¿è¿å•†ã€æ‰¿è¿å•†è¯„å®¢æˆ·
- [ ] è¿è¥å¤§å±å®æ—¶å±•ç¤ºè®¢å•ã€æ”¶å…¥ã€è¿åŠ›æ•°æ®

### æ€§èƒ½éªŒæ”¶

- [ ] æ”¯ä»˜è®¡ç®—å“åº”æ—¶é—´ < 500ms
- [ ] å¤šç‚¹è·¯å¾„è§„åˆ’å“åº”æ—¶é—´ < 2s
- [ ] è½¦è¾†ä½ç½®æ›´æ–°å»¶è¿Ÿ < 5s
- [ ] å®¢æœæ¶ˆæ¯æ¨é€å»¶è¿Ÿ < 1s

### å®‰å…¨éªŒæ”¶

- [ ] æ”¯ä»˜æ¥å£é˜²é‡æ”¾æ”»å‡»
- [ ] ä¼˜æƒ åˆ¸é˜²åˆ·æœºåˆ¶ï¼ˆæ¯äººé™é¢†ã€IP é™åˆ¶ï¼‰
- [ ] é€€æ¬¾å®¡æ ¸æƒé™æ§åˆ¶
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 1.0.1 | 2026-02-21 | åˆå§‹ç‰ˆæœ¬ï¼Œè§„åˆ’ 1.0.1 åŠŸèƒ½æ‰©å±• | - |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.1  
**æœ€åæ›´æ–°**: 2026-02-21  
**çŠ¶æ€**: å¾…è¯„å®¡
