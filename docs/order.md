å¥½çš„ï¼ä»¥ä¸‹æ˜¯å°† **å‰ç«¯äº¤äº’ä¸åŠŸèƒ½å¼€å‘æ–‡æ¡£** ä¸ **å‰åç«¯æ¥å£å¯¹é½æ¸…å•** åˆå¹¶åçš„ **å®Œæ•´ç‰ˆå¼€å‘æ–‡æ¡£ï¼ˆV1.1ï¼‰**ï¼Œä¾¿äºæ‚¨ç»Ÿä¸€ç•™å­˜ã€åˆ†å‘ç»™å‰ç«¯ã€åç«¯åŠäº§å“å›¢é˜Ÿã€‚

---

# ğŸšš æ— äººè´§è¿å¹³å°è®¢å•ç³»ç»Ÿå¼€å‘æ–‡æ¡£  
**ç‰ˆæœ¬ï¼š1.1ï¼ˆå«å‰åç«¯æ¥å£è§„èŒƒï¼‰**  
**æœ€åæ›´æ–°ï¼š2026å¹´2æœˆ22æ—¥**

---

## ä¸€ã€ä¸šåŠ¡ç›®æ ‡

1. **ä¸æ‹’ç»ä»»ä½•å®¢æˆ·**ï¼šæ”¯æŒä»»æ„åœ°å€ä¸‹å•ï¼ˆæœ‰äººè½¦å…œåº•ï¼‰ã€‚  
2. **æ¨åŠ¨æ— äººè½¦è½¬åŒ–**ï¼šè‹¥èµ·ç»ˆç‚¹åœ¨åœé ç‚¹500må†…ï¼Œä¼˜å…ˆæ¨èæ— äººè½¦ï¼ˆä»·æ ¼/æ—¶æ•ˆä¼˜åŠ¿ï¼‰ã€‚  
3. **æ”¯æŒå¤æ‚åœºæ™¯**ï¼š1ä¸ªè£…è´§ç‚¹ + Nä¸ªå¸è´§ç‚¹ï¼Œæ¯ä¸ªå¸è´§ç‚¹æœ‰ç‹¬ç«‹è”ç³»äººã€‚  
4. **æ•°æ®é©±åŠ¨ç½‘ç»œæ‰©å¼ **ï¼šè®°å½•æ— è¦†ç›–åŒºåŸŸçš„è®¢å•ï¼Œç”¨äºè§„åˆ’æ–°åœé ç‚¹ã€‚  
5. **é™ä½ç”¨æˆ·è¾“å…¥å‹åŠ›**ï¼šé€æ­¥å¼•å…¥è¯­éŸ³å¤§æ¨¡å‹è¾…åŠ©è¾“å…¥ï¼ˆå½“å‰ä¸ºè¾…ï¼Œæœªæ¥ä¸ºä¸»ï¼‰ã€‚  
6. **é¡ºåº”ç”¨æˆ·ä¹ æƒ¯**ï¼šé‡‡ç”¨ä¸»æµç«å“çš„ **ä¸¤é¡µå¼ä¸‹å•æµç¨‹**ï¼Œå‡å°‘æ•™è‚²æˆæœ¬ã€‚

---

## äºŒã€æ ¸å¿ƒäº¤äº’æµç¨‹ï¼ˆä¸¤é¡µå¼ï¼‰

### Page 1: `/pages/order/create` â€”â€” è´§ç‰©ä¸è£…è´§ä¿¡æ¯
- ç”¨æˆ·å¡«å†™ï¼š
  - è´§ç‰©ç±»å‹ã€é‡é‡ã€é•¿å®½é«˜ã€å¤‡æ³¨
  - **è£…è´§åœ°å€**ï¼ˆè‡ªç”±è¾“å…¥ + åœ°å›¾é€‰ç‚¹ï¼‰
  - **è£…è´§è”ç³»äºº**ï¼ˆå§“åã€ç”µè¯ï¼‰
- ç³»ç»Ÿè¡Œä¸ºï¼š
  - é™é»˜æ ¡éªŒè£…è´§åœ°å€æ˜¯å¦åœ¨åœé ç‚¹500må†…ï¼ˆè®°å½•çŠ¶æ€ï¼Œä¸é˜»æ–­ï¼‰
  - æ”¯æŒè¯­éŸ³è¾“å…¥ï¼ˆå­—æ®µçº§ + å…¨å±€éº¦å…‹é£ï¼‰

> âœ… æ­¤é¡µ**ä¸æ¶‰åŠå¸è´§ç‚¹**ï¼Œèšç„¦å•ä¸€ä»»åŠ¡ã€‚

---

### Page 2: `/pages/order/confirm` â€”â€” å¸è´§ç‚¹ç®¡ç† + è®¢å•ç¡®è®¤
- æ ¸å¿ƒåŠŸèƒ½ï¼š
  - **åŠ¨æ€æ·»åŠ /ç¼–è¾‘/åˆ é™¤å¤šä¸ªå¸è´§ç‚¹**
  - æ¯ä¸ªå¸è´§ç‚¹åŒ…å«ï¼šåœ°å€ã€è”ç³»äººå§“åã€ç”µè¯
  - æ”¯æŒä» **å¸¸ç”¨åœ°å€** å¿«é€Ÿé€‰æ‹©
  - æ”¯æŒ **è¯­éŸ³è¾“å…¥æ•´æ¡å¸è´§ç‚¹**
- ç³»ç»Ÿè¡Œä¸ºï¼š
  - æ ¡éªŒ **æ‰€æœ‰å¸è´§ç‚¹** æ˜¯å¦åœ¨åœé ç‚¹èŒƒå›´å†…
  - åŠ¨æ€æ¨èè½¦å‹ï¼š
    - å…¨åœ¨ â†’ æ— äººè½¦
    - éƒ¨åˆ†åœ¨ â†’ æ··åˆé…é€
    - å…¨ä¸åœ¨ â†’ ä»…æœ‰äººè½¦
  - æ˜¾ç¤ºé¢„ä¼°ä»·æ ¼ã€æ—¶æ•ˆã€è·¯çº¿å›¾
- ç”¨æˆ·æ“ä½œï¼š
  - [è¿”å›ä¿®æ”¹] / [åˆ›å»ºè®¢å•]

---

## ä¸‰ã€æ–°å¢é¡µé¢

| é¡µé¢ | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| å¸¸ç”¨åœ°å€ç®¡ç† | `/pages/address/list` | æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤å¸¸ç”¨å¸è´§åœ°å€ï¼›æ”¯æŒè®¾ä¸ºé»˜è®¤ |

> ğŸ”— å…¥å£ï¼šå¸è´§ç‚¹ç¼–è¾‘å¼¹çª—ä¸­çš„â€œä»å¸¸ç”¨åœ°å€é€‰æ‹©â€æŒ‰é’®ã€‚

---

## å››ã€å‰ç«¯æ•°æ®æ¨¡å‹ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰

### 1. è®¢å•ä¸´æ—¶æ•°æ®ï¼ˆ`wx.setStorageSync('ORDER_TEMP')`ï¼‰
```js
{
  // è£…è´§ä¿¡æ¯
  pickupAddress: string,
  pickupLat: number,
  pickupLng: number,
  shipperName: string,
  shipperPhone: string,

  // è´§ç‰©ä¿¡æ¯
  cargoType: string,
  weight: number,
  length: number,
  width: number,
  height: number,
  volume: number, // è‡ªåŠ¨è®¡ç®— = length * width * height

  // å¸è´§ç‚¹åˆ—è¡¨ï¼ˆæ ¸å¿ƒï¼‰
  deliveryPoints: Array<{
    address: string,
    lat: number,
    lng: number,
    contactName: string,
    contactPhone: string,
    isFrequent?: boolean
  }>,

  // è¯­éŸ³ï¼ˆå¯é€‰ï¼‰
  voiceTranscript?: string
}
```

### 2. å¸¸ç”¨åœ°å€ï¼ˆ`wx.setStorageSync('FREQUENT_ADDRESSES')`ï¼‰
```js
Array<{
  id: string,           // å”¯ä¸€ID (å»ºè®®ç”¨ Date.now() æˆ– UUID)
  type: 'delivery',     // å½“å‰ä»…æ”¯æŒå¸è´§
  address: string,
  lat: number,
  lng: number,
  contactName: string,
  contactPhone: string,
  createdAt: string     // ISO 8601, e.g. "2026-02-22T10:00:00Z"
}>
```

---

## äº”ã€åç«¯æ¥å£è§„èŒƒï¼ˆéœ€åç«¯å®ç°/ç¡®è®¤ï¼‰

> âš ï¸ **ä»¥ä¸‹ä¸ºå…³é”®å¯¹é½ç‚¹ï¼Œè¯·åç«¯å›¢é˜Ÿç¡®è®¤æˆ–è¡¥å……**

### 1. åˆ›å»ºè®¢å•æ¥å£
- **URL**: `POST /api/customer/orders`
- **è®¤è¯**: éœ€æºå¸¦ Cookie æˆ– Bearer Tokenï¼ˆæ²¿ç”¨ç°æœ‰æœºåˆ¶ï¼‰
- **è¯·æ±‚ä½“ (JSON)**:

```json
{
  "cargo_type": "å®¶å…·å®¶ç”µ",
  "goods_weight_kg": 50,
  "goods_volume_m3": 1.2,
  "length_m": 2.0,
  "width_m": 1.0,
  "height_m": 0.6,

  "pickup_address": "å¸‚å—åŒºè½¯ä»¶å›­Aåº§",
  "pickup_lat": 36.1234,
  "pickup_lng": 120.5678,
  "shipper_name": "å¼ ä¸‰",
  "shipper_phone": "13800138000",

  "delivery_points": [
    {
      "address": "ææ‘ä¸‡è¾¾å¹¿åœº",
      "lat": 36.2345,
      "lng": 120.6789,
      "contact_name": "æå››",
      "contact_phone": "13900139000"
    },
    {
      "address": "å¸‚åŒ—è½¯ä»¶å›­Båº§",
      "lat": 36.3456,
      "lng": 120.7890,
      "contact_name": "ç‹äº”",
      "contact_phone": "15000150000"
    }
  ],

  "vehicle_type": "æ··åˆè½¦å‹",
  "pickup_time": "ASAP" // æˆ– ISO 8601 æ—¶é—´
}
```

- **æˆåŠŸå“åº”**:
  ```json
  { "code": 200, "data": { "order_id": "ORD20260222001" } }
  ```
- **å¤±è´¥å“åº”**:
  ```json
  { "code": 400, "message": "æ”¶è´§åœ°å€ä¸åœ¨æœåŠ¡èŒƒå›´å†…" }
  ```

> âœ… **è¯·åç«¯ç¡®è®¤**ï¼š
> - å­—æ®µå‘½åæ˜¯å¦ä½¿ç”¨ `snake_case`ï¼Ÿ
> - `delivery_points` æ˜¯å¦æ”¯æŒï¼Ÿæœ€å¤§æ•°é‡é™åˆ¶ï¼Ÿ
> - æ˜¯å¦éœ€è¦ä¼  `customer_id`ï¼Ÿ

---

### 2. ï¼ˆå¯é€‰ï¼‰å¸¸ç”¨åœ°å€åŒæ­¥æ¥å£
è‹¥éœ€å¤šç«¯åŒæ­¥ï¼Œå»ºè®®æä¾›ï¼š

- `GET /api/customer/frequent-addresses`  
- `POST /api/customer/frequent-addresses`  

å¦åˆ™å‰ç«¯å¯ä»…ç”¨ **æœ¬åœ°å­˜å‚¨** å®ç°ã€‚

---

### 3. åœé ç‚¹æ•°æ®æ¥å£ï¼ˆå·²æœ‰ï¼‰
- **URL**: `GET /api/customer/approved-stop-points`
- **å“åº”ç¤ºä¾‹**:
  ```json
  {
    "code": 200,
    "data": [
      {
        "id": "SP001",
        "name": "äº”å››å¹¿åœºä¸œä¾§åœé ç‚¹",
        "address": "é’å²›å¸‚å¸‚å—åŒºä¸œæµ·è¥¿è·¯1å·",
        "lat": 36.0678,
        "lng": 120.3210,
        "tags": ["public", "warehouse"]
      }
    ]
  }
  ```

> âœ… æ­¤æ¥å£å‰ç«¯å·²è°ƒç”¨ï¼Œç»“æ„å¯æ²¿ç”¨ã€‚

---

## å…­ã€å‰ç«¯ç»„ä»¶è§„åˆ’ï¼ˆå»ºè®®å°è£…ï¼‰

| ç»„ä»¶ | åŠŸèƒ½ |
|------|------|
| `<address-input-with-voice>` | åœ°å€è¾“å…¥ + åœ°å›¾é€‰ç‚¹ + è¯­éŸ³å›¾æ ‡ + â€œå¸¸ç”¨åœ°å€â€å¿«æ·å…¥å£ |
| `<contact-input-group>` | å§“å + ç”µè¯ è¾“å…¥ç»„ï¼Œå¸¦è¯­éŸ³å…¥å£ |
| `<delivery-point-editor>` | å¸è´§ç‚¹ç¼–è¾‘å¼¹çª—ï¼ˆå«è¡¨å•ã€å¸¸ç”¨åœ°å€é€‰æ‹©ã€ä¿å­˜é€‰é¡¹ï¼‰ |
| `<delivery-point-card>` | å¸è´§ç‚¹å±•ç¤ºå¡ç‰‡ï¼ˆåœ°å€+è”ç³»äºº+æ“ä½œæŒ‰é’®ï¼‰ |

---

## ä¸ƒã€è¯­éŸ³å¤§æ¨¡å‹é›†æˆç‚¹

### è°ƒç”¨æ—¶æœº
- ç‚¹å‡»ä»»æ„ **éº¦å…‹é£å›¾æ ‡** æ—¶è§¦å‘

### è¾“å…¥ç¤ºä¾‹
- â€œå¯„ä¸€å¥—æ²™å‘åˆ°ææ‘ä¸‡è¾¾ï¼Œæå››ï¼Œ139****â€
- â€œå†åŠ ä¸€ä¸ªå¸è´§ç‚¹ï¼šå¸‚åŒ—è½¯ä»¶å›­ï¼Œç‹äº”ï¼Œ150****â€

### è¾“å‡ºç»“æ„ï¼ˆ`parseVoice(text)` æ¥å£ï¼‰
```js
{
  address?: string,
  contactName?: string,
  contactPhone?: string,
  weight?: number,
  cargoType?: string
}
```

> ğŸ”§ å½“å‰å¯ç”¨è§„åˆ™å¼•æ“ï¼ˆæ­£åˆ™ï¼‰å®ç°ï¼Œæœªæ¥æ— ç¼åˆ‡æ¢å¤§æ¨¡å‹APIã€‚

---

## å…«ã€UI/UX è®¾è®¡åŸåˆ™

1. **é¡ºåº”ç«å“**ï¼šä¸¤é¡µæµç¨‹ã€å¡ç‰‡å¼å¸ƒå±€ã€è“ç™½ä¸»è‰²  
2. **æ™ºèƒ½å¼•å¯¼**ï¼š
   - åœ°å€ä¸‹æ–¹å®æ—¶æ˜¾ç¤ºâ€œâœ… é™„è¿‘æœ‰åœé ç‚¹â€æˆ–â€œâš ï¸ æš‚æ— è¦†ç›–â€
   - è½¦å‹æ¨èçªå‡ºä»·æ ¼/æ—¶æ•ˆå·®å¼‚  
3. **è¯­éŸ³è½»é‡åŒ–**ï¼š
   - éº¦å…‹é£å›¾æ ‡å°è€Œæ¸…æ™°ï¼Œä¸å¹²æ‰°ä¸»æµç¨‹
   - è¯†åˆ«ç»“æœå¯æ’¤é”€ã€å¯ç¼–è¾‘  
4. **é”™è¯¯é¢„é˜²**ï¼š
   - å¸è´§ç‚¹ä¸èƒ½ä¸è£…è´§ç‚¹é‡å¤
   - ç”µè¯æ ¼å¼æ ¡éªŒ
   - å¿…å¡«é¡¹é«˜äº®æç¤º  

---

## ä¹ã€å¾…ç¡®è®¤äº‹é¡¹ï¼ˆéœ€è·¨å›¢é˜Ÿå¯¹é½ï¼‰

| é—®é¢˜ | è´Ÿè´£æ–¹ | è¯´æ˜ |
|------|--------|------|
| è®¢å• API æ˜¯å¦æ”¯æŒ `delivery_points` æ•°ç»„ï¼Ÿ | åç«¯ | å…³é”®ï¼å†³å®šèƒ½å¦ä¸Šçº¿å¤šå¸è´§ç‚¹ |
| å­—æ®µå‘½åé£æ ¼ï¼ˆcamelCase vs snake_caseï¼‰ï¼Ÿ | åç«¯ | é¿å…å‰ç«¯äºŒæ¬¡è½¬æ¢ |
| å¸¸ç”¨åœ°å€æ˜¯å¦éœ€äº‘ç«¯åŒæ­¥ï¼Ÿ | äº§å“/åç«¯ | å†³å®šæ˜¯å¦å¼€å‘ API |
| æ— äººè½¦/æ··åˆè½¦å‹çš„ä»·æ ¼å¦‚ä½•è®¡ç®—ï¼Ÿ | äº§å“/åç«¯ | å‰ç«¯éœ€å±•ç¤ºé¢„ä¼°ä»· |

---

## åã€é™„å½•ï¼šå…³é”®ä¸šåŠ¡è§„åˆ™

- **æ— äººè½¦æ¡ä»¶**ï¼šè£…è´§ç‚¹ + æ‰€æœ‰å¸è´§ç‚¹ å‡åœ¨å·²å®¡æ‰¹åœé ç‚¹500må†…  
- **æ··åˆé…é€**ï¼šéƒ¨åˆ†ç‚¹åœ¨èŒƒå›´å†…ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‹†åˆ†è¿è¾“æ®µ  
- **æœ‰äººè½¦å…œåº•**ï¼šä»»ä¸€ç‚¹ä¸åœ¨èŒƒå›´å†…ï¼Œåˆ™æ•´å•ä½¿ç”¨æœ‰äººè½¦  
- **åœé ç‚¹æ•°æ®**ï¼šç”± `approvedStopPoints` æä¾›ï¼Œå«åç§°ã€åæ ‡ã€æ ‡ç­¾  

---

> âœ… æœ¬æ–‡æ¡£æ•´åˆäº† **å‰ç«¯äº¤äº’ã€æ•°æ®æ¨¡å‹ã€åç«¯æ¥å£éœ€æ±‚**ï¼Œå¯ä½œä¸ºå…¨å›¢é˜Ÿå¼€å‘åŸºå‡†ã€‚  
> åç»­å¦‚éœ€ç”Ÿæˆå…·ä½“ä»£ç ï¼ˆWXML/WXSS/JSï¼‰ï¼Œè¯·éšæ—¶å‘ŠçŸ¥ã€‚

---  
**æ–‡æ¡£ç»“æŸ**