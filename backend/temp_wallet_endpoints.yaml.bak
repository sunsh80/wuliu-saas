  /api/wallet/current:
    get:
      tags:
        - wallet
      summary: 获取当前用户钱包信息
      operationId: getCurrentUserWallet
      security:
        - TenantSessionAuth: []
      responses:
        '200':
          description: 钱包信息获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      wallet:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          owner_type:
                            type: string
                            example: customer
                          owner_id:
                            type: string
                            example: tenant_123
                          balance:
                            type: number
                            example: 1000.00
                          frozen_amount:
                            type: number
                            example: 0.00
                          status:
                            type: string
                            example: active
                          currency:
                            type: string
                            example: CNY
                          created_at:
                            type: string
                            format: date-time
                            example: '2026-01-01T00:00:00Z'
                          updated_at:
                            type: string
                            format: date-time
                            example: '2026-01-01T00:00:00Z'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/wallet/{wallet_id}/transactions:
    get:
      tags:
        - wallet
      summary: 获取钱包交易记录
      operationId: getWalletTransactions
      security:
        - TenantSessionAuth: []
      parameters:
        - name: wallet_id
          in: path
          required: true
          schema:
            type: integer
          description: 钱包ID
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
          description: 页码
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
            maximum: 100
          description: 每页数量
        - name: transaction_type
          in: query
          required: false
          schema:
            type: string
          description: 交易类型筛选
        - name: start_date
          in: query
          required: false
          schema:
            type: string
            format: date-time
          description: 开始日期
        - name: end_date
          in: query
          required: false
          schema:
            type: string
            format: date-time
          description: 结束日期
      responses:
        '200':
          description: 交易记录获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactions:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            wallet_id:
                              type: integer
                              example: 1
                            transaction_type:
                              type: string
                              example: payment
                            amount:
                              type: number
                              example: 100.00
                            balance_before:
                              type: number
                              example: 1000.00
                            balance_after:
                              type: number
                              example: 900.00
                            reference_id:
                              type: string
                              example: order_123
                            description:
                              type: string
                              example: 订单支付
                            created_at:
                              type: string
                              format: date-time
                              example: '2026-01-01T00:00:00Z'
                      pagination:
                        type: object
                        properties:
                          current_page:
                            type: integer
                            example: 1
                          total_pages:
                            type: integer
                            example: 5
                          total_items:
                            type: integer
                            example: 100
                          per_page:
                            type: integer
                            example: 20
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'