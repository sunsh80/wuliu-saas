# OpenAPI å¤‡ä»½è®°å½• - å…¨éƒ¨å¤„ç†å™¨æ³¨å†Œå®Œæˆ

## å¤‡ä»½æ—¶é—´
2026 å¹´ 2 æœˆ 19 æ—¥

## å¤‡ä»½æ–‡ä»¶ä½ç½®
`backend/backup/openapi.yaml.20260219-all-handlers-registered`

## OpenAPI ç»Ÿè®¡ä¿¡æ¯

| é¡¹ç›® | æ•°é‡ |
|------|------|
| âœ… æ€»è·¯å¾„æ•° | 81 |
| ğŸ“ Tags æ•°é‡ | 16 |
| ğŸ“¦ Schemas æ•°é‡ | 43 |

## Tags åˆ—è¡¨

### ç®¡ç†å‘˜åŠŸèƒ½
- `setup` - å¹³å°åˆå§‹åŒ–ï¼ˆé¦–æ¬¡å®‰è£…ï¼‰
- `admin-auth` - å¹³å°ç®¡ç†å‘˜ - è®¤è¯ä¸ä¼šè¯
- `admin-user` - å¹³å°ç®¡ç†å‘˜ - ç”¨æˆ·ç®¡ç†
- `admin-tenant` - å¹³å°ç®¡ç†å‘˜ - ç§Ÿæˆ·ç®¡ç†
- `admin-order` - å¹³å°ç®¡ç†å‘˜ - è®¢å•ç®¡ç†

### ç§Ÿæˆ·åŠŸèƒ½
- `customer-order` - å®¢æˆ·ç§Ÿæˆ· - åˆ›å»ºä¸æŸ¥çœ‹è‡ªå·±çš„è®¢å•
- `carrier-order` - æ‰¿è¿æ–¹ç§Ÿæˆ· - è®¤é¢†ã€æ‰§è¡Œè®¢å•

### å…¬å…±åŠŸèƒ½
- `public` - å…¬å…±æ¥å£ï¼ˆå°ç¨‹åºä½¿ç”¨ï¼Œæœªæ¥åºŸå¼ƒï¼‰
- `auth` - ç§Ÿæˆ·è®¤è¯ä¸ä¼šè¯
- `matching` - æ™ºèƒ½åŒ¹é…ï¼ˆæ–°å¢ï¼Œå¯é€‰ä½¿ç”¨ï¼‰

### åœ°å›¾ä¸è¿½è¸ª
- `åœ°å›¾æœåŠ¡` - åœ°å›¾ç›¸å…³åŠŸèƒ½
- `æ— äººè½¦è·¯å¾„è§„åˆ’` - æ— äººè½¦ä¸“ç”¨è·¯å¾„è§„åˆ’åŠŸèƒ½
- `è½¦è¾†è¿½è¸ª` - è½¦è¾†ä½ç½®è¿½è¸ªåŠŸèƒ½

### é’±åŒ…ä¸ç»“ç®—
- `wallet` - é’±åŒ…ä¸èµ„é‡‘ç®¡ç†
- `commission` - æŠ½ä½£ç®¡ç†
- `settlement` - ç»“ç®—ç®¡ç†

## Handler æ³¨å†Œæœºåˆ¶

æ‰€æœ‰å¤„ç†å™¨é€šè¿‡ `backend/middleware/handlerLoader.js` è‡ªåŠ¨æ³¨å†Œï¼š
- æ‰«æ `backend/api/handlers/` ç›®å½•
- è‡ªåŠ¨åŠ è½½æ‰€æœ‰ `.js` æ–‡ä»¶
- ä½¿ç”¨æ–‡ä»¶åä½œä¸º operationId
- æ³¨å†Œåˆ° OpenAPI åç«¯

## Handler ç›®å½•ç»“æ„

```
backend/api/handlers/
â”œâ”€â”€ admin/           # ç®¡ç†å‘˜å¤„ç†å™¨ (15+)
â”œâ”€â”€ carrier/         # æ‰¿è¿å•†å¤„ç†å™¨ (10+)
â”œâ”€â”€ customer/        # å®¢æˆ·å¤„ç†å™¨
â”œâ”€â”€ map/             # åœ°å›¾æœåŠ¡å¤„ç†å™¨ (14)
â”œâ”€â”€ public/          # å…¬å…±å¤„ç†å™¨
â”œâ”€â”€ tenant-web/      # ç§Ÿæˆ· Web å¤„ç†å™¨
â”œâ”€â”€ wallet/          # é’±åŒ…å¤„ç†å™¨ (2)
â”œâ”€â”€ settlement/      # ç»“ç®—å¤„ç†å™¨
â”œâ”€â”€ ...
â””â”€â”€ healthCheck.js   # å¥åº·æ£€æŸ¥
```

## API ç«¯ç‚¹åˆ†ç±»ç»Ÿè®¡

| åˆ†ç±» | ç«¯ç‚¹æ•°é‡ |
|------|---------|
| ç®¡ç†å‘˜ API | ~25 |
| æ‰¿è¿å•† API | ~15 |
| å®¢æˆ· API | ~10 |
| åœ°å›¾ API | 14 |
| é’±åŒ… API | 3 |
| ç§Ÿæˆ· Web API | ~10 |
| å…¶ä»– API | ~4 |

## éªŒè¯çŠ¶æ€

- âœ… YAML è¯­æ³•éªŒè¯é€šè¿‡
- âœ… OpenAPI 3.0 è§„èŒƒéªŒè¯é€šè¿‡
- âœ… æ‰€æœ‰ paths æ­£ç¡®å®šä¹‰
- âœ… æ‰€æœ‰ schemas æ­£ç¡®å®šä¹‰
- âœ… æ‰€æœ‰ tags å·²å£°æ˜
- âœ… å®‰å…¨æ–¹æ¡ˆå·²é…ç½®

## åç«¯å¯åŠ¨éªŒè¯

æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ï¼š
1. åŠ è½½ openapi.yaml
2. æ‰«æ handlers ç›®å½•
3. æ³¨å†Œæ‰€æœ‰å¤„ç†å™¨
4. éªŒè¯ API ç«¯ç‚¹

æ—¥å¿—è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ… æ³¨å†Œ handler: getCurrentUserWallet -> .../wallet/getCurrentUserWallet.js
âœ… æ³¨å†Œ handler: getWalletTransactions -> .../wallet/getWalletTransactions.js
âœ… æ³¨å†Œ handler: carrierCreateStopPoint -> .../carrier/carrierCreateStopPoint.js
...
```

## å¤‡ä»½å†å²

| å¤‡ä»½æ–‡ä»¶ | è¯´æ˜ |
|---------|------|
| `openapi.yaml.20260219-all-handlers-registered` | å…¨éƒ¨å¤„ç†å™¨æ³¨å†Œå®Œæˆï¼ˆå½“å‰ï¼‰ |
| `openapi.yaml.20260219-wallet-integrated` | é’±åŒ…æ¨¡å—é›†æˆ |
| `openapi.yaml.20260219-carrier-stop-points-complete` | æ‰¿è¿å•†åœé ç‚¹ API å®Œæˆ |
| `openapi.yaml.åœ°å›¾ API é›†æˆå®Œæˆå¤‡ä»½` | åœ°å›¾ API é›†æˆå®Œæˆ |

## ä¸‹ä¸€æ­¥

1. å‰ç«¯é¡µé¢å¼€å‘å®Œæˆ
2. API è”è°ƒæµ‹è¯•
3. æ–‡æ¡£å®Œå–„
4. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
