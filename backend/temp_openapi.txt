1:openapi: 3.0.3
2:info:
3:  title: å¤šç§Ÿæˆ·ç‰©æµå¹³å° API
4:  version: 1.0.2-safe
5:  description: |
6:    æ”¯æŒå®¢æˆ·ï¼ˆä¸‹å•æ–¹ï¼‰ä¸æ‰¿è¿æ–¹ï¼ˆæ¥å•æ–¹ï¼‰åŒè§’è‰²çš„ç‰©æµè®¢å•ç³»ç»Ÿã€‚
7:    - `/api/admin/...`ï¼šå¹³å°ç®¡ç†å‘˜
8:    - `/api/customer/...`ï¼šå®¢æˆ·ç§Ÿæˆ·
9:    - `/api/carrier/...`ï¼šæ‰¿è¿æ–¹ç§Ÿæˆ·
10:    - `/api/public/...`ï¼šå…¬å…±æ¥å£
11:    ğŸ”¹ æœ¬æ¬¡å¢å®¹(v1.0.2-safe):
12:    - ä¿ç•™æ‰€æœ‰ v1.0.1 å­—æ®µã€è·¯ç”±ã€çŠ¶æ€ä¸å˜
13:    - æ–°å¢æ‰¿è¿æ–¹èƒ½åŠ›ç”»åƒï¼ˆå¯é€‰ï¼‰
14:    - ç§Ÿæˆ·æœ¬èº«å¯ä»¥åœ¨ä¸€å®šæ¡ä»¶ä¸‹è½¬å˜ä¸ºæ‰¿è¿æ–¹ï¼Œå®¢æˆ·ï¼Œä»“åº“å®ä½“
15:    - æ–°å¢ä½“ç§¯ã€æ—¶æ•ˆç­‰å¯é€‰å­—æ®µ
16:    - æ–°å¢åŒ¹é…ç›¸å…³æ¥å£ï¼ˆä¸æ”¹åŠ¨åŸæœ‰ claim/award æµç¨‹ï¼‰
17:servers:
18:  - url: http://localhost:3000
19:    description: å¼€å‘ç¯å¢ƒ
20:tags:
21:  - name: setup
22:    description: å¹³å°åˆå§‹åŒ–ï¼ˆé¦–æ¬¡å®‰è£…ï¼‰
23:  - name: admin-auth
24:    description: å¹³å°ç®¡ç†å‘˜ - è®¤è¯ä¸ä¼šè¯
25:  - name: admin-user
26:    description: å¹³å°ç®¡ç†å‘˜ - ç”¨æˆ·ç®¡ç†
27:  - name: admin-tenant
28:    description: å¹³å°ç®¡ç†å‘˜ - ç§Ÿæˆ·ç®¡ç†
29:  - name: admin-order
30:    description: å¹³å°ç®¡ç†å‘˜ - è®¢å•ç®¡ç†
31:  - name: customer-order
32:    description: å®¢æˆ·ç§Ÿæˆ· - åˆ›å»ºä¸æŸ¥çœ‹è‡ªå·±çš„è®¢å•
33:  - name: carrier-order
34:    description: æ‰¿è¿æ–¹ç§Ÿæˆ· - è®¤é¢†ã€æ‰§è¡Œè®¢å•
35:  - name: public
36:    description: å…¬å…±æ¥å£ï¼ˆå°ç¨‹åºä½¿ç”¨ï¼Œæœªæ¥åºŸå¼ƒï¼‰
37:  - name: auth
38:    description: ç§Ÿæˆ·è®¤è¯ä¸ä¼šè¯
39:  - name: matching
40:    description: æ™ºèƒ½åŒ¹é…ï¼ˆæ–°å¢ï¼Œå¯é€‰ä½¿ç”¨ï¼‰
41:components:
42:  securitySchemes:
43:    AdminSessionAuth:
44:      type: apiKey
45:      in: cookie
46:      name: connect.sid
47:      description: å¹³å°ç®¡ç†å‘˜ç™»å½•åè‡ªåŠ¨æºå¸¦ï¼ˆç”± Express Session ç®¡ç†ï¼‰
48:    TenantSessionAuth:
49:      type: apiKey
50:      in: cookie
51:      name: connect.sid
52:      description: ç§Ÿæˆ·ç™»å½•åè‡ªåŠ¨æºå¸¦ï¼ˆç”± Express Session ç®¡ç†ï¼‰
53:  schemas:
54:    # ä¸º Web ç«¯å®¢æˆ·æ³¨å†Œä¸“ç”¨ ---
55:    CustomerWebRegistration:
56:      type: object
57:      required:
58:        - contact_phone
59:        - password
60:        - roles
61:      properties:
62:        contact_phone:
63:          type: string
64:          pattern: '^1[3-9][0-9]{9}$' # ä¸­å›½æ‰‹æœºå·æ ¼å¼
65:          example: "13800138000"
66:        password:
67:          type: string
68:          minLength: 6
69:          example: "password123"
70:        roles:
71:          type: array
72:          items:
73:            type: string
74:            enum: [customer]
75:          example: ["customer"]
76:    # --- é€šç”¨éªŒè¯æ¨¡å¼ ---
77:    Username:
78:      type: string
79:      pattern: '^[a-zA-Z0-9_-]{3,20}$' # ç”¨æˆ·åæ ¼å¼ï¼šå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦ï¼Œé•¿åº¦3-20
80:      example: "user_name_123"
81:
82:    Name:
83:      type: string
84:      pattern: '^[\\u4e00-\\u9fa5a-zA-Z0-9_-]{1,50}$' # åç§°æ ¼å¼ï¼šæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦ï¼Œé•¿åº¦1-50
85:      example: "å¼ ä¸‰"
86:
87:    Address:
88:      type: string
89:      pattern: '^[\\u4e00-\\u9fa5a-zA-Z0-9\\s\\S]{1,200}$' # åœ°å€æ ¼å¼ï¼šæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼åŠä»»æ„å­—ç¬¦ï¼Œé•¿åº¦1-200
90:      example: "åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè¡—é“123å·"
91:
92:    # --- ç§Ÿæˆ·ç›¸å…³ ---
93:    TenantApplication:
94:      type: object
95:      required:
96:        - name
97:        - contact_person
98:        - contact_phone
99:        - email
100:        - password
101:        - roles
102:      properties:
103:        name:
104:          $ref: '#/components/schemas/Name'
105:        contact_person:
106:          $ref: '#/components/schemas/Name'
107:        contact_phone:
108:          type: string
109:          pattern: '^1[3-9][0-9]{9}$'
110:        email:
111:          type: string
112:          format: email
113:        password:
114:          type: string
115:          minLength: 6
116:        roles:
117:          type: array
118:          items:
119:            type: string
120:            enum: [customer, carrier]
121:          minItems: 1
122:          example: ["customer", "carrier"]
123:        # === æ–°å¢ï¼šå¯é€‰èƒ½åŠ›å­—æ®µï¼ˆä¸å½±å“æ—§é€»è¾‘ï¼‰===
124:        address:
125:          $ref: '#/components/schemas/Address'
126:        service_radius_km:
127:          type: integer
128:          minimum: 1
129:          example: 200
130:        capacity_kg:
131:          type: number
132:          minimum: 0.1
133:          example: 5000
134:        capacity_m3:
135:          type: number
136:          minimum: 0.1
137:          example: 30
138:        base_price_per_km:
139:          type: number
140:          minimum: 0.01
141:          example: 2.5
142:
143:    TenantProfile:
144:      type: object
145:      properties:
146:        id:
147:          type: string
148:        name:
149:          $ref: '#/components/schemas/Name'
150:        contact_person:
151:          $ref: '#/components/schemas/Name'
152:        roles:
153:          type: array
154:          items:
155:            type: string
156:            enum: [customer, carrier]
157:        # === æ–°å¢ï¼šå¯é€‰èƒ½åŠ›å­—æ®µ ===
158:        address:
159:          $ref: '#/components/schemas/Address'
160:        service_radius_km:
161:          type: integer
162:        capacity_kg:
163:          type: number
164:        capacity_m3:
165:          type: number
166:        base_price_per_km:
167:          type: number
168:        avg_rating:
169:          type: number
170:          minimum: 0
171:          maximum: 5
172:    # --- æŠ¥ä»·æ¨¡å‹ ---
173:    QuoteRequest:
174:      type: object
175:      required:
176:        - price
177:      properties:
178:        price:
179:          type: number
180:          minimum: 0.01
181:          example: 150.0
182:        estimated_hours:
183:          type: integer
184:          minimum: 1
185:          example: 24
186:        # === æ–°å¢ï¼šæ›´ç²¾ç¡®çš„åˆ°è¾¾æ—¶é—´ï¼ˆå¯é€‰ï¼‰===
187:        estimated_arrival:
188:          type: string
189:          format: date-time
190:          example: "2026-01-14T18:00:00Z"
191:        note:
192:          type: string
193:          example: "è‡ªæœ‰è½¦è¾†,24å°æ—¶å†…è£…è½¦"
194:    QuoteItem:
195:      type: object
196:      properties:
197:        id:
198:          type: string
199:        order_id:
200:          type: string
201:        carrier_tenant_id:
202:          type: string
203:        carrier_tenant_name:
204:          type: string
205:        price:
206:          type: number
207:        estimated_hours:
208:          type: integer
209:        # === æ–°å¢ ===
210:        estimated_arrival:
211:          type: string
212:          format: date-time
213:        avg_rating:
214:          type: number
215:        match_score:
216:          type: number
217:        note:
218:          type: string
219:        created_at:
220:          type: string
221:          format: date-time
222:    # --- è®¢å•ç›¸å…³ ---
223:    CreateOrderRequest:
224:      type: object
225:      required:
226:        - pickup_address
227:        - delivery_address
228:        - weight_kg
229:      properties:
230:        pickup_address:
231:          type: string
232:          example: "åŒ—äº¬å¸‚æœé˜³åŒºXXå¤§å¦"
233:        delivery_address:
234:          type: string
235:          example: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºYYå›­åŒº"
236:        weight_kg:
237:          type: number
238:          format: float
239:          minimum: 0.1
240:          example: 25.5
241:        # === å°ç¨‹åºç«¯ç‰¹æœ‰å­—æ®µ ===
242:        cargo_type:
243:          type: string
244:          enum: [å®¶å…·å®¶ç”µ, è£…ä¿®å»ºæ, åŠå…¬ç”¨å“, å¿«é€’åŒ…è£¹, å…¶ä»–]
245:          description: "è´§ç‰©ç±»å‹"
246:          example: "å®¶å…·å®¶ç”µ"
247:        cargo_remark:
248:          type: string
249:          description: "è´§ç‰©å¤‡æ³¨"
250:          example: "æ˜“ç¢å“ï¼Œè¯·å°å¿ƒæ¬è¿"
251:        length:
252:          type: number
253:          minimum: 0.01
254:          description: "è´§ç‰©é•¿åº¦(ç±³)"
255:          example: 1.2
256:        width:
257:          type: number
258:          minimum: 0.01
259:          description: "è´§ç‰©å®½åº¦(ç±³)"
260:          example: 0.8
261:        height:
262:          type: number
263:          minimum: 0.01
264:          description: "è´§ç‰©é«˜åº¦(ç±³)"
265:          example: 0.6
266:        vehicle_type:
267:          type: string
268:          enum: [æ— äººè½¦, æœ‰äººè½¦]
269:          description: "è½¦å‹è¦æ±‚"
270:          example: "æœ‰äººè½¦"
271:        pickup_time:
272:          type: string
273:          format: date-time
274:          description: "é¢„çº¦å–è´§æ—¶é—´"
275:          example: "2026-01-15T10:00:00Z"
276:        # === ç°æœ‰å¯é€‰å­—æ®µ ===
277:        volume_m3:
278:          type: number
279:          minimum: 0.01
280:          example: 1.2
281:        required_delivery_time:
282:          type: string
283:          format: date-time
284:          example: "2026-01-15T12:00:00Z"
285:        quote_deadline:
286:          type: string
287:          format: date-time
288:          example: "2026-01-14T10:00:00Z"
289:        # åŸæœ‰å­—æ®µ
290:        customer_name:
291:          $ref: '#/components/schemas/Name'
292:        customer_phone:
293:          type: string
294:          pattern: '^1[3-9]\d{9}$'
295:          example: "13800138000"
296:        description:
297:          type: string
298:          example: "æ˜“ç¢å“ï¼Œè¯·è½»æ‹¿è½»æ”¾"
299:
300:    OrderItem:
301:      type: object
302:      properties:
303:        id:
304:          type: string
305:          example: "order_123e4567-e89b-12d3-a456-426614174000"
306:        customer_tenant_id:
307:          type: string
308:        customer_tenant_name:
309:          type: string
310:        carrier_tenant_id:
311:          type: string
312:          nullable: true
313:        carrier_tenant_name:
314:          type: string
315:          nullable: true
316:        pickup_address:
317:          type: string
318:        delivery_address:
319:          type: string
320:        weight_kg:
321:          type: number
322:        volume_m3:
323:          type: number
324:        required_delivery_time:
325:          type: string
326:          format: date-time
327:        quote_deadline:
328:          type: string
329:          format: date-time
330:        status:
331:          type: string
332:          enum: [created, pending, pending_claim, claimed, quoted, awarded, dispatched, in_transit, delivered, cancelled] # âš ï¸ ä¸¥æ ¼ä¿ç•™åŸçŠ¶æ€æšä¸¾ï¼
333:        created_at:
334:          type: string
335:          format: date-time
336:        quotes:
337:          type: array
338:          items:
339:            $ref: '#/components/schemas/QuoteItem'
340:          nullable: true
341:        order_id:
342:          type: string
343:          example: "ORD-20260205-001"
344:          description: è®¢å•çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºå‰ç«¯å±•ç¤ºå’Œè·³è½¬è¯¦æƒ…é¡µ
345:        updated_at:
346:          type: string
347:          format: date-time
348:          example: "2026-02-05T10:35:00Z"
349:          description: è®¢å•æœ€åæ›´æ–°æ—¶é—´
350:        sender_info:
351:          type: string # æ³¨æ„ï¼šè¿™æ˜¯ JSON å­—ç¬¦ä¸²ï¼Œåœ¨å‰ç«¯è¢«è§£æä¸ºå¯¹è±¡
352:          example: '{"name": "å¼ ä¸‰", "phone": "13800138000"}'
353:          description: å‘è´§äººä¿¡æ¯ï¼ˆJSON å­—ç¬¦ä¸²æ ¼å¼ï¼‰
354:        receiver_info:
355:          type: string # æ³¨æ„ï¼šè¿™æ˜¯ JSON å­—ç¬¦ä¸²ï¼Œåœ¨å‰ç«¯è¢«è§£æä¸ºå¯¹è±¡
356:          example: '{"name": "æå››", "phone": "13900139000"}'
357:          description: æ”¶è´§äººä¿¡æ¯ï¼ˆJSON å­—ç¬¦ä¸²æ ¼å¼ï¼‰
358:        cargo_type:
359:          type: string
360:          example: "furniture"
361:          description: è´§ç‰©ç±»å‹
362:        length:
363:          type: number
364:          example: 1.2
365:          description: è´§ç‰©é•¿åº¦ï¼ˆç±³ï¼‰
366:        width:
367:          type: number
368:          example: 0.8
369:          description: è´§ç‰©å®½åº¦ï¼ˆç±³ï¼‰
370:        height:
371:          type: number
372:          example: 0.6
373:          description: è´§ç‰©é«˜åº¦ï¼ˆç±³ï¼‰
374:        description:
375:          type: string
376:          example: "è¯·åŠ¡å¿…å°å¿ƒè½»æ”¾"
377:          description: è®¢å•å¤‡æ³¨
378:        total_price:
379:          type: number
380:          example: 299.99
381:          description: è®¢å•æ€»ä»·æ ¼
382:      required:
383:        - id
384:        - order_id
385:        - status
386:        - created_at
387:        - pickup_address
388:        - delivery_address
389:        - sender_info
390:        - receiver_info
391:        - cargo_type
392:        - weight_kg
393:    # --- å“åº”æ¨¡å‹ ---
394:    SuccessResponse:
395:      type: object
396:      properties:
397:        success:
398:          type: boolean
399:          example: true
400:        message:
401:          type: string
402:          example: "æ“ä½œæˆåŠŸ"
403:    ErrorResponse:
404:      type: object
405:      properties:
406:        success:
407:          type: boolean
408:          example: false
409:        error:
410:          type: string
411:          example: "ERROR_CODE"
412:        message:
413:          type: string
414:          example: "é”™è¯¯ä¿¡æ¯"
415:    UnauthorizedError:
416:      type: object
417:      properties:
418:        success:
419:          type: boolean
420:          example: false
421:        error:
422:          type: string
423:          example: "UNAUTHORIZED"
424:        message:
425:          type: string
426:          example: "æœªæˆæƒè®¿é—®"
427:    NotFoundError:
428:      type: object
429:      properties:
430:        success:
431:          type: boolean
432:          example: false
433:        error:
434:          type: string
435:          example: "NOT_FOUND"
436:        message:
437:          type: string
438:          example: "èµ„æºæœªæ‰¾åˆ°"
439:    BadRequestError:
440:      type: object
441:      properties:
442:        success:
443:          type: boolean
444:          example: false
445:        error:
446:          type: string
447:          example: "BAD_REQUEST"
448:        message:
449:          type: string
450:          example: "è¯·æ±‚å‚æ•°é”™è¯¯"
451:    PaginationInfo:
452:      type: object
453:      properties:
454:        current_page:
455:          type: integer
456:          example: 1
457:        total_pages:
458:          type: integer
459:          example: 10
460:        total_items:
461:          type: integer
462:          example: 100
463:        per_page:
464:          type: integer
465:          example: 10
466:    OrderListResponse:
467:      type: object
468:      properties:
469:        success:
470:          type: boolean
471:          example: true
472:        message:
473:          type: string
474:          example: "è·å–æˆåŠŸ"
475:        data:
476:          type: object
477:          properties:
478:            orders:
479:              type: array
480:              items:
481:                $ref: '#/components/schemas/OrderItem'
482:            pagination:
483:              $ref: '#/components/schemas/PaginationInfo'
484:      required:
485:        - success
486:        - data
487:    QuoteListResponse:
488:      type: object
489:      properties:
490:        success:
491:          type: boolean
492:          example: true
493:        message:
494:          type: string
495:          example: "è·å–æˆåŠŸ"
496:        data:
497:          type: object
498:          properties:
499:            quotes:
500:              type: array
501:              items:
502:                $ref: '#/components/schemas/QuoteItem'
503:            pagination:
504:              $ref: '#/components/schemas/PaginationInfo'
505:    # --- æ–°å¢ï¼šå®šä»·è§„åˆ™ç›¸å…³æ¨¡å‹ ---
506:    PlatformPricingRuleInput:
507:      type: object
508:      required:
509:        - rule_name
510:      properties:
511:        rule_name:
512:          type: string
513:          description: å®šä»·è§„åˆ™åç§°
514:          example: "æ ‡å‡†å®šä»·è§„åˆ™"
515:        base_price:
516:          type: number
517:          description: åŸºç¡€ä»·æ ¼
518:          example: 10.0
519:        price_per_km:
520:          type: number
521:          description: æ¯å…¬é‡Œä»·æ ¼
522:          example: 2.0
523:        price_per_hour:
524:          type: number
525:          description: æ¯å°æ—¶ä»·æ ¼
526:          example: 50.0
527:        price_per_kg:
528:          type: number
529:          description: æ¯å…¬æ–¤ä»·æ ¼
530:          example: 0.5
531:        cold_storage_surcharge:
532:          type: number
533:          description: å†·è—é™„åŠ è´¹
534:          example: 3.0
535:        peak_hour_multiplier:
536:          type: number
537:          description: é«˜å³°æ—¶æ®µå€ç‡
538:          example: 1.5
539:        off_peak_hour_multiplier:
540:          type: number
541:          description: ä½å³°æ—¶æ®µå€ç‡
542:          example: 0.8
543:        weather_multiplier:
544:          type: number
545:          description: å¤©æ°”ç³»æ•°
546:          example: 1.2
547:        min_price:
548:          type: number
549:          description: æœ€ä½ä»·æ ¼
550:          example: 8.0
551:        max_price:
552:          type: number
553:          description: æœ€é«˜ä»·æ ¼
554:          example: 500.0
555:        time_slot_rules:
556:          type: string
557:          description: æ—¶é—´æ®µè§„åˆ™(JSONæ ¼å¼)
558:          example: '{"morning":{"start":"08:00","end":"10:00","multiplier":1.2},"evening":{"start":"17:00","end":"19:00","multiplier":1.3}}'
559:        region_rules:
560:          type: string
561:          description: åŒºåŸŸè§„åˆ™(JSONæ ¼å¼)
562:          example: '{"beijing":{"surcharge":5.0},"shanghai":{"surcharge":3.0}}'
563:        vehicle_type_rules:
564:          type: string
565:          description: è½¦å‹è§„åˆ™(JSONæ ¼å¼)
566:          example: '{"van":{"surcharge":2.0},"truck":{"surcharge":5.0}}'
567:        active:
568:          type: boolean
569:          description: æ˜¯å¦æ¿€æ´»
570:          example: true
571:
572:    CarrierPricingConfigInput:
573:      type: object
574:      required:
575:        - config_name
576:      properties:
577:        config_name:
578:          type: string
579:          description: å®šä»·é…ç½®åç§°
580:          example: "åŒ—äº¬åœ°åŒºå®šä»·"
581:        base_price:
582:          type: number
583:          description: åŸºç¡€ä»·æ ¼
584:          example: 12.0
585:        price_per_km:
586:          type: number
587:          description: æ¯å…¬é‡Œä»·æ ¼
588:          example: 2.5
589:        price_per_hour:
590:          type: number
591:          description: æ¯å°æ—¶ä»·æ ¼
592:          example: 60.0
593:        price_per_kg:
594:          type: number
595:          description: æ¯å…¬æ–¤ä»·æ ¼
596:          example: 0.8
597:        cold_storage_surcharge:
598:          type: number
599:          description: å†·è—é™„åŠ è´¹
600:          example: 5.0
601:        peak_hour_multiplier:
602:          type: number
603:          description: é«˜å³°æ—¶æ®µå€ç‡
604:          example: 1.8
605:        off_peak_hour_multiplier:
606:          type: number
607:          description: ä½å³°æ—¶æ®µå€ç‡
608:          example: 0.7
609:        weather_multiplier:
610:          type: number
611:          description: å¤©æ°”ç³»æ•°
612:          example: 1.5
613:        min_price:
614:          type: number
615:          description: æœ€ä½ä»·æ ¼
616:          example: 10.0
617:        max_price:
618:          type: number
619:          description: æœ€é«˜ä»·æ ¼
620:          example: 1000.0
621:        time_slot_rules:
622:          type: string
623:          description: æ—¶é—´æ®µè§„åˆ™(JSONæ ¼å¼)
624:          example: '{"morning":{"start":"08:00","end":"10:00","multiplier":1.5},"evening":{"start":"17:00","end":"19:00","multiplier":1.8}}'
625:        region_rules:
626:          type: string
627:          description: åŒºåŸŸè§„åˆ™(JSONæ ¼å¼)
628:          example: '{"beijing_haidian":{"surcharge":8.0},"beijing_chaoyang":{"surcharge":6.0}}'
629:        vehicle_type_rules:
630:          type: string
631:          description: è½¦å‹è§„åˆ™(JSONæ ¼å¼)
632:          example: '{"refrigerated_truck":{"surcharge":10.0},"flatbed_truck":{"surcharge":3.0}}'
633:        pricing_strategy:
634:          type: string
635:          description: å®šä»·ç­–ç•¥
636:          enum: [distance_based, weight_based, time_based, mixed]
637:          example: "mixed"
638:        service_addons:
639:          type: string
640:          description: æœåŠ¡é™„åŠ é¡¹(JSONæ ¼å¼)
641:          example: '{"loading_assistance":{"price":10.0,"optional":true},"insurance":{"rate":0.01,"optional":true}}'
642:        active:
643:          type: boolean
644:          description: æ˜¯å¦æ¿€æ´»
645:          example: true
646:
647:    PricingRuleItem:
648:      type: object
649:      properties:
650:        id:
651:          type: integer
652:          description: è§„åˆ™ID
653:          example: 1
654:        rule_name:
655:          type: string
656:          description: è§„åˆ™åç§°
657:          example: "æ ‡å‡†å®šä»·è§„åˆ™"
658:        base_price:
659:          type: number
660:          description: åŸºç¡€ä»·æ ¼
661:          example: 10.0
662:        price_per_km:
663:          type: number
664:          description: æ¯å…¬é‡Œä»·æ ¼
665:          example: 2.0
666:        price_per_hour:
667:          type: number
668:          description: æ¯å°æ—¶ä»·æ ¼
669:          example: 50.0
670:        price_per_kg:
671:          type: number
672:          description: æ¯å…¬æ–¤ä»·æ ¼
673:          example: 0.5
674:        cold_storage_surcharge:
675:          type: number
676:          description: å†·è—é™„åŠ è´¹
677:          example: 3.0
678:        peak_hour_multiplier:
679:          type: number
680:          description: é«˜å³°æ—¶æ®µå€ç‡
681:          example: 1.5
682:        off_peak_hour_multiplier:
683:          type: number
684:          description: ä½å³°æ—¶æ®µå€ç‡
685:          example: 0.8
686:        weather_multiplier:
687:          type: number
688:          description: å¤©æ°”ç³»æ•°
689:          example: 1.2
690:        min_price:
691:          type: number
692:          description: æœ€ä½ä»·æ ¼
693:          example: 8.0
694:        max_price:
695:          type: number
696:          description: æœ€é«˜ä»·æ ¼
697:          example: 500.0
698:        time_slot_rules:
699:          type: string
700:          description: æ—¶é—´æ®µè§„åˆ™
701:          example: '{"morning":{"start":"08:00","end":"10:00","multiplier":1.2}}'
702:        region_rules:
703:          type: string
704:          description: åŒºåŸŸè§„åˆ™
705:          example: '{"beijing":{"surcharge":5.0}}'
706:        vehicle_type_rules:
707:          type: string
708:          description: è½¦å‹è§„åˆ™
709:          example: '{"van":{"surcharge":2.0}}'
710:        active:
711:          type: boolean
712:          description: æ˜¯å¦æ¿€æ´»
713:          example: true
714:        created_at:
715:          type: string
716:          description: åˆ›å»ºæ—¶é—´
717:          example: "2023-01-01T10:00:00Z"
718:        updated_at:
719:          type: string
720:          description: æ›´æ–°æ—¶é—´
721:          example: "2023-01-01T10:00:00Z"
722:
723:    PricingConfigItem:
724:      type: object
725:      properties:
726:        id:
727:          type: integer
728:          description: é…ç½®ID
729:          example: 1
730:        carrier_tenant_id:
731:          type: integer
732:          description: æ‰¿è¿å•†ç§Ÿæˆ·ID
733:          example: 123
734:        config_name:
735:          type: string
736:          description: é…ç½®åç§°
737:          example: "åŒ—äº¬åœ°åŒºå®šä»·"
738:        base_price:
739:          type: number
740:          description: åŸºç¡€ä»·æ ¼
741:          example: 12.0
742:        price_per_km:
743:          type: number
744:          description: æ¯å…¬é‡Œä»·æ ¼
745:          example: 2.5
746:        price_per_hour:
747:          type: number
748:          description: æ¯å°æ—¶ä»·æ ¼
749:          example: 60.0
750:        price_per_kg:
751:          type: number
752:          description: æ¯å…¬æ–¤ä»·æ ¼
753:          example: 0.8
754:        cold_storage_surcharge:
755:          type: number
756:          description: å†·è—é™„åŠ è´¹
757:          example: 5.0
758:        peak_hour_multiplier:
759:          type: number
760:          description: é«˜å³°æ—¶æ®µå€ç‡
761:          example: 1.8
762:        off_peak_hour_multiplier:
763:          type: number
764:          description: ä½å³°æ—¶æ®µå€ç‡
765:          example: 0.7
766:        weather_multiplier:
767:          type: number
768:          description: å¤©æ°”ç³»æ•°
769:          example: 1.5
770:        min_price:
771:          type: number
772:          description: æœ€ä½ä»·æ ¼
773:          example: 10.0
774:        max_price:
775:          type: number
776:          description: æœ€é«˜ä»·æ ¼
777:          example: 1000.0
778:        time_slot_rules:
779:          type: string
780:          description: æ—¶é—´æ®µè§„åˆ™
781:          example: '{"morning":{"start":"08:00","end":"10:00","multiplier":1.5}}'
782:        region_rules:
783:          type: string
784:          description: åŒºåŸŸè§„åˆ™
785:          example: '{"beijing_haidian":{"surcharge":8.0}}'
786:        vehicle_type_rules:
787:          type: string
788:          description: è½¦å‹è§„åˆ™
789:          example: '{"refrigerated_truck":{"surcharge":10.0}}'
790:        pricing_strategy:
791:          type: string
792:          description: å®šä»·ç­–ç•¥
793:          example: "mixed"
794:        service_addons:
795:          type: string
796:          description: æœåŠ¡é™„åŠ é¡¹
797:          example: '{"loading_assistance":{"price":10.0,"optional":true}}'
798:        active:
799:          type: boolean
800:          description: æ˜¯å¦æ¿€æ´»
801:          example: true
802:        created_at:
803:          type: string
804:          description: åˆ›å»ºæ—¶é—´
805:          example: "2023-01-01T10:00:00Z"
806:        updated_at:
807:          type: string
808:          description: æ›´æ–°æ—¶é—´
809:          example: "2023-01-01T10:00:00Z"
810:
811:    PricingRuleListResponse:
812:      type: object
813:      properties:
814:        success:
815:          type: boolean
816:          example: true
817:        data:
818:          type: object
819:          properties:
820:            rules:
821:              type: array
822:              items:
823:                $ref: '#/components/schemas/PricingRuleItem'
824:            pagination:
825:              $ref: '#/components/schemas/PaginationInfo'
826:
827:    PricingConfigListResponse:
828:      type: object
829:      properties:
830:        success:
831:          type: boolean
832:          example: true
833:        data:
834:          type: object
835:          properties:
836:            configs:
837:              type: array
838:              items:
839:                $ref: '#/components/schemas/PricingConfigItem'
840:            pagination:
841:              $ref: '#/components/schemas/PaginationInfo'
842:
843:    SinglePricingRuleResponse:
844:      type: object
845:      properties:
846:        success:
847:          type: boolean
848:          example: true
849:        message:
850:          type: string
851:          example: "è·å–æˆåŠŸ"
852:        data:
853:          $ref: '#/components/schemas/PricingRuleItem'
854:
855:    SinglePricingConfigResponse:
856:      type: object
857:      properties:
858:        success:
859:          type: boolean
860:          example: true
861:        message:
862:          type: string
863:          example: "è·å–æˆåŠŸ"
864:        data:
865:          $ref: '#/components/schemas/PricingConfigItem'
866:
867:    # ç”¨æˆ·ç›¸å…³ç»„ä»¶å®šä¹‰
868:    UserItem:
869:      type: object
870:      properties:
871:        id:
872:          type: integer
873:          example: 1
874:          description: ç”¨æˆ·ID
875:        username:
876:          type: string
877:          example: "john_doe"
878:          description: ç”¨æˆ·å
879:        email:
880:          type: string
881:          format: email
882:          example: "john@example.com"
883:          description: é‚®ç®±
884:        phone:
885:          type: string
886:          pattern: '^1[3-9][0-9]{9}$'
887:          example: "13800138000"
888:          description: æ‰‹æœºå·
889:        name:
890:          $ref: '#/components/schemas/Name'
891:        role:
892:          type: string
893:          enum: [admin, user, super_admin]
894:          example: "user"
895:          description: è§’è‰²
896:        user_type:
897:          type: string
898:          enum: [admin_user, tenant_user, customer_user]
899:          example: "tenant_user"
900:          description: ç”¨æˆ·ç±»å‹
901:        tenant_id:
902:          type: integer
903:          example: 1
904:          description: ç§Ÿæˆ·ID
905:        is_active:
906:          type: boolean
907:          example: true
908:          description: æ˜¯å¦æ¿€æ´»
909:        created_at:
910:          type: string
911:          format: date-time
912:          example: "2023-01-01T10:00:00Z"
913:          description: åˆ›å»ºæ—¶é—´
914:        updated_at:
915:          type: string
916:          format: date-time
917:          example: "2023-01-01T10:00:00Z"
918:          description: æ›´æ–°æ—¶é—´
919:
920:    SingleUserResponse:
921:      type: object
922:      properties:
923:        success:
924:          type: boolean
925:          example: true
926:        message:
927:          type: string
928:          example: "è·å–æˆåŠŸ"
929:        data:
930:          $ref: '#/components/schemas/UserItem'
931:
932:    # --- å“åº”æ¨¡å‹ ---
933:    SuccessResponse:
934:      type: object
935:      properties:
936:        success:
937:          type: boolean
938:          example: true
939:        message:
940:          type: string
941:          example: "æ“ä½œæˆåŠŸ"
942:    ErrorResponse:
943:      type: object
944:      properties:
945:        success:
946:          type: boolean
947:          example: false
948:        error:
949:          type: string
950:          example: "ERROR_CODE"
951:        message:
952:          type: string
953:          example: "é”™è¯¯ä¿¡æ¯"
954:    UnauthorizedError:
955:      type: object
956:      properties:
957:        success:
958:          type: boolean
959:          example: false
960:        error:
961:          type: string
962:          example: "UNAUTHORIZED"
963:        message:
964:          type: string
965:          example: "æœªæˆæƒè®¿é—®"
966:    NotFoundError:
967:      type: object
968:      properties:
969:        success:
970:          type: boolean
971:          example: false
972:        error:
973:          type: string
974:          example: "NOT_FOUND"
975:        message:
976:          type: string
977:          example: "èµ„æºæœªæ‰¾åˆ°"
978:    BadRequestError:
979:      type: object
980:      properties:
981:        success:
982:          type: boolean
983:          example: false
984:        error:
985:          type: string
986:          example: "BAD_REQUEST"
987:        message:
988:          type: string
989:          example: "è¯·æ±‚å‚æ•°é”™è¯¯"
990:    PaginationInfo:
991:      type: object
992:      properties:
993:        current_page:
994:          type: integer
995:          example: 1
996:        total_pages:
997:          type: integer
998:          example: 10
999:        total_items:
1000:          type: integer
1001:          example: 100
1002:        per_page:
1003:          type: integer
1004:          example: 10
1005:
1006:paths:
1007:  /api/setup:
1008:    post:
1009:      tags:
1010:        - setup
1011:      summary: å¹³å°åˆå§‹åŒ–è®¾ç½®
1012:      operationId: setupPlatform
1013:      requestBody:
1014:        required: true
1015:        content:
1016:          application/json:
1017:            schema:
1018:              type: object
1019:              required:
1020:                - admin_username
1021:                - admin_password
1022:                - admin_email
1023:                - admin_phone
1024:                - admin_name
1025:              properties:
1026:                admin_username:
1027:                  type: string
1028:                  example: "admin"
1029:                admin_password:
1030:                  type: string
1031:                  example: "admin123"
1032:                admin_email:
1033:                  type: string
1034:                  format: email
1035:                  example: "admin@example.com"
1036:                admin_phone:
1037:                  type: string
1038:                  example: "13800138000"
1039:                admin_name:
1040:                  type: string
1041:                  example: "Administrator"
1042:      responses:
1043:        '200':
1044:          description: å¹³å°åˆå§‹åŒ–æˆåŠŸ
1045:          content:
1046:            application/json:
1047:              schema:
1048:                type: object
1049:                properties:
1050:                  success:
1051:                    type: boolean
1052:                    example: true
1053:                  message:
1054:                    type: string
1055:                    example: "å¹³å°åˆå§‹åŒ–æˆåŠŸ"
1056:                  data:
1057:                    type: object
1058:                    properties:
1059:                      admin_user:
1060:                        $ref: '#/components/schemas/UserItem'
1061:        '400':
1062:          description: åˆå§‹åŒ–å‚æ•°é”™è¯¯
1063:          content:
1064:            application/json:
1065:              schema:
1066:                $ref: '#/components/schemas/ErrorResponse'
1067:        '409':
1068:          description: å¹³å°å·²åˆå§‹åŒ–
1069:          content:
1070:            application/json:
1071:              schema:
1072:                $ref: '#/components/schemas/ErrorResponse'
1073:
1074:  /api/admin/auth/login:
1075:    post:
1076:      tags:
1077:        - admin-auth
1078:      summary: ç®¡ç†å‘˜ç™»å½•
1079:      operationId: adminLogin
1080:      requestBody:
1081:        required: true
1082:        content:
1083:          application/json:
1084:            schema:
1085:              type: object
1086:              required:
1087:                - username
1088:                - password
1089:              properties:
1090:                username:
1091:                  type: string
1092:                  example: "admin"
1093:                password:
1094:                  type: string
1095:                  example: "admin123"
1096:      responses:
1097:        '200':
1098:          description: ç™»å½•æˆåŠŸ
1099:          content:
1100:            application/json:
1101:              schema:
1102:                type: object
1103:                properties:
1104:                  success:
1105:                    type: boolean
1106:                    example: true
1107:                  message:
1108:                    type: string
1109:                    example: "ç™»å½•æˆåŠŸ"
1110:                  data:
1111:                    type: object
1112:                    properties:
1113:                      user:
1114:                        $ref: '#/components/schemas/UserItem'
1115:                      session_token:
1116:                        type: string
1117:                        example: "session_token_here"
1118:        '401':
1119:          description: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
1120:          content:
1121:            application/json:
1122:              schema:
1123:                $ref: '#/components/schemas/ErrorResponse'
1124:
1125:  /api/admin/auth/logout:
1126:    post:
1127:      tags:
1128:        - admin-auth
1129:      summary: ç®¡ç†å‘˜ç™»å‡º
1130:      operationId: adminLogout
1131:      security:
1132:        - AdminSessionAuth: []
1133:      responses:
1134:        '200':
1135:          description: ç™»å‡ºæˆåŠŸ
1136:          content:
1137:            application/json:
1138:              schema:
1139:                $ref: '#/components/schemas/SuccessResponse'
1140:        '401':
1141:          $ref: '#/components/responses/UnauthorizedError'
1142:
1143:  /api/admin/users:
1144:    get:
1145:      tags:
1146:        - admin-user
1147:      summary: è·å–ç”¨æˆ·åˆ—è¡¨
1148:      operationId: listUsers
1149:      security:
1150:        - AdminSessionAuth: []
1151:      parameters:
1152:        - name: page
1153:          in: query
1154:          required: false
1155:          schema:
1156:            type: integer
1157:            minimum: 1
1158:            default: 1
1159:          description: é¡µç 
1160:        - name: limit
1161:          in: query
1162:          required: false
1163:          schema:
1164:            type: integer
1165:            minimum: 1
1166:            maximum: 100
1167:            default: 10
1168:          description: æ¯é¡µæ•°é‡
1169:        - name: search
1170:          in: query
1171:          required: false
1172:          schema:
1173:            type: string
1174:          description: æœç´¢å…³é”®è¯
1175:        - name: role
1176:          in: query
1177:          required: false
1178:          schema:
1179:            type: string
1180:          description: ç”¨æˆ·è§’è‰²è¿‡æ»¤
1181:      responses:
1182:        '200':
1183:          description: ç”¨æˆ·åˆ—è¡¨
1184:          content:
1185:            application/json:
1186:              schema:
1187:                type: object
1188:                properties:
1189:                  success:
1190:                    type: boolean
1191:                    example: true
1192:                  message:
1193:                    type: string
1194:                    example: "è·å–æˆåŠŸ"
1195:                  data:
1196:                    type: object
1197:                    properties:
1198:                      users:
1199:                        type: array
1200:                        items:
1201:                          $ref: '#/components/schemas/UserItem'
1202:                      pagination:
1203:                        $ref: '#/components/schemas/PaginationInfo'
1204:        '401':
1205:          $ref: '#/components/responses/UnauthorizedError'
1206:
1207:    post:
1208:      tags:
1209:        - admin-user
1210:      summary: åˆ›å»ºç”¨æˆ·
1211:      operationId: createUser
1212:      security:
1213:        - AdminSessionAuth: []
1214:      requestBody:
1215:        required: true
1216:        content:
1217:          application/json:
1218:            schema:
1219:              type: object
1220:              required:
1221:                - username
1222:                - email
1223:                - phone
1224:                - name
1225:                - role
1226:                - password
1227:                - user_type
1228:              properties:
1229:                username:
1230:                  $ref: '#/components/schemas/Username'
1231:                email:
1232:                  type: string
1233:                  format: email
1234:                  example: "user@example.com"
1235:                phone:
1236:                  type: string
1237:                  pattern: '^1[3-9][0-9]{9}$'
1238:                  example: "13800138000"
1239:                name:
1240:                  $ref: '#/components/schemas/Name'
1241:                role:
1242:                  type: string
1243:                  enum: [admin, user, super_admin]
1244:                  example: "user"
1245:                password:
1246:                  type: string
1247:                  minLength: 6
1248:                  example: "password123"
1249:                user_type:
1250:                  type: string
1251:                  enum: [admin_user, tenant_user, customer_user]
1252:                  example: "tenant_user"
1253:                tenant_id:
1254:                  type: integer
1255:                  example: 1
1256:                is_active:
1257:                  type: boolean
1258:                  example: true
1259:      responses:
1260:        '201':
1261:          description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ
1262:          content:
1263:            application/json:
1264:              schema:
1265:                $ref: '#/components/schemas/SingleUserResponse'
1266:        '400':
1267:          $ref: '#/components/responses/BadRequestError'
1268:        '401':
1269:          $ref: '#/components/responses/UnauthorizedError'
1270:
1271:  /api/admin/users/{id}:
1272:    get:
1273:      tags:
1274:        - admin-user
1275:      summary: è·å–å•ä¸ªç”¨æˆ·
1276:      operationId: getUser
1277:      security:
1278:        - AdminSessionAuth: []
1279:      parameters:
1280:        - name: id
1281:          in: path
1282:          required: true
1283:          schema:
1284:            type: integer
1285:          description: ç”¨æˆ·ID
1286:      responses:
1287:        '200':
1288:          description: ç”¨æˆ·è¯¦æƒ…
1289:          content:
1290:            application/json:
1291:              schema:
1292:                $ref: '#/components/schemas/SingleUserResponse'
1293:        '401':
1294:          $ref: '#/components/responses/UnauthorizedError'
1295:        '404':
1296:          $ref: '#/components/responses/NotFoundError'
1297:
1298:    put:
1299:      tags:
1300:        - admin-user
1301:      summary: æ›´æ–°ç”¨æˆ·
1302:      operationId: updateUser
1303:      security:
1304:        - AdminSessionAuth: []
1305:      parameters:
1306:        - name: id
1307:          in: path
1308:          required: true
1309:          schema:
1310:            type: integer
1311:          description: ç”¨æˆ·ID
1312:      requestBody:
1313:        required: true
1314:        content:
1315:          application/json:
1316:            schema:
1317:              type: object
1318:              required:
1319:                - username
1320:                - email
1321:                - phone
1322:                - name
1323:              properties:
1324:                username:
1325:                  $ref: '#/components/schemas/Username'
1326:                email:
1327:                  type: string
1328:                  format: email
1329:                  example: "user@example.com"
1330:                phone:
1331:                  type: string
1332:                  pattern: '^1[3-9][0-9]{9}$'
1333:                  example: "13800138000"
1334:                name:
1335:                  $ref: '#/components/schemas/Name'
1336:                role:
1337:                  type: string
1338:                  enum: [admin, user, super_admin]
1339:                  example: "user"
1340:                password:
1341:                  type: string
1342:                  minLength: 6
1343:                  example: "newpassword123"
1344:                is_active:
1345:                  type: boolean
1346:                  example: true
1347:      responses:
1348:        '200':
1349:          description: ç”¨æˆ·æ›´æ–°æˆåŠŸ
1350:          content:
1351:            application/json:
1352:              schema:
1353:                $ref: '#/components/schemas/SingleUserResponse'
1354:        '400':
1355:          $ref: '#/components/responses/BadRequestError'
1356:        '401':
1357:          $ref: '#/components/responses/UnauthorizedError'
1358:        '404':
1359:          $ref: '#/components/responses/NotFoundError'
1360:
1361:    delete:
1362:      tags:
1363:        - admin-user
1364:      summary: åˆ é™¤ç”¨æˆ·
1365:      operationId: deleteUser
1366:      security:
1367:        - AdminSessionAuth: []
1368:      parameters:
1369:        - name: id
1370:          in: path
1371:          required: true
1372:          schema:
1373:            type: integer
1374:          description: ç”¨æˆ·ID
1375:      responses:
1376:        '200':
1377:          description: ç”¨æˆ·åˆ é™¤æˆåŠŸ
1378:          content:
1379:            application/json:
1380:              schema:
1381:                $ref: '#/components/schemas/SuccessResponse'
1382:        '401':
1383:          $ref: '#/components/responses/UnauthorizedError'
1384:        '404':
1385:          $ref: '#/components/responses/NotFoundError'
1386:
1387:  /api/admin/tenants:
1388:    get:
1389:      tags:
1390:        - admin-tenant
1391:      summary: è·å–ç§Ÿæˆ·åˆ—è¡¨
1392:      operationId: listTenants
1393:      security:
1394:        - AdminSessionAuth: []
1395:      parameters:
1396:        - name: page
1397:          in: query
1398:          required: false
1399:          schema:
1400:            type: integer
1401:            minimum: 1
1402:            default: 1
1403:          description: é¡µç 
1404:        - name: limit
1405:          in: query
1406:          required: false
1407:          schema:
1408:            type: integer
1409:            minimum: 1
1410:            maximum: 100
1411:            default: 10
1412:          description: æ¯é¡µæ•°é‡
1413:        - name: search
1414:          in: query
1415:          required: false
1416:          schema:
1417:            type: string
1418:          description: æœç´¢å…³é”®è¯
1419:        - name: status
1420:          in: query
1421:          required: false
1422:          schema:
1423:            type: string
1424:            enum: [pending, active, inactive, suspended, rejected]
1425:          description: ç§Ÿæˆ·çŠ¶æ€è¿‡æ»¤
1426:        - name: type
1427:          in: query
1428:          required: false
1429:          schema:
1430:            type: string
1431:            enum: [customer, carrier]
1432:          description: ç§Ÿæˆ·ç±»å‹è¿‡æ»¤
1433:      responses:
1434:        '200':
1435:          description: ç§Ÿæˆ·åˆ—è¡¨
1436:          content:
1437:            application/json:
1438:              schema:
1439:                type: object
1440:                properties:
1441:                  success:
1442:                    type: boolean
1443:                    example: true
1444:                  message:
1445:                    type: string
1446:                    example: "è·å–æˆåŠŸ"
1447:                  data:
1448:                    type: object
1449:                    properties:
1450:                      tenants:
1451:                        type: array
1452:                        items:
1453:                          $ref: '#/components/schemas/TenantProfile'
1454:                      pagination:
1455:                        $ref: '#/components/schemas/PaginationInfo'
1456:        '401':
1457:          $ref: '#/components/responses/UnauthorizedError'
1458:
1459:  /api/admin/tenants/{id}:
1460:    get:
1461:      tags:
1462:        - admin-tenant
1463:      summary: è·å–å•ä¸ªç§Ÿæˆ·
1464:      operationId: getTenant
1465:      security:
1466:        - AdminSessionAuth: []
1467:      parameters:
1468:        - name: id
1469:          in: path
1470:          required: true
1471:          schema:
1472:            type: integer
1473:          description: ç§Ÿæˆ·ID
1474:      responses:
1475:        '200':
1476:          description: ç§Ÿæˆ·è¯¦æƒ…
1477:          content:
1478:            application/json:
1479:              schema:
1480:                $ref: '#/components/schemas/SingleTenantResponse'
1481:        '401':
1482:          $ref: '#/components/responses/UnauthorizedError'
1483:        '404':
1484:          $ref: '#/components/responses/NotFoundError'
1485:
1486:    put:
1487:      tags:
1488:        - admin-tenant
1489:      summary: æ›´æ–°ç§Ÿæˆ·
1490:      operationId: updateTenant
1491:      security:
1492:        - AdminSessionAuth: []
1493:      parameters:
1494:        - name: id
1495:          in: path
1496:          required: true
1497:          schema:
1498:            type: integer
1499:          description: ç§Ÿæˆ·ID
1500:      requestBody:
1501:        required: true
1502:        content:
1503:          application/json:
1504:            schema:
1505:              $ref: '#/components/schemas/TenantUpdateRequest'
1506:      responses:
1507:        '200':
1508:          description: ç§Ÿæˆ·æ›´æ–°æˆåŠŸ
1509:          content:
1510:            application/json:
1511:              schema:
1512:                $ref: '#/components/schemas/SingleTenantResponse'
1513:        '400':
1514:          $ref: '#/components/responses/BadRequestError'
1515:        '401':
1516:          $ref: '#/components/responses/UnauthorizedError'
1517:        '404':
1518:          $ref: '#/components/responses/NotFoundError'
1519:
1520:  /api/admin/tenants/{id}/approve:
1521:    post:
1522:      tags:
1523:        - admin-tenant
1524:      summary: æ‰¹å‡†ç§Ÿæˆ·
1525:      operationId: approveTenant
1526:      security:
1527:        - AdminSessionAuth: []
1528:      parameters:
1529:        - name: id
1530:          in: path
1531:          required: true
1532:          schema:
1533:            type: integer
1534:          description: ç§Ÿæˆ·ID
1535:      responses:
1536:        '200':
1537:          description: ç§Ÿæˆ·æ‰¹å‡†æˆåŠŸ
1538:          content:
1539:            application/json:
1540:              schema:
1541:                $ref: '#/components/schemas/SuccessResponse'
1542:        '401':
1543:          $ref: '#/components/responses/UnauthorizedError'
1544:        '404':
1545:          $ref: '#/components/responses/NotFoundError'
1546:
1547:  /api/admin/tenants/{id}/reject:
1548:    post:
1549:      tags:
1550:        - admin-tenant
1551:      summary: æ‹’ç»ç§Ÿæˆ·
1552:      operationId: rejectTenant
1553:      security:
1554:        - AdminSessionAuth: []
1555:      parameters:
1556:        - name: id
1557:          in: path
1558:          required: true
1559:          schema:
1560:            type: integer
1561:          description: ç§Ÿæˆ·ID
1562:      requestBody:
1563:        required: false
1564:        content:
1565:          application/json:
1566:            schema:
1567:              type: object
1568:              properties:
1569:                rejection_notes:
1570:                  type: string
1571:                  description: æ‹’ç»åŸå› 
1572:                  example: "èµ„è´¨ä¸å…¨"
1573:      responses:
1574:        '200':
1575:          description: ç§Ÿæˆ·æ‹’ç»æˆåŠŸ
1576:          content:
1577:            application/json:
1578:              schema:
1579:                $ref: '#/components/schemas/SuccessResponse'
1580:        '401':
1581:          $ref: '#/components/responses/UnauthorizedError'
1582:        '404':
1583:          $ref: '#/components/responses/NotFoundError'
1584:
1585:  /api/admin/orders:
1586:    get:
1587:      tags:
1588:        - admin-order
1589:      summary: è·å–è®¢å•åˆ—è¡¨
1590:      operationId: listOrders
1591:      security:
1592:        - AdminSessionAuth: []
1593:      parameters:
1594:        - name: page
1595:          in: query
1596:          required: false
1597:          schema:
1598:            type: integer
1599:            minimum: 1
1600:            default: 1
1601:          description: é¡µç 
1602:        - name: limit
1603:          in: query
1604:          required: false
1605:          schema:
1606:            type: integer
1607:            minimum: 1
1608:            maximum: 100
1609:            default: 10
1610:          description: æ¯é¡µæ•°é‡
1611:        - name: search
1612:          in: query
1613:          required: false
1614:          schema:
1615:            type: string
1616:          description: æœç´¢å…³é”®è¯
1617:        - name: status
1618:          in: query
1619:          required: false
1620:          schema:
1621:            type: string
1622:            enum: [created, pending, pending_claim, claimed, quoted, awarded, dispatched, in_transit, delivered, cancelled]
1623:          description: è®¢å•çŠ¶æ€è¿‡æ»¤
1624:        - name: date_from
1625:          in: query
1626:          required: false
1627:          schema:
1628:            type: string
1629:            format: date
1630:          description: å¼€å§‹æ—¥æœŸ
1631:        - name: date_to
1632:          in: query
1633:          required: false
1634:          schema:
1635:            type: string
1636:            format: date
1637:          description: ç»“æŸæ—¥æœŸ
1638:      responses:
1639:        '200':
1640:          description: è®¢å•åˆ—è¡¨
1641:          content:
1642:            application/json:
1643:              schema:
1644:                $ref: '#/components/schemas/OrderListResponse'
1645:        '401':
1646:          $ref: '#/components/responses/UnauthorizedError'
1647:
1648:  /api/admin/orders/{id}:
1649:    get:
1650:      tags:
1651:        - admin-order
1652:      summary: è·å–å•ä¸ªè®¢å•
1653:      operationId: getOrder
1654:      security:
1655:        - AdminSessionAuth: []
1656:      parameters:
1657:        - name: id
1658:          in: path
1659:          required: true
1660:          schema:
1661:            type: string
1662:          description: è®¢å•ID
1663:      responses:
1664:        '200':
1665:          description: è®¢å•è¯¦æƒ…
1666:          content:
1667:            application/json:
1668:              schema:
1669:                type: object
1670:                properties:
1671:                  success:
1672:                    type: boolean
1673:                    example: true
1674:                  message:
1675:                    type: string
1676:                    example: "è·å–æˆåŠŸ"
1677:                  data:
1678:                    $ref: '#/components/schemas/OrderItem'
1679:        '401':
1680:          $ref: '#/components/responses/UnauthorizedError'
1681:        '404':
1682:          $ref: '#/components/responses/NotFoundError'
1683:
1684:    put:
1685:      tags:
1686:        - admin-order
1687:      summary: æ›´æ–°è®¢å•çŠ¶æ€
1688:      operationId: updateOrderStatus
1689:      security:
1690:        - AdminSessionAuth: []
1691:      parameters:
1692:        - name: id
1693:          in: path
1694:          required: true
1695:          schema:
1696:            type: string
1697:          description: è®¢å•ID
1698:      requestBody:
1699:        required: true
1700:        content:
1701:          application/json:
1702:            schema:
1703:              type: object
1704:              required:
1705:                - status
1706:              properties:
1707:                status:
1708:                  type: string
1709:                  enum: [pending,pending_claim, available,created, claimed, awarded, dispatched, in_transit, delivered, cancelled]
1710:                  example: "cancelled"
1711:      responses:
1712:        '200':
1713:          description: çŠ¶æ€æ›´æ–°æˆåŠŸ
1714:          content:
1715:            application/json:
1716:              schema:
1717:                type: object
1718:                properties:
1719:                  success:
1720:                    type: boolean
1721:                    example: true
1722:                  message:
1723:                    type: string
1724:                    example: "è®¢å•çŠ¶æ€å·²æ›´æ–°"
1725:        '400':
1726:          description: çŠ¶æ€å€¼æ— æ•ˆ
1727:          content:
1728:            application/json:
1729:              schema:
1730:                $ref: '#/components/schemas/ErrorResponse'
1731:        '404':
1732:          $ref: '#/components/responses/NotFoundError'
1733:
1734:  /api/public/orders/{id}:
1735:    get:
1736:      tags:
1737:        - public
1738:      summary: è·å–å…¬å¼€è®¢å•ä¿¡æ¯
1739:      operationId: getPublicOrder
1740:      parameters:
1741:        - name: id
1742:          in: path
1743:          required: true
1744:          schema:
1745:            type: string
1746:          description: è®¢å•IDæˆ–è·Ÿè¸ªå·
1747:      responses:
1748:        '200':
1749:          description: è®¢å•ä¿¡æ¯
1750:          content:
1751:            application/json:
1752:              schema:
1753:                type: object
1754:                properties:
1755:                  success:
1756:                    type: boolean
1757:                    example: true
1758:                  message:
1759:                    type: string
1760:                    example: "è·å–æˆåŠŸ"
1761:                  data:
1762:                    $ref: '#/components/schemas/OrderItem'
1763:        '404':
1764:          $ref: '#/components/responses/NotFoundError'
1765:
1766:  /api/customer/orders:
1767:    get:
1768:      tags:
1769:        - customer-order
1770:      summary: è·å–å®¢æˆ·è®¢å•åˆ—è¡¨
1771:      operationId: listCustomerOrders
1772:      security:
1773:        - TenantSessionAuth: []
1774:      parameters:
1775:        - name: page
1776:          in: query
1777:          required: false
1778:          schema:
1779:            type: integer
1780:            minimum: 1
1781:            default: 1
1782:          description: é¡µç 
1783:        - name: limit
1784:          in: query
1785:          required: false
1786:          schema:
1787:            type: integer
1788:            minimum: 1
1789:            maximum: 100
1790:            default: 10
1791:          description: æ¯é¡µæ•°é‡
1792:        - name: search
1793:          in: query
1794:          required: false
1795:          schema:
1796:            type: string
1797:          description: æœç´¢å…³é”®è¯
1798:        - name: status
1799:          in: query
1800:          required: false
1801:          schema:
1802:            type: string
1803:            enum: [created, pending, pending_claim, claimed, quoted, awarded, dispatched, in_transit, delivered, cancelled]
1804:          description: è®¢å•çŠ¶æ€è¿‡æ»¤
1805:      responses:
1806:        '200':
1807:          description: å®¢æˆ·è®¢å•åˆ—è¡¨
1808:          content:
1809:            application/json:
1810:              schema:
1811:                $ref: '#/components/schemas/OrderListResponse'
1812:        '401':
1813:          $ref: '#/components/responses/UnauthorizedError'
1814:
1815:    post:
1816:      tags:
1817:        - customer-order
1818:      summary: åˆ›å»ºå®¢æˆ·è®¢å•
1819:      operationId: createCustomerOrder
1820:      security:
1821:        - TenantSessionAuth: []
1822:      requestBody:
1823:        required: true
1824:        content:
1825:          application/json:
1826:            schema:
1827:              $ref: '#/components/schemas/CreateOrderRequest'
1828:      responses:
1829:        '201':
1830:          description: è®¢å•åˆ›å»ºæˆåŠŸ
1831:          content:
1832:            application/json:
1833:              schema:
1834:                type: object
1835:                properties:
1836:                  success:
1837:                    type: boolean
1838:                    example: true
1839:                  message:
1840:                    type: string
1841:                    example: "è®¢å•åˆ›å»ºæˆåŠŸ"
1842:                  data:
1843:                    type: object
1844:                    properties:
1845:                      order_id:
1846:                        type: string
1847:                        example: "ORD-20260205-001"
1848:                      status:
1849:                        type: string
1850:                        example: "pending"
1851:        '400':
1852:          $ref: '#/components/responses/BadRequestError'
1853:        '401':
1854:          $ref: '#/components/responses/UnauthorizedError'
1855:
1856:  /api/customer/orders/{id}:
1857:    get:
1858:      tags:
1859:        - customer-order
1860:      summary: è·å–å®¢æˆ·è®¢å•è¯¦æƒ…
1861:      operationId: getCustomerOrder
1862:      security:
1863:        - TenantSessionAuth: []
1864:      parameters:
1865:        - name: id
1866:          in: path
1867:          required: true
1868:          schema:
1869:            type: integer
1870:          description: è®¢å•ID
1871:      responses:
1872:        '200':
1873:          description: è®¢å•è¯¦æƒ…
1874:          content:
1875:            application/json:
1876:              schema:
1877:                type: object
1878:                properties:
1879:                  success:
1880:                    type: boolean
1881:                    example: true
1882:                  message:
1883:                    type: string
1884:                    example: "è·å–æˆåŠŸ"
1885:                  data:
1886:                    $ref: '#/components/schemas/OrderItem'
1887:        '401':
1888:          $ref: '#/components/responses/UnauthorizedError'
1889:        '404':
1890:          $ref: '#/components/responses/NotFoundError'
1891:
1892:  /api/carrier/orders:
1893:    get:
1894:      tags:
1895:        - carrier-order
1896:      summary: è·å–å¯è®¤é¢†çš„è®¢å•åˆ—è¡¨ï¼ˆçŠ¶æ€=pending_claim)
1897:      operationId: listCarrierOrders
1898:      security:
1899:        - TenantSessionAuth: []
1900:      parameters:
1901:        - name: page
1902:          in: query
1903:          required: false
1904:          schema:
1905:            type: integer
1906:            minimum: 1
1907:            default: 1
1908:          description: é¡µç 
1909:        - name: limit
1910:          in: query
1911:          required: false
1912:          schema:
1913:            type: integer
1914:            minimum: 1
1915:            maximum: 100
1916:            default: 10
1917:          description: æ¯é¡µè®°å½•æ•°
1918:        - name: status
1919:          in: query
1920:          required: false
1921:          schema:
1922:            type: string
1923:          description: è®¢å•çŠ¶æ€ç­›é€‰
1924:        - name: search
1925:          in: query
1926:          required: false
1927:          schema:
1928:            type: string
1929:          description: æœç´¢å…³é”®è¯
1930:      responses:
1931:        '200':
1932:          description: å¯è®¤é¢†è®¢å•åˆ—è¡¨
1933:          content:
1934:            application/json:
1935:              schema:
1936:                $ref: '#/components/schemas/OrderListResponse'
1937:        '401':
1938:          $ref: '#/components/responses/UnauthorizedError'
1939:
1940:  /api/carrier/orders/{order_id}/claim:
1941:    put:
1942:      tags:
1943:        - carrier-order
1944:      summary: æ‰¿è¿å•†è®¤é¢†è®¢å•
1945:      operationId: claimCarrierOrder
1946:      security:
1947:        - TenantSessionAuth: []
1948:      parameters:
1949:        - name: order_id
1950:          in: path
1951:          required: true
1952:          schema:
1953:            type: integer
1954:          description: è®¢å•å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ tracking_number æˆ–ç³»ç»Ÿ IDï¼‰
1955:      responses:
1956:        '200':
1957:          description: è®¤é¢†æˆåŠŸï¼Œè¿”å›æ›´æ–°åçš„å®Œæ•´è®¢å•ä¿¡æ¯
1958:          content:
1959:            application/json:
1960:              schema:
1961:                $ref: '#/components/schemas/OrderItem'
1962:        '401':
1963:          $ref: '#/components/responses/UnauthorizedError'
1964:        '403':
1965:          $ref: '#/components/responses/ForbiddenError'
1966:        '404':
1967:          $ref: '#/components/responses/NotFoundError'
1968:
1969:  /api/carrier/orders/{order_id}/complete:
1970:    put:
1971:      tags:
1972:        - carrier-order
1973:      summary: æ‰¿è¿å•†å®Œæˆè®¢å•
1974:      operationId: completeCarrierOrder
1975:      security:
1976:        - TenantSessionAuth: []
1977:      parameters:
1978:        - name: order_id
1979:          in: path
1980:          required: true
1981:          schema:
1982:            type: integer
1983:          description: è®¢å•å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ tracking_number æˆ–ç³»ç»Ÿ IDï¼‰
1984:      responses:
1985:        '200':
1986:          description: å®ŒæˆæˆåŠŸï¼Œè¿”å›æ›´æ–°åçš„å®Œæ•´è®¢å•ä¿¡æ¯
1987:          content:
1988:            application/json:
1989:              schema:
1990:                $ref: '#/components/schemas/OrderItem'
1991:        '401':
1992:          $ref: '#/components/responses/UnauthorizedError'
1993:        '403':
1994:          $ref: '#/components/responses/ForbiddenError'
1995:        '404':
1996:          $ref: '#/components/responses/NotFoundError'
1997:
1998:  /api/carrier/orders/{order_id}/start-delivery:
1999:    put:
2000:      tags:
2001:        - carrier-order
2002:      summary: æ‰¿è¿å•†å¼€å§‹é…é€
2003:      operationId: startCarrierDelivery
2004:      security:
2005:        - TenantSessionAuth: []
2006:      parameters:
2007:        - name: order_id
2008:          in: path
2009:          required: true
2010:          schema:
2011:            type: integer
2012:          description: è®¢å•å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ tracking_number æˆ–ç³»ç»Ÿ IDï¼‰
2013:      responses:
2014:        '200':
2015:          description: å¼€å§‹é…é€æˆåŠŸï¼Œè¿”å›æ›´æ–°åçš„å®Œæ•´è®¢å•ä¿¡æ¯
2016:          content:
2017:            application/json:
2018:              schema:
2019:                $ref: '#/components/schemas/OrderItem'
2020:        '401':
2021:          $ref: '#/components/responses/UnauthorizedError'
2022:        '403':
2023:          $ref: '#/components/responses/ForbiddenError'
2024:        '404':
2025:          $ref: '#/components/responses/NotFoundError'
2026:
2027:  /api/carrier/orders/{order_id}/quote:
2028:    post:
2029:      tags:
2030:        - carrier-order
2031:      summary: æ‰¿è¿å•†ä¸ºè®¢å•æŠ¥ä»·
2032:      operationId: submitCarrierQuote
2033:      security:
2034:        - TenantSessionAuth: []
2035:      parameters:
2036:        - name: order_id
2037:          in: path
2038:          required: true
2039:          schema:
2040:            type: integer
2041:          description: è®¢å•å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ tracking_number æˆ–ç³»ç»Ÿ IDï¼‰
2042:      requestBody:
2043:        required: true
2044:        content:
2045:          application/json:
2046:            schema:
2047:              $ref: '#/components/schemas/QuoteRequest'
2048:      responses:
2049:        '200':
2050:          description: æŠ¥ä»·æˆåŠŸï¼Œè¿”å›åˆ›å»ºçš„æŠ¥ä»·ä¿¡æ¯
2051:          content:
2052:            application/json:
2053:              schema:
2054:                type: object
2055:                properties:
2056:                  success:
2057:                    type: boolean
2058:                    example: true
2059:                  message:
2060:                    type: string
2061:                    example: "æŠ¥ä»·æˆåŠŸ"
2062:                  data:
2063:                    $ref: '#/components/schemas/QuoteItem'
2064:        '400':
2065:          $ref: '#/components/responses/BadRequestError'
2066:        '401':
2067:          $ref: '#/components/responses/UnauthorizedError'
2068:        '403':
2069:          $ref: '#/components/responses/ForbiddenError'
2070:        '404':
2071:          $ref: '#/components/responses/NotFoundError'
2072:
2073:  /api/carrier/quotes:
2074:    get:
2075:      tags:
2076:        - carrier-order
2077:      summary: è·å–æˆ‘çš„æŠ¥ä»·åˆ—è¡¨
2078:      operationId: listCarrierQuotes
2079:      security:
2080:        - TenantSessionAuth: []
2081:      parameters:
2082:        - name: page
2083:          in: query
2084:          required: false
2085:          schema:
2086:            type: integer
2087:            minimum: 1
2088:            default: 1
2089:          description: é¡µç 
2090:        - name: limit
2091:          in: query
2092:          required: false
2093:          schema:
2094:            type: integer
2095:            minimum: 1
2096:            maximum: 100
2097:            default: 10
2098:          description: æ¯é¡µè®°å½•æ•°
2099:        - name: status
2100:          in: query
2101:          required: false
2102:          schema:
2103:            type: string
2104:            enum: [pending, awarded, rejected, expired]
2105:          description: æŠ¥ä»·çŠ¶æ€ç­›é€‰
2106:        - name: order_id
2107:          in: query
2108:          required: false
2109:          schema:
2110:            type: string
2111:          description: è®¢å•IDè¿‡æ»¤
2112:      responses:
2113:        '200':
2114:          description: æ‰¿è¿å•†æŠ¥ä»·åˆ—è¡¨
2115:          content:
2116:            application/json:
2117:              schema:
2118:                type: object
2119:                properties:
2120:                  success:
2121:                    type: boolean
2122:                    example: true
2123:                  message:
2124:                    type: string
2125:                    example: "è·å–æˆåŠŸ"
2126:                  data:
2127:                    type: object
2128:                    properties:
2129:                      quotes:
2130:                        type: array
2131:                        items:
2132:                          $ref: '#/components/schemas/QuoteItem'
2133:                      pagination:
2134:                        $ref: '#/components/schemas/PaginationInfo'
2135:        '401':
2136:          $ref: '#/components/responses/UnauthorizedError'
2137:
2138:  # æ–°å¢ï¼šå¹³å°å®šä»·è§„åˆ™API
2139:  /api/admin/pricing/rules:
2140:    get:
2141:      tags:
2142:        - admin-pricing
2143:      summary: è·å–å¹³å°å®šä»·è§„åˆ™åˆ—è¡¨
2144:      operationId: listPlatformPricingRules
2145:      security:
2146:        - AdminSessionAuth: []
2147:      parameters:
2148:        - name: page
2149:          in: query
2150:          required: false
2151:          schema:
2152:            type: integer
2153:            minimum: 1
2154:            default: 1
2155:          description: é¡µç 
2156:        - name: limit
2157:          in: query
2158:          required: false
2159:          schema:
2160:            type: integer
2161:            minimum: 1
2162:            maximum: 100
2163:            default: 10
2164:          description: æ¯é¡µæ•°é‡
2165:        - name: active
2166:          in: query
2167:          required: false
2168:          schema:
2169:            type: boolean
2170:          description: æ´»åŠ¨çŠ¶æ€è¿‡æ»¤
2171:        - name: search
2172:          in: query
2173:          required: false
2174:          schema:
2175:            type: string
2176:          description: æœç´¢å…³é”®è¯
2177:      responses:
2178:        '200':
2179:          description: å¹³å°å®šä»·è§„åˆ™åˆ—è¡¨
2180:          content:
2181:            application/json:
2182:              schema:
2183:                $ref: '#/components/schemas/PricingRuleListResponse'
2184:        '401':
2185:          $ref: '#/components/responses/UnauthorizedError'
2186:
2187:    post:
2188:      tags:
2189:        - admin-pricing
2190:      summary: åˆ›å»ºå¹³å°å®šä»·è§„åˆ™
2191:      operationId: createPlatformPricingRule
2192:      security:
2193:        - AdminSessionAuth: []
2194:      requestBody:
2195:        required: true
2196:        content:
2197:          application/json:
2198:            schema:
2199:              $ref: '#/components/schemas/PlatformPricingRuleInput'
2200:      responses:
2201:        '201':
2202:          description: å¹³å°å®šä»·è§„åˆ™åˆ›å»ºæˆåŠŸ
2203:          content:
2204:            application/json:
2205:              schema:
2206:                $ref: '#/components/schemas/SinglePricingRuleResponse'
2207:        '400':
2208:          $ref: '#/components/responses/BadRequestError'
2209:        '401':
2210:          $ref: '#/components/responses/UnauthorizedError'
2211:
2212:  /api/admin/pricing/rules/{id}:
2213:    get:
2214:      tags:
2215:        - admin-pricing
2216:      summary: è·å–å•ä¸ªå¹³å°å®šä»·è§„åˆ™
2217:      operationId: getPlatformPricingRule
2218:      security:
2219:        - AdminSessionAuth: []
2220:      parameters:
2221:        - name: id
2222:          in: path
2223:          required: true
2224:          schema:
2225:            type: integer
2226:          description: å®šä»·è§„åˆ™ID
2227:      responses:
2228:        '200':
2229:          description: å¹³å°å®šä»·è§„åˆ™è¯¦æƒ…
2230:          content:
2231:            application/json:
2232:              schema:
2233:                $ref: '#/components/schemas/SinglePricingRuleResponse'
2234:        '401':
2235:          $ref: '#/components/responses/UnauthorizedError'
2236:        '404':
2237:          $ref: '#/components/responses/NotFoundError'
2238:
2239:    put:
2240:      tags:
2241:        - admin-pricing
2242:      summary: æ›´æ–°å¹³å°å®šä»·è§„åˆ™
2243:      operationId: updatePlatformPricingRule
2244:      security:
2245:        - AdminSessionAuth: []
2246:      parameters:
2247:        - name: id
2248:          in: path
2249:          required: true
2250:          schema:
2251:            type: integer
2252:          description: å®šä»·è§„åˆ™ID
2253:      requestBody:
2254:        required: true
2255:        content:
2256:          application/json:
2257:            schema:
2258:              $ref: '#/components/schemas/PlatformPricingRuleInput'
2259:      responses:
2260:        '200':
2261:          description: å¹³å°å®šä»·è§„åˆ™æ›´æ–°æˆåŠŸ
2262:          content:
2263:            application/json:
2264:              schema:
2265:                $ref: '#/components/schemas/SinglePricingRuleResponse'
2266:        '400':
2267:          $ref: '#/components/responses/BadRequestError'
2268:        '401':
2269:          $ref: '#/components/responses/UnauthorizedError'
2270:        '404':
2271:          $ref: '#/components/responses/NotFoundError'
2272:
2273:    delete:
2274:      tags:
2275:        - admin-pricing
2276:      summary: åˆ é™¤å¹³å°å®šä»·è§„åˆ™
2277:      operationId: deletePlatformPricingRule
2278:      security:
2279:        - AdminSessionAuth: []
2280:      parameters:
2281:        - name: id
2282:          in: path
2283:          required: true
2284:          schema:
2285:            type: integer
2286:          description: å®šä»·è§„åˆ™ID
2287:      responses:
2288:        '200':
2289:          description: å¹³å°å®šä»·è§„åˆ™åˆ é™¤æˆåŠŸ
2290:          content:
2291:            application/json:
2292:              schema:
2293:                $ref: '#/components/schemas/SuccessResponse'
2294:        '401':
2295:          $ref: '#/components/responses/UnauthorizedError'
2296:        '404':
2297:          $ref: '#/components/responses/NotFoundError'
2298:
2299:  # æ–°å¢ï¼šæ‰¿è¿å•†å®šä»·é…ç½®API
2300:  /api/carrier/pricing/configs:
2301:    get:
2302:      tags:
2303:        - carrier-pricing
2304:      summary: è·å–æ‰¿è¿å•†å®šä»·é…ç½®åˆ—è¡¨
2305:      operationId: listCarrierPricingConfigs
2306:      security:
2307:        - TenantSessionAuth: []
2308:      parameters:
2309:        - name: page
2310:          in: query
2311:          required: false
2312:          schema:
2313:            type: integer
2314:            minimum: 1
2315:            default: 1
2316:          description: é¡µç 
2317:        - name: limit
2318:          in: query
2319:          required: false
2320:          schema:
2321:            type: integer
2322:            minimum: 1
2323:            maximum: 100
2324:            default: 10
2325:          description: æ¯é¡µè®°å½•æ•°
2326:        - name: active
2327:          in: query
2328:          required: false
2329:          schema:
2330:            type: boolean
2331:          description: æ´»åŠ¨çŠ¶æ€è¿‡æ»¤
2332:        - name: search
2333:          in: query
2334:          required: false
2335:          schema:
2336:            type: string
2337:          description: æœç´¢å…³é”®è¯
2338:      responses:
2339:        '200':
2340:          description: æ‰¿è¿å•†å®šä»·é…ç½®åˆ—è¡¨
2341:          content:
2342:            application/json:
2343:              schema:
2344:                $ref: '#/components/schemas/PricingConfigListResponse'
2345:        '401':
2346:          $ref: '#/components/responses/UnauthorizedError'
2347:
2348:    post:
2349:      tags:
2350:        - carrier-pricing
2351:      summary: åˆ›å»ºæ‰¿è¿å•†å®šä»·é…ç½®
2352:      operationId: createCarrierPricingConfig
2353:      security:
2354:        - TenantSessionAuth: []
2355:      requestBody:
2356:        required: true
2357:        content:
2358:          application/json:
2359:            schema:
2360:              $ref: '#/components/schemas/CarrierPricingConfigInput'
2361:      responses:
2362:        '201':
2363:          description: æ‰¿è¿å•†å®šä»·é…ç½®åˆ›å»ºæˆåŠŸ
2364:          content:
2365:            application/json:
2366:              schema:
2367:                $ref: '#/components/schemas/SinglePricingConfigResponse'
2368:        '400':
2369:          $ref: '#/components/responses/BadRequestError'
2370:        '401':
2371:          $ref: '#/components/responses/UnauthorizedError'
2372:
2373:  /api/carrier/pricing/configs/{id}:
2374:    get:
2375:      tags:
2376:        - carrier-pricing
2377:      summary: è·å–å•ä¸ªæ‰¿è¿å•†å®šä»·é…ç½®
2378:      operationId: getCarrierPricingConfig
2379:      security:
2380:        - TenantSessionAuth: []
2381:      parameters:
2382:        - name: id
2383:          in: path
2384:          required: true
2385:          schema:
2386:            type: integer
2387:          description: å®šä»·é…ç½®ID
2388:      responses:
2389:        '200':
2390:          description: æ‰¿è¿å•†å®šä»·é…ç½®è¯¦æƒ…
2391:          content:
2392:            application/json:
2393:              schema:
2394:                $ref: '#/components/schemas/SinglePricingConfigResponse'
2395:        '401':
2396:          $ref: '#/components/responses/UnauthorizedError'
2397:        '404':
2398:          $ref: '#/components/responses/NotFoundError'
2399:
2400:    put:
2401:      tags:
2402:        - carrier-pricing
2403:      summary: æ›´æ–°æ‰¿è¿å•†å®šä»·é…ç½®
2404:      operationId: updateCarrierPricingConfig
2405:      security:
2406:        - TenantSessionAuth: []
2407:      parameters:
2408:        - name: id
2409:          in: path
2410:          required: true
2411:          schema:
2412:            type: integer
2413:          description: å®šä»·é…ç½®ID
2414:      requestBody:
2415:        required: true
2416:        content:
2417:          application/json:
2418:            schema:
2419:              $ref: '#/components/schemas/CarrierPricingConfigInput'
2420:      responses:
2421:        '200':
2422:          description: æ‰¿è¿å•†å®šä»·é…ç½®æ›´æ–°æˆåŠŸ
2423:          content:
2424:            application/json:
2425:              schema:
2426:                $ref: '#/components/schemas/SinglePricingConfigResponse'
2427:        '400':
2428:          $ref: '#/components/responses/BadRequestError'
2429:        '401':
2430:          $ref: '#/components/responses/UnauthorizedError'
2431:        '404':
2432:          $ref: '#/components/responses/NotFoundError'
2433:
2434:    delete:
2435:      tags:
2436:        - carrier-pricing
2437:      summary: åˆ é™¤æ‰¿è¿å•†å®šä»·é…ç½®
2438:      operationId: deleteCarrierPricingConfig
2439:      security:
2440:        - TenantSessionAuth: []
2441:      parameters:
2442:        - name: id
2443:          in: path
2444:          required: true
2445:          schema:
2446:            type: integer
2447:          description: å®šä»·é…ç½®ID
2448:      responses:
2449:        '200':
2450:          description: æ‰¿è¿å•†å®šä»·é…ç½®åˆ é™¤æˆåŠŸ
2451:          content:
2452:            application/json:
2453:              schema:
2454:                $ref: '#/components/schemas/SuccessResponse'
2455:        '401':
2456:          $ref: '#/components/responses/UnauthorizedError'
2457:        '404':
2458:          $ref: '#/components/responses/NotFoundError'
