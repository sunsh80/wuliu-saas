# æ•°å­ªæ™ºè¿æ— äººç‰©æµ SaaS å¹³å° - å®Œæ•´é¡¹ç›®æ–‡ä»¶æ ‘å›¾

**ç”Ÿæˆæ—¶é—´**: 2026-02-21  
**é¡¹ç›®ç‰ˆæœ¬**: 1.0.0

---

## ğŸ“ é¡¹ç›®æ ¹ç›®å½•ç»“æ„

```
wuliu_project/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                          # é¡¹ç›®ä¸»æ–‡æ¡£ï¼ˆé¡¹ç›®è¯´æ˜ã€è¿è¡ŒæŒ‡å—ï¼‰
â”œâ”€â”€ ğŸ“„ DATABASE_CONFIG_MIGRATION.md       # æ•°æ®åº“é…ç½®åŒ–æ”¹é€ æŠ¥å‘Š
â”œâ”€â”€ ğŸ“„ CLEANUP_2026-02-21.md              # é¡¹ç›®æ¸…ç†æŠ¥å‘Š
â”œâ”€â”€ ğŸ“„ ai-comment-guidelines.md           # AI æ³¨é‡Šè§„èŒƒ
â”œâ”€â”€ ğŸ“„ ANCHOR_POINT.md                    # é”šç‚¹è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ db-field-mapping.json              # æ•°æ®åº“å­—æ®µæ˜ å°„
â”œâ”€â”€ ğŸ“„ package.json                       # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ nodemon.json                       # å¼€å‘ç›‘æ§é…ç½®
â”œâ”€â”€ ğŸ“„ project.config.json                # å°ç¨‹åºé¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ .ai-config.json                    # AI é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .editorconfig                      # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ ğŸ“„ .gitignore                         # Git å¿½ç•¥è§„åˆ™
â”‚
â”œâ”€â”€ ğŸ› ï¸ è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ auto_push.bat / .ps1              # è‡ªåŠ¨æ¨é€è„šæœ¬
â”‚   â”œâ”€â”€ push_changes.bat / .ps1           # æ¨é€å˜æ›´è„šæœ¬
â”‚   â”œâ”€â”€ launch_scripts_manager.bat / .ps1 # è„šæœ¬ç®¡ç†å™¨å¯åŠ¨
â”‚   â”œâ”€â”€ open_scripts_folder.bat           # æ‰“å¼€è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ setup-docs.bat                    # æ–‡æ¡£è®¾ç½®è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ backend/                           # ã€åç«¯æœåŠ¡ã€‘Node.js + Express + SQLite
â”œâ”€â”€ ğŸ“‚ web/                               # ã€å‰ç«¯ Webã€‘PC ç®¡ç†åå° + ç§Ÿæˆ·ç«¯ + å®¢æˆ·ç«¯
â”œâ”€â”€ ğŸ“‚ wx-program/                        # ã€å¾®ä¿¡å°ç¨‹åºã€‘ç§»åŠ¨ç«¯å°ç¨‹åº
â”œâ”€â”€ ğŸ“‚ scripts/                           # ã€è¿ç»´è„šæœ¬ã€‘éƒ¨ç½²å’Œç»´æŠ¤è„šæœ¬
â”œâ”€â”€ ğŸ“‚ docs/                              # ã€é¡¹ç›®æ–‡æ¡£ã€‘API æ–‡æ¡£ã€æµç¨‹å›¾ç­‰
â”œâ”€â”€ ğŸ“‚ logs/                              # ã€æ—¥å¿—ç›®å½•ã€‘è¿è¡Œæ—¥å¿—
â””â”€â”€ ğŸ“‚ node_modules/                      # ã€ä¾èµ–åŒ…ã€‘npm åŒ…ï¼ˆå·²å¿½ç•¥ï¼‰
```

---

## ğŸ“‚ backend/ åç«¯æœåŠ¡è¯¦ç»†ç»“æ„

```
backend/
â”‚
â”œâ”€â”€ ğŸš€ æ ¸å¿ƒå…¥å£
â”‚   â”œâ”€â”€ server.js                         # ã€ä¸»å…¥å£ã€‘Express æœåŠ¡å™¨å¯åŠ¨ã€ä¸­é—´ä»¶æ³¨å†Œã€è·¯ç”±æ³¨å†Œ
â”‚   â”œâ”€â”€ package.json                      # ã€ä¾èµ–é…ç½®ã€‘npm åŒ…ç‰ˆæœ¬ã€è„šæœ¬å‘½ä»¤
â”‚   â”œâ”€â”€ .env                              # ã€ç¯å¢ƒå˜é‡ã€‘ç«¯å£ã€å¯†é’¥ã€æ•°æ®åº“è·¯å¾„ã€API å¯†é’¥
â”‚   â””â”€â”€ openapi.yaml                      # ã€API è§„èŒƒã€‘OpenAPI 3.0 å®šä¹‰æ‰€æœ‰ API ç«¯ç‚¹
â”‚
â”œâ”€â”€ ğŸ“‚ api/                               # ã€API å±‚ã€‘OpenAPI å¤„ç†å™¨å’Œè·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ handlers/                      # ã€API å¤„ç†å™¨ã€‘OpenAPI ç»Ÿä¸€å¤„ç†å™¨ï¼ˆæŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç±»ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ healthCheck.js                # å¥åº·æ£€æŸ¥æ¥å£ (/health)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ admin/                     # ã€ç®¡ç†å‘˜ç«¯ã€‘åå°ç®¡ç†åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/                  # è®¤è¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adminLogin.js         # ç®¡ç†å‘˜ç™»å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adminLogout.js        # ç®¡ç†å‘˜ç™»å‡º
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getAdminProfile.js    # è·å–ç®¡ç†å‘˜ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tenants/               # ç§Ÿæˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listPendingTenants.js # å¾…å®¡æ ¸ç§Ÿæˆ·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listApprovedTenants.js# å·²å®¡æ ¸ç§Ÿæˆ·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ approveTenant.js      # å®¡æ ¸é€šè¿‡ç§Ÿæˆ·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rejectTenant.js       # æ‹’ç»ç§Ÿæˆ·ç”³è¯·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ listRejectedTenants.js# å·²æ‹’ç»ç§Ÿæˆ·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tenant-management/     # ç§Ÿæˆ·ç®¡ç†æ‰©å±•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listAllTenants.js     # æ‰€æœ‰ç§Ÿæˆ·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getTenantById.js      # è·å–ç§Ÿæˆ·è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateTenantBasicInfo.js    # æ›´æ–°ç§Ÿæˆ·åŸºæœ¬ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateTenantContactInfo.js  # æ›´æ–°ç§Ÿæˆ·è”ç³»ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateTenantFinancialInfo.js# æ›´æ–°ç§Ÿæˆ·è´¢åŠ¡ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ addTenantVehicle.js         # æ·»åŠ ç§Ÿæˆ·è½¦è¾†
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ user/                  # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ createAdminUser.js    # åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ order/                 # è®¢å•ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listAdminOrders.js    # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ updateOrderStatus.js  # æ›´æ–°è®¢å•çŠ¶æ€
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ vehicles/              # è½¦è¾†ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listAllVehicles.js    # æ‰€æœ‰è½¦è¾†åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ searchVehicles.js     # æœç´¢è½¦è¾†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getVehicleById.js     # è·å–è½¦è¾†è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ vehicle-models/        # è½¦å‹åº“ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adminListVehicleModels.js  # è½¦å‹åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createVehicleModel.js      # åˆ›å»ºè½¦å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateVehicleModel.js      # æ›´æ–°è½¦å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ deleteVehicleModel.js      # åˆ é™¤è½¦å‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getVehicleModel.js         # è·å–è½¦å‹è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ vehicle-tracking/      # è½¦è¾†è¿½è¸ª
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getVehiclePositions.js     # è·å–è½¦è¾†ä½ç½®å†å²
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getLatestPositions.js      # è·å–æœ€æ–°ä½ç½®
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ violations/            # è¿è§„ç®¡ç†ï¼ˆé£æ§ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listViolations.js     # è¿è§„åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getViolationById.js   # è·å–è¿è§„è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createViolation.js    # åˆ›å»ºè¿è§„è®°å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateViolation.js    # æ›´æ–°è¿è§„è®°å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ deleteViolation.js    # åˆ é™¤è¿è§„è®°å½•
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getViolationStats.js  # è¿è§„ç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pricing/               # å¹³å°å®šä»·ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listPlatformPricingRules.js   # å®šä»·è§„åˆ™åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getPlatformPricingRule.js     # è·å–å®šä»·è§„åˆ™
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createPlatformPricingRule.js  # åˆ›å»ºå®šä»·è§„åˆ™
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updatePlatformPricingRule.js  # æ›´æ–°å®šä»·è§„åˆ™
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ deletePlatformPricingRule.js  # åˆ é™¤å®šä»·è§„åˆ™
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ commissions/           # ä½£é‡‘ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listCommissionRecords.js      # ä½£é‡‘è®°å½•åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getCommissionConfig.js        # è·å–ä½£é‡‘é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateCommissionConfig.js     # æ›´æ–°ä½£é‡‘é…ç½®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ updateCommissionRecordStatus.js# æ›´æ–°ä½£é‡‘çŠ¶æ€
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ reports/               # æŠ¥è¡¨ç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getOverviewStats.js   # æ¦‚è§ˆç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ settings/              # ã€ç³»ç»Ÿé…ç½®ã€‘é…ç½®ç®¡ç† â­æ–°å¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listSystemSettings.js # è·å–ç³»ç»Ÿé…ç½®åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateSystemSetting.js# æ›´æ–°ç³»ç»Ÿé…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listServiceProviders.js# è·å–æœåŠ¡æä¾›å•†åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateServiceProvider.js# æ›´æ–°æœåŠ¡æä¾›å•†é…ç½®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ setConfigValue.js     # å¿«æ·è®¾ç½®é…ç½®å€¼
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ åœé ç‚¹ç®¡ç†ï¼ˆç›´æ¥ä½äº admin/ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ adminCreateStopPoint.js     # åˆ›å»ºåœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ adminListStopPoints.js      # åœé ç‚¹åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ adminGetStopPoint.js        # è·å–åœé ç‚¹è¯¦æƒ…
â”‚   â”‚   â”‚       â”œâ”€â”€ adminUpdateStopPoint.js     # æ›´æ–°åœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ adminDeleteStopPoint.js     # åˆ é™¤åœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ adminListPendingStopPoints.js# å¾…å®¡æ ¸åœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ adminApproveStopPoint.js    # å®¡æ ¸åœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ adminBatchApproveStopPoints.js# æ‰¹é‡å®¡æ ¸
â”‚   â”‚   â”‚       â”œâ”€â”€ adminBatchImportStopPoints.js # æ‰¹é‡å¯¼å…¥
â”‚   â”‚   â”‚       â””â”€â”€ adminGetApprovalStats.js    # å®¡æ ¸ç»Ÿè®¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tenant-web/                # ã€ç§Ÿæˆ·ç«¯ã€‘æ‰¿è¿å•†/å®¢æˆ· Web ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/                  # è®¤è¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tenantLogin.js        # ç§Ÿæˆ·ç™»å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tenantLogout.js       # ç§Ÿæˆ·ç™»å‡º
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getTenantProfile.js   # è·å–ç§Ÿæˆ·ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ order/                 # è®¢å•ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listTenantOrders.js   # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getTenantOrder.js     # è®¢å•è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ updateOrderStatus.js  # æ›´æ–°è®¢å•çŠ¶æ€
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ vehicles/              # è½¦è¾†ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listVehicles.js       # è½¦è¾†åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createVehicle.js      # æ·»åŠ è½¦è¾†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateVehicle.js      # æ›´æ–°è½¦è¾†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ deleteVehicle.js      # åˆ é™¤è½¦è¾†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getVehicle.js         # è·å–è½¦è¾†è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ vehicle-models/        # è½¦å‹åº“
â”‚   â”‚   â”‚       â””â”€â”€ listAvailableVehicleModels.js# å¯ç”¨è½¦å‹åˆ—è¡¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ carrier/                   # ã€æ‰¿è¿å•†ç«¯ã€‘æ‰¿è¿å•†åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/                  # è®¤è¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ carrierLogin.js       # æ‰¿è¿å•†ç™»å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ carrierLogout.js      # æ‰¿è¿å•†ç™»å‡º
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getCarrierProfile.js  # è·å–æ‰¿è¿å•†ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ order/                 # è®¢å•ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listCarrierOrders.js  # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ claimCarrierOrder.js  # æŠ¢å•/æ¥å•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ submitCarrierQuote.js # æäº¤æŠ¥ä»·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ startDelivery.js      # å¼€å§‹é…é€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ completeCarrierOrder.js# å®Œæˆè®¢å•
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ addOrderAddons.js     # æ·»åŠ è®¢å•é™„åŠ æœåŠ¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pricing/               # å®šä»·é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ listCarrierPricingConfigs.js   # å®šä»·é…ç½®åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getCarrierPricingConfig.js     # è·å–å®šä»·é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createCarrierPricingConfig.js  # åˆ›å»ºå®šä»·é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ updateCarrierPricingConfig.js  # æ›´æ–°å®šä»·é…ç½®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ deleteCarrierPricingConfig.js  # åˆ é™¤å®šä»·é…ç½®
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ åœé ç‚¹ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ carrierListStopPoints.js       # åœé ç‚¹åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ carrierGetStopPoint.js         # è·å–åœé ç‚¹è¯¦æƒ…
â”‚   â”‚   â”‚       â”œâ”€â”€ carrierCreateStopPoint.js      # åˆ›å»ºåœé ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ carrierUpdateStopPoint.js      # æ›´æ–°åœé ç‚¹
â”‚   â”‚   â”‚       â””â”€â”€ carrierDeleteStopPoint.js      # åˆ é™¤åœé ç‚¹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ customer/                  # ã€å®¢æˆ·ç«¯ã€‘å®¢æˆ·åŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ order/                 # è®¢å•ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ createCustomerOrder.js# åˆ›å»ºè®¢å•
â”‚   â”‚   â”‚       â”œâ”€â”€ listCustomerOrders.js # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ getCustomerOrder.js   # è®¢å•è¯¦æƒ…
â”‚   â”‚   â”‚       â”œâ”€â”€ updateCustomerOrder.js# æ›´æ–°è®¢å•
â”‚   â”‚   â”‚       â”œâ”€â”€ deleteCustomerOrder.js# åˆ é™¤è®¢å•
â”‚   â”‚   â”‚       â”œâ”€â”€ awardOrderToCarrier.js# åˆ†é…è®¢å•ç»™æ‰¿è¿å•†
â”‚   â”‚   â”‚       â”œâ”€â”€ getOrderQuotes.js     # è·å–è®¢å•æŠ¥ä»·
â”‚   â”‚   â”‚       â”œâ”€â”€ bindOrderToCustomer.js# ç»‘å®šè®¢å•åˆ°å®¢æˆ·
â”‚   â”‚   â”‚       â””â”€â”€ confirmOrderAddons.js # ç¡®è®¤è®¢å•é™„åŠ æœåŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tenant/                    # ã€ç§Ÿæˆ·ç«¯ã€‘ç§Ÿæˆ·åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ listTenantOrders.js       # ç§Ÿæˆ·è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ getTenantDashboard.js     # ç§Ÿæˆ·ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ public/                    # ã€å…¬å…±æ¥å£ã€‘åŒ¿åè®¿é—®
â”‚   â”‚   â”‚   â”œâ”€â”€ createPublicOrder.js      # åŒ¿åä¸‹å•
â”‚   â”‚   â”‚   â”œâ”€â”€ fetchPublicOrder.js       # æŸ¥è¯¢è®¢å•
â”‚   â”‚   â”‚   â””â”€â”€ getOrderQuote.js          # è·å–è®¢å•æŠ¥ä»·
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ map/                       # ã€åœ°å›¾æœåŠ¡ã€‘åœ°å›¾å’Œè·¯å¾„è§„åˆ’ â­æ”¹é€ 
â”‚   â”‚   â”‚   â”œâ”€â”€ geocode.js                # åœ°ç†ç¼–ç ï¼ˆåœ°å€â†’åæ ‡ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ reverseGeocode.js         # é€†åœ°ç†ç¼–ç ï¼ˆåæ ‡â†’åœ°å€ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ route.js                  # è·¯å¾„è§„åˆ’ï¼ˆé©¾è½¦è·¯çº¿ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ distance.js               # è·ç¦»è®¡ç®—
â”‚   â”‚   â”‚   â”œâ”€â”€ poi.js                    # å‘¨è¾¹ POI æœç´¢
â”‚   â”‚   â”‚   â”œâ”€â”€ currentPosition.js        # å½“å‰ä½ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ history.js                # å†å²è½¨è¿¹
â”‚   â”‚   â”‚   â”œâ”€â”€ onlineStatus.js           # åœ¨çº¿çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ positionUpdate.js         # ä½ç½®æ›´æ–°
â”‚   â”‚   â”‚   â”œâ”€â”€ avRouteCalculate.js       # æ— äººè½¦è·¯å¾„è§„åˆ’
â”‚   â”‚   â”‚   â”œâ”€â”€ avRouteAdjust.js          # æ— äººè½¦è·¯å¾„è°ƒæ•´
â”‚   â”‚   â”‚   â”œâ”€â”€ avRouteDetails.js         # æ— äººè½¦è·¯å¾„è¯¦æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ avRouteMultiPoint.js      # æ— äººè½¦å¤šç‚¹è·¯å¾„
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ wallet/                    # ã€é’±åŒ…ç®¡ç†ã€‘è´¢åŠ¡é’±åŒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ getWalletBalance.js       # æŸ¥è¯¢ä½™é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ recharge.js               # å……å€¼
â”‚   â”‚   â”‚   â”œâ”€â”€ listTransactions.js       # äº¤æ˜“è®°å½•
â”‚   â”‚   â”‚   â””â”€â”€ getWalletDetails.js       # é’±åŒ…è¯¦æƒ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ settlement/                # ã€ç»“ç®—ç®¡ç†ã€‘è®¢å•ç»“ç®—
â”‚   â”‚   â”‚   â””â”€â”€ processSettlement.js      # å¤„ç†ç»“ç®—
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ vehicle-models/            # ã€è½¦å‹åº“ã€‘å…¬å¼€è½¦å‹æŸ¥è¯¢
â”‚   â”‚   â”‚   â””â”€â”€ listVehicleModels.js      # è½¦å‹åˆ—è¡¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ setup/                     # ã€åˆå§‹åŒ–ã€‘æ•°æ®åˆå§‹åŒ–
â”‚   â”‚       â””â”€â”€ initializeData.js         # åˆå§‹åŒ–æµ‹è¯•æ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ routes/                        # ã€ä¼ ç»Ÿè·¯ç”±ã€‘å…¼å®¹å±‚ï¼ˆé€æ­¥è¿ç§»åˆ° handlersï¼‰
â”‚       â””â”€â”€ (å¾…è¿ç§»çš„è·¯ç”±æ–‡ä»¶)
â”‚
â”œâ”€â”€ ğŸ“‚ middleware/                        # ã€ä¸­é—´ä»¶å±‚ã€‘è¯·æ±‚å¤„ç†ç®¡é“ â­å®‰å…¨æ ¸å¿ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ openapi.js                        # ã€æ ¸å¿ƒã€‘OpenAPI ç»Ÿä¸€å¤„ç†å™¨ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.js                           # ã€è®¤è¯ã€‘Session è®¤è¯ä¸­é—´ä»¶ï¼ˆç™»å½•çŠ¶æ€æ£€æŸ¥ï¼‰
â”‚   â”œâ”€â”€ jwtAuth.js                        # ã€è®¤è¯ã€‘JWT Token è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ adminAuth.js                      # ã€è®¤è¯ã€‘ç®¡ç†å‘˜æƒé™è®¤è¯
â”‚   â”œâ”€â”€ session.js                        # ã€ä¼šè¯ã€‘Session ç®¡ç†ä¸­é—´ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ handlerLoader.js                  # ã€åŠ è½½å™¨ã€‘åŠ¨æ€åŠ è½½ API å¤„ç†å™¨
â”‚   â”œâ”€â”€ api-validator.js                  # ã€éªŒè¯ã€‘API å‚æ•°éªŒè¯
â”‚   â”œâ”€â”€ validation.js                     # ã€éªŒè¯ã€‘è¯·æ±‚æ•°æ®éªŒè¯ï¼ˆä¸šåŠ¡è§„åˆ™ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ error.js                          # ã€é”™è¯¯ã€‘å…¨å±€é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ debug.js                          # ã€è°ƒè¯•ã€‘è°ƒè¯•ä¸­é—´ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ services/                          # ã€ä¸šåŠ¡æœåŠ¡å±‚ã€‘ä¸šåŠ¡é€»è¾‘å°è£… â­é…ç½®è¯»å–
â”‚   â”‚
â”‚   â”œâ”€â”€ ConfigService.js                  # ã€é…ç½®æœåŠ¡ã€‘â­æ–°å¢ ç»Ÿä¸€é…ç½®è¯»å–ï¼ˆæ•°æ®åº“ï¼‰
â”‚   â”œâ”€â”€ tenantService.js                  # ã€ç§Ÿæˆ·æœåŠ¡ã€‘ç§Ÿæˆ·ä¸šåŠ¡é€»è¾‘
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ business/                      # ã€ä¸šåŠ¡æœåŠ¡ã€‘æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ MapService.js                 # ã€åœ°å›¾æœåŠ¡ã€‘â­æ”¹é€  ä»æ•°æ®åº“è¯»å–é…ç½®
â”‚   â”‚   â”œâ”€â”€ AVRouteService.js             # ã€è·¯å¾„è§„åˆ’ã€‘â­æ”¹é€  ä»æ•°æ®åº“è¯»å–é…ç½®
â”‚   â”‚   â””â”€â”€ TrackingService.js            # ã€è½¦è¾†è¿½è¸ªã€‘â­æ”¹é€  ä»æ•°æ®åº“è¯»å–é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ providers/                     # ã€æœåŠ¡æä¾›å•†ã€‘ç¬¬ä¸‰æ–¹æœåŠ¡å®ç°
â”‚   â”‚   â”œâ”€â”€ TencentMap.js                 # è…¾è®¯åœ°å›¾å®ç°
â”‚   â”‚   â”œâ”€â”€ BaiduMap.js                   # ç™¾åº¦åœ°å›¾å®ç°
â”‚   â”‚   â”œâ”€â”€ AutoXAVRoute.js               # AutoX æ— äººè½¦è·¯å¾„è§„åˆ’
â”‚   â”‚   â””â”€â”€ VehicleCompanyTracking.js     # è½¦è¾†å…¬å¸ä½ç½®è¿½è¸ª
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ third-party/                   # ã€ç¬¬ä¸‰æ–¹æŠ½è±¡ã€‘æœåŠ¡æ¥å£å®šä¹‰
â”‚       â”œâ”€â”€ MapProvider.js                # åœ°å›¾æœåŠ¡æ¥å£
â”‚       â”œâ”€â”€ AVRouteProvider.js            # è·¯å¾„è§„åˆ’æ¥å£
â”‚       â””â”€â”€ VehicleTrackingProvider.js    # è½¦è¾†è¿½è¸ªæ¥å£
â”‚
â”œâ”€â”€ ğŸ“‚ db/                                # ã€æ•°æ®åº“å±‚ã€‘SQLite æ•°æ®è®¿é—® â­é…ç½®åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ connection.js                     # ã€è¿æ¥ç®¡ç†ã€‘æ•°æ®åº“è¿æ¥ï¼ˆå•ä¾‹ï¼‰
â”‚   â”œâ”€â”€ index.js                          # ã€ç´¢å¼•å¯¼å‡ºã€‘æ•°æ®åº“æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ schema.js                         # ã€è¡¨ç»“æ„ã€‘æ•°æ®åº“è¡¨å®šä¹‰ + é»˜è®¤æ•°æ®åˆå§‹åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/                        # ã€ORM æ¨¡å‹ã€‘æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ User.js                       # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Tenant.js                     # ç§Ÿæˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Organization.js               # ç»„ç»‡æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Order.js                      # è®¢å•æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ OrderModel.js                 # è®¢å•æ¨¡å‹ï¼ˆæ‰©å±•ï¼‰
â”‚   â”‚   â”œâ”€â”€ Customer.js                   # å®¢æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CustomerApplication.js        # å®¢æˆ·ç”³è¯·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ UserSession.js                # ç”¨æˆ·ä¼šè¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ SystemSetting.js              # ã€ç³»ç»Ÿé…ç½®ã€‘â­æ›´æ–° é…ç½®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ServiceProvider.js            # ã€æœåŠ¡æä¾›å•†ã€‘â­æ–°å¢ æä¾›å•†æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ VehicleTracking.js            # è½¦è¾†è¿½è¸ªæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Violation.js                  # è¿è§„è®°å½•æ¨¡å‹
â”‚   â”‚   â””â”€â”€ PricingRule.js                # å®šä»·è§„åˆ™æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ migrations/                    # ã€æ•°æ®åº“è¿ç§»ã€‘ç‰ˆæœ¬ç®¡ç†
â”‚       â”œâ”€â”€ 001_initial.js                # åˆå§‹è¡¨ç»“æ„
â”‚       â”œâ”€â”€ 002_add_management_tables.js  # ç®¡ç†è¡¨
â”‚       â”œâ”€â”€ 003_add_wallet_tables.js      # é’±åŒ…è¡¨
â”‚       â”œâ”€â”€ 005_add_vehicle_models_table.js# è½¦å‹åº“è¡¨
â”‚       â”œâ”€â”€ 006_add_vehicle_model_id_to_tenant_vehicles.js# å¤–é”®å…³è”
â”‚       â”œâ”€â”€ 007_add_tenant_applications.js# ç§Ÿæˆ·ç”³è¯·è¡¨
â”‚       â””â”€â”€ 008_add_service_areas_table.js# æœåŠ¡åŒºåŸŸè¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ config/                            # ã€é…ç½®æ–‡ä»¶ã€‘ç¯å¢ƒå˜é‡å…œåº•é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ index.js                          # æœåŠ¡å™¨é…ç½®ï¼ˆç«¯å£ã€åç§°ã€Sessionï¼‰
â”‚   â”œâ”€â”€ map.js                            # åœ°å›¾é…ç½®ï¼ˆæä¾›å•†ã€API å¯†é’¥ï¼‰â­ä¿ç•™å…œåº•
â”‚   â”œâ”€â”€ av-route.js                       # è·¯å¾„è§„åˆ’é…ç½® â­ä¿ç•™å…œåº•
â”‚   â””â”€â”€ tracking.js                       # è½¦è¾†è¿½è¸ªé…ç½® â­ä¿ç•™å…œåº•
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                           # ã€æ•°æ®åº“è„šæœ¬ã€‘ç»´æŠ¤å’Œæµ‹è¯•
â”‚   â”‚
â”‚   â”œâ”€â”€ migrate_config_to_db.js           # ã€è¿ç§»ã€‘â­æ–°å¢ é…ç½®è¿ç§»åˆ°æ•°æ®åº“
â”‚   â”œâ”€â”€ test_config_db.js                 # ã€æµ‹è¯•ã€‘â­æ–°å¢ é…ç½®åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ quick_test_config.js              # ã€æµ‹è¯•ã€‘â­æ–°å¢ å¿«é€Ÿæµ‹è¯•
â”‚   â””â”€â”€ add_shenyang_stop_points.js       # ã€æ•°æ®ã€‘æ·»åŠ æ²ˆé˜³åœé ç‚¹
â”‚
â”œâ”€â”€ ğŸ“‚ data/                              # ã€æ•°æ®ç›®å½•ã€‘SQLite æ•°æ®åº“æ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ mydatabase.db                     # ã€ä¸»æ•°æ®åº“ã€‘â­ä¿ç•™ 217KB
â”‚
â”œâ”€â”€ ğŸ“‚ test/                              # ã€æµ‹è¯•ç›®å½•ã€‘ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”‚
â”‚   â””â”€â”€ end-to-end-flow-test.js           # å®Œæ•´æµç¨‹æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ“‚ backup/                            # ã€å¤‡ä»½ç›®å½•ã€‘æ•°æ®åº“å¤‡ä»½
â”œâ”€â”€ ğŸ“‚ utils/                             # ã€å·¥å…·å‡½æ•°ã€‘é€šç”¨å·¥å…·
â””â”€â”€ ğŸ“‚ routes/                            # ã€è·¯ç”±ç›®å½•ã€‘ä¼ ç»Ÿè·¯ç”±ï¼ˆå¾…è¿ç§»ï¼‰
```

---

## ğŸ“‚ web/ å‰ç«¯ Web ç»“æ„

```
web/
â”‚
â”œâ”€â”€ ğŸ“‚ admin-web/                         # ã€PC ç®¡ç†åå°ã€‘è¶…çº§ç®¡ç†å‘˜ç•Œé¢
â”‚   â”œâ”€â”€ index.html                        # ç®¡ç†åå°é¦–é¡µ
â”‚   â”œâ”€â”€ css/                              # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                               # JavaScript é€»è¾‘
â”‚   â””â”€â”€ components/                       # Vue ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ“‚ tenant-web/                        # ã€ç§Ÿæˆ· Web ç«¯ã€‘æ‰¿è¿å•†/å®¢æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ index.html                        # ç§Ÿæˆ·ç«¯é¦–é¡µ
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ components/
â”‚
â””â”€â”€ ğŸ“‚ customer-web/                      # ã€å®¢æˆ·ç«¯ã€‘å®¢æˆ·ç•Œé¢
    â”œâ”€â”€ index.html                        # å®¢æˆ·ç«¯é¦–é¡µ
    â”œâ”€â”€ css/
    â”œâ”€â”€ js/
    â””â”€â”€ components/
```

---

## ğŸ“‚ wx-program/ å¾®ä¿¡å°ç¨‹åºç»“æ„

```
wx-program/
â”‚
â”œâ”€â”€ app.js                                # å°ç¨‹åºå…¥å£
â”œâ”€â”€ app.json                              # å°ç¨‹åºé…ç½®
â”œâ”€â”€ app.wxss                              # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ ğŸ“‚ pages/                             # ã€é¡µé¢ç›®å½•ã€‘
â”‚   â”œâ”€â”€ index/                            # é¦–é¡µ
â”‚   â”œâ”€â”€ order/                            # è®¢å•é¡µé¢
â”‚   â”œâ”€â”€ mine/                             # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ map/                              # åœ°å›¾é€‰ç‚¹
â”‚
â”œâ”€â”€ ğŸ“‚ components/                        # ã€ç»„ä»¶ç›®å½•ã€‘
â”‚   â””â”€â”€ (å¯å¤ç”¨ç»„ä»¶)
â”‚
â”œâ”€â”€ ğŸ“‚ utils/                             # ã€å·¥å…·å‡½æ•°ã€‘
â”‚   â””â”€â”€ api.js                            # API è°ƒç”¨å°è£…
â”‚
â””â”€â”€ ğŸ“‚ images/                            # ã€å›¾ç‰‡èµ„æºã€‘
```

---

## ğŸ“‚ docs/ é¡¹ç›®æ–‡æ¡£ç»“æ„

```
docs/
â”‚
â”œâ”€â”€ ğŸ“‚ api-backups/                       # API å¤‡ä»½
â”œâ”€â”€ ğŸ“‚ process-flow/                      # æµç¨‹å›¾
â”‚
â”œâ”€â”€ API_INTEGRATION_GUIDE.md              # API é›†æˆæŒ‡å—
â”œâ”€â”€ API_TESTING_README.md                 # API æµ‹è¯•è¯´æ˜
â”œâ”€â”€ api-validation-checklist-v1.csv       # API éªŒè¯æ¸…å•
â”œâ”€â”€ FIX_SUMMARY.md                        # ä¿®å¤æ€»ç»“
â”œâ”€â”€ HANDLER_MAPPING.md                    # å¤„ç†å™¨æ˜ å°„
â”œâ”€â”€ map_api_development_plan.md           # åœ°å›¾ API å¼€å‘è®¡åˆ’
â”œâ”€â”€ map_integration_quick_start.md        # åœ°å›¾é›†æˆå¿«é€Ÿå¼€å§‹
â”œâ”€â”€ map_integration_summary.md            # åœ°å›¾é›†æˆæ€»ç»“
â”œâ”€â”€ PC_FRONTEND_DESIGN.md                 # PC å‰ç«¯è®¾è®¡
â”œâ”€â”€ third_party_map_integration.md        # ç¬¬ä¸‰æ–¹åœ°å›¾é›†æˆ
â”œâ”€â”€ wallet-commission-management.md       # é’±åŒ…ä½£é‡‘ç®¡ç†
â”œâ”€â”€ WX_PROGRAM_API_INTEGRATION.md         # å°ç¨‹åº API é›†æˆ
â””â”€â”€ WX_PROGRAM_DESIGN.md                  # å°ç¨‹åºè®¾è®¡
```

---

## ğŸ”— æ¨¡å—å…³ç³»å›¾

### è¯·æ±‚å¤„ç†æµç¨‹

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Express Server                â”‚
â”‚           (server.js)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä¸­é—´ä»¶ç®¡é“                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. session.js (ä¼šè¯ç®¡ç†)        â”‚    â”‚
â”‚  â”‚ 2. auth.js (è®¤è¯æ£€æŸ¥)           â”‚    â”‚
â”‚  â”‚ 3. api-validator.js (å‚æ•°éªŒè¯)  â”‚    â”‚
â”‚  â”‚ 4. validation.js (ä¸šåŠ¡éªŒè¯)     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      OpenAPI ä¸­é—´ä»¶ (openapi.js)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. åŠ è½½ openapi.yaml            â”‚    â”‚
â”‚  â”‚ 2. åŒ¹é…æ“ä½œ ID                  â”‚    â”‚
â”‚  â”‚ 3. å®‰å…¨å¤„ç†å™¨ (auth.js)         â”‚    â”‚
â”‚  â”‚    - æ£€æŸ¥ Session/JWT           â”‚    â”‚
â”‚  â”‚    - æ³¨å…¥ context (ç”¨æˆ·ä¿¡æ¯)     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å¤„ç†å™¨åŠ è½½å™¨ (handlerLoader.js)    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æ ¹æ® operationId åŠ¨æ€åŠ è½½        â”‚    â”‚
â”‚  â”‚ api/handlers/xxx/xxx.js         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Handler (å¤„ç†å™¨)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. è§£æè¯·æ±‚å‚æ•°                  â”‚    â”‚
â”‚  â”‚ 2. è°ƒç”¨ä¸šåŠ¡æœåŠ¡                  â”‚    â”‚
â”‚  â”‚ 3. è¿”å›å“åº”                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸šåŠ¡æœåŠ¡å±‚ (Services)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ConfigService (é…ç½®æœåŠ¡)        â”‚    â”‚
â”‚  â”‚   â””â”€ ä»æ•°æ®åº“è¯»å–é…ç½®            â”‚    â”‚
â”‚  â”‚ MapService / AVRouteService     â”‚    â”‚
â”‚  â”‚   â””â”€ è°ƒç”¨ç¬¬ä¸‰æ–¹ API              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ•°æ®åº“å±‚ (DB Models)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ SystemSetting / ServiceProvider â”‚    â”‚
â”‚  â”‚   â””â”€ SQLite æ•°æ®è®¿é—®             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é…ç½®è¯»å–æµç¨‹ â­æ”¹é€ 

```
æœåŠ¡å¯åŠ¨
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®åº“åˆå§‹åŒ– (db/index.js)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. åˆ›å»ºæ•°æ®åº“è¿æ¥               â”‚    â”‚
â”‚  â”‚ 2. åˆå§‹åŒ–è¡¨ç»“æ„ (schema.js)     â”‚    â”‚
â”‚  â”‚ 3. åˆ›å»ºé»˜è®¤é…ç½®                 â”‚    â”‚
â”‚  â”‚    - system_settings è¡¨         â”‚    â”‚
â”‚  â”‚    - service_providers è¡¨       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é…ç½®æœåŠ¡ (ConfigService)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. æ£€æŸ¥ç¼“å­˜ (5 åˆ†é’Ÿ TTL)          â”‚    â”‚
â”‚  â”‚ 2. ä»æ•°æ®åº“è¯»å–                 â”‚    â”‚
â”‚  â”‚ 3. æ›´æ–°ç¼“å­˜                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ä¸šåŠ¡æœåŠ¡ (MapService ç­‰)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. è°ƒç”¨ ConfigService           â”‚    â”‚
â”‚  â”‚ 2. è·å–æœåŠ¡æä¾›å•†é…ç½®           â”‚    â”‚
â”‚  â”‚ 3. åˆå§‹åŒ–ç¬¬ä¸‰æ–¹æœåŠ¡å®ä¾‹         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼              â–¼              â–¼              â–¼
TencentMap    BaiduMap     AutoXAVRoute   VehicleTracking
(è…¾è®¯åœ°å›¾)    (ç™¾åº¦åœ°å›¾)    (AutoX è·¯å¾„)    (è½¦è¾†è¿½è¸ª)
```

### å®‰å…¨è®¤è¯æµç¨‹

```
è¯·æ±‚åˆ°è¾¾
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Session ä¸­é—´ä»¶ (session.js)            â”‚
â”‚  - åˆå§‹åŒ– express-session              â”‚
â”‚  - è®¾ç½® Cookie å‚æ•°                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¤è¯ä¸­é—´ä»¶ (auth.js)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. æ£€æŸ¥ Session.userId          â”‚    â”‚
â”‚  â”‚ 2. æ£€æŸ¥ Authorization Header    â”‚    â”‚
â”‚  â”‚ 3. éªŒè¯ JWT Token               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenAPI å®‰å…¨å¤„ç†å™¨                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. æ£€æŸ¥ operation.security      â”‚    â”‚
â”‚  â”‚ 2. å…è®¤è¯æ¥å£ (security: [])    â”‚    â”‚
â”‚  â”‚ 3. éœ€è¦è®¤è¯æ¥å£                 â”‚    â”‚
â”‚  â”‚    - ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·           â”‚    â”‚
â”‚  â”‚    - æ³¨å…¥ context (id, roles)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®¡ç†å‘˜è®¤è¯ (adminAuth.js)              â”‚
â”‚  - æ£€æŸ¥ user_type = 'admin_user'       â”‚
â”‚  - æ£€æŸ¥ role = 'super_admin'           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
å¤„ç†å™¨æ‰§è¡Œ
```

---

## ğŸ“Š æ•°æ®åº“è¡¨å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ ¸å¿ƒä¸šåŠ¡è¡¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  users   â”‚â”€â”€â”€â”€<â”‚ tenants  â”‚â”€â”€â”€â”€<â”‚ orders   â”‚           â”‚
â”‚  â”‚  ç”¨æˆ·è¡¨  â”‚     â”‚  ç§Ÿæˆ·è¡¨  â”‚     â”‚  è®¢å•è¡¨  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚                â”‚                â”‚                  â”‚
â”‚       â”‚                â”‚                â”‚                  â”‚
â”‚       â–¼                â–¼                â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚customer_ â”‚     â”‚tenant_   â”‚     â”‚  quotes  â”‚           â”‚
â”‚  â”‚applicationsâ”‚    â”‚applicationsâ”‚   â”‚  æŠ¥ä»·è¡¨  â”‚           â”‚
â”‚  â”‚å®¢æˆ·ç”³è¯·è¡¨ â”‚    â”‚ç§Ÿæˆ·ç”³è¯·è¡¨ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚customers â”‚     â”‚tenant_   â”‚     â”‚ vehicle_ â”‚           â”‚
â”‚  â”‚  å®¢æˆ·è¡¨  â”‚     â”‚vehicles  â”‚     â”‚ models   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ ç§Ÿæˆ·è½¦è¾† â”‚     â”‚  è½¦å‹åº“  â”‚           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      é…ç½®ç®¡ç†è¡¨ â­æ–°å¢                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ system_settings  â”‚     â”‚service_providers â”‚             â”‚
â”‚  â”‚   ç³»ç»Ÿé…ç½®è¡¨     â”‚     â”‚  æœåŠ¡æä¾›å•†é…ç½®è¡¨ â”‚             â”‚
â”‚  â”‚ - config_key     â”‚     â”‚ - provider_name  â”‚             â”‚
â”‚  â”‚ - config_value   â”‚     â”‚ - provider_type  â”‚             â”‚
â”‚  â”‚ - config_type    â”‚     â”‚ - api_endpoint   â”‚             â”‚
â”‚  â”‚ - is_enabled     â”‚     â”‚ - api_key        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ - auth_token     â”‚             â”‚
â”‚                           â”‚ - is_enabled     â”‚             â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      è´¢åŠ¡ç›¸å…³è¡¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ wallets  â”‚â”€â”€â”€â”€<â”‚wallet_   â”‚     â”‚settlementsâ”‚          â”‚
â”‚  â”‚  é’±åŒ…è¡¨  â”‚     â”‚transactionsâ”‚   â”‚  ç»“ç®—è¡¨  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  äº¤æ˜“è®°å½• â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚commissionâ”‚     â”‚commissionâ”‚     â”‚platform_ â”‚           â”‚
â”‚  â”‚_configs  â”‚     â”‚_history  â”‚     â”‚pricing_  â”‚           â”‚
â”‚  â”‚ä½£é‡‘é…ç½®  â”‚     â”‚ä½£é‡‘å†å²  â”‚     â”‚rules     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚å¹³å°å®šä»·  â”‚           â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      è½¦è¾†è¿½è¸ªè¡¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ vehicle_tracking â”‚     â”‚vehicle_positions â”‚             â”‚
â”‚  â”‚   è½¦è¾†è¿½è¸ªè¡¨     â”‚     â”‚   è½¦è¾†ä½ç½®è®°å½•    â”‚             â”‚
â”‚  â”‚ - vehicle_id     â”‚<â”€â”€â”€â”€â”‚ - vehicle_id     â”‚             â”‚
â”‚  â”‚ - lat/lng        â”‚     â”‚ - lat/lng        â”‚             â”‚
â”‚  â”‚ - status         â”‚     â”‚ - timestamp      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚    violations    â”‚                                       â”‚
â”‚  â”‚    è¿è§„è®°å½•è¡¨    â”‚                                       â”‚
â”‚  â”‚ - vehicle_id     â”‚                                       â”‚
â”‚  â”‚ - violation_type â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åŸºç¡€æ•°æ®è¡¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚organizationsâ”‚    â”‚user_     â”‚     â”‚ service_ â”‚           â”‚
â”‚  â”‚  ç»„ç»‡è¡¨    â”‚    â”‚sessions  â”‚     â”‚  areas   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  ä¼šè¯è¡¨  â”‚     â”‚ æœåŠ¡åŒºåŸŸ â”‚           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ å…³é”®æ¨¡å—è¯´æ˜

### 1. OpenAPI ç»Ÿä¸€å¤„ç†å™¨ â­æ ¸å¿ƒ

**æ–‡ä»¶**: `middleware/openapi.js`

**ä½œç”¨**:
- åŠ è½½ `openapi.yaml` è§„èŒƒ
- æ ¹æ® `operationId` åŠ¨æ€åŠ è½½å¤„ç†å™¨
- æ‰§è¡Œå®‰å…¨è®¤è¯
- ç»Ÿä¸€é”™è¯¯å¤„ç†

**æµç¨‹**:
```
è¯·æ±‚ â†’ åŠ è½½è§„èŒƒ â†’ åŒ¹é… operationId â†’ å®‰å…¨è®¤è¯ â†’ åŠ è½½ Handler â†’ æ‰§è¡Œ
```

### 2. é…ç½®æœåŠ¡ â­æ–°å¢

**æ–‡ä»¶**: `services/ConfigService.js`

**ä½œç”¨**:
- ç»Ÿä¸€ä»æ•°æ®åº“è¯»å–é…ç½®
- 5 åˆ†é’Ÿç¼“å­˜æœºåˆ¶
- æ”¯æŒç³»ç»Ÿé…ç½®å’ŒæœåŠ¡æä¾›å•†é…ç½®

**ä½¿ç”¨**:
```javascript
const ConfigService = require('../services/ConfigService');
const provider = await ConfigService.getDefaultProvider('map');
```

### 3. æ•°æ®åº“æ¨¡å‹

**ç›®å½•**: `db/models/`

**è¯´æ˜**:
- æ¯ä¸ªè¡¨å¯¹åº”ä¸€ä¸ªæ¨¡å‹ç±»
- æä¾› CRUD æ–¹æ³•
- ä½¿ç”¨ `getDb()` è·å–æ•°æ®åº“è¿æ¥

### 4. ä¸­é—´ä»¶ç®¡é“

**ç›®å½•**: `middleware/`

**é¡ºåº**:
1. `session.js` - ä¼šè¯ç®¡ç†
2. `auth.js` - è®¤è¯æ£€æŸ¥
3. `api-validator.js` - å‚æ•°éªŒè¯
4. `validation.js` - ä¸šåŠ¡éªŒè¯
5. `openapi.js` - OpenAPI å¤„ç†
6. `error.js` - é”™è¯¯å¤„ç†

---

## ğŸ“ é…ç½®ç®¡ç†è¯´æ˜

### é…ç½®ä¼˜å…ˆçº§

```
1. æ•°æ®åº“é…ç½® (ä¼˜å…ˆ)
   â†“
2. ç¯å¢ƒå˜é‡ (å…œåº•)
   â†“
3. ç¡¬ç¼–ç é»˜è®¤å€¼ (æœ€å)
```

### é…ç½®è¡¨è¯´æ˜

| è¡¨å | ç”¨é€” | ç¤ºä¾‹é…ç½® |
|------|------|----------|
| `system_settings` | ç³»ç»Ÿé…ç½® | `map.defaultProvider=TencentMap` |
| `service_providers` | æœåŠ¡æä¾›å•† | `TencentMap.api_key=xxx` |

### ç®¡ç† API

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/admin/settings/system` | GET | è·å–ç³»ç»Ÿé…ç½® |
| `/api/admin/settings/system/:id` | PUT | æ›´æ–°ç³»ç»Ÿé…ç½® |
| `/api/admin/settings/providers` | GET | è·å–æœåŠ¡æä¾›å•† |
| `/api/admin/settings/providers/:id` | PUT | æ›´æ–°æœåŠ¡æä¾›å•† |
| `/api/admin/settings/config/:key` | POST | å¿«æ·è®¾ç½®é…ç½® |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2026-02-21
